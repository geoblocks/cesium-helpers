let e,t,r,n,a,o,i,u,s,l,f,d,c,p,h,m,y,g,b,w,O,v,x,_,S;import"./cesium-binoculars.76e31908.js";import"./cesium-compass-bar.ddd5a70c.js";import"./cesium-compass.14794d0a.js";var j,A,E=globalThis;function R(e){return e&&e.__esModule?e.default:e}var q={},T={},z=E.parcelRequire5532;null==z&&((z=function(e){if(e in q)return q[e].exports;if(e in T){var t=T[e];delete T[e];var r={id:e,exports:{}};return q[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){T[e]=t},E.parcelRequire5532=z);var C=z.register;C("3hCk4",function(e,t){!function(r){var n=t&&!t.nodeType&&t,a=e&&!e.nodeType&&e,o="object"==typeof E&&E;(o.global===o||o.window===o||o.self===o)&&(r=o);var i,u,s=/^xn--/,l=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=Math.floor,p=String.fromCharCode;function h(e){throw RangeError(d[e])}function m(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function y(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+m((e=e.replace(f,".")).split("."),t).join(".")}function g(e){for(var t,r,n=[],a=0,o=e.length;a<o;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<o?(64512&(r=e.charCodeAt(a++)))==56320?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),a--):n.push(t);return n}function b(e){return m(e,function(e){var t="";return e>65535&&(e-=65536,t+=p(e>>>10&1023|55296),e=56320|1023&e),t+=p(e)}).join("")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function O(e,t,r){var n=0;for(e=r?c(e/700):e>>1,e+=c(e/t);e>455;n+=36)e=c(e/35);return c(n+36*e/(e+38))}function v(e){var t,r,n,a,o,i,u,s,l,f,d,p=[],m=e.length,y=0,g=128,w=72;for((n=e.lastIndexOf("-"))<0&&(n=0),a=0;a<n;++a)e.charCodeAt(a)>=128&&h("not-basic"),p.push(e.charCodeAt(a));for(o=n>0?n+1:0;o<m;){for(i=y,u=1,s=36;o>=m&&h("invalid-input"),((l=(t=e.charCodeAt(o++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36)>=36||l>c((0x7fffffff-y)/u))&&h("overflow"),y+=l*u,!(l<(f=s<=w?1:s>=w+26?26:s-w));s+=36){;u>c(0x7fffffff/(d=36-f))&&h("overflow"),u*=d}w=O(y-i,r=p.length+1,0==i),c(y/r)>0x7fffffff-g&&h("overflow"),g+=c(y/r),y%=r,p.splice(y++,0,g)}return b(p)}function x(e){var t,r,n,a,o,i,u,s,l,f,d,m,y,b,v,x=[];for(i=0,m=(e=g(e)).length,t=128,r=0,o=72;i<m;++i)(d=e[i])<128&&x.push(p(d));for(n=a=x.length,a&&x.push("-");n<m;){for(u=0x7fffffff,i=0;i<m;++i)(d=e[i])>=t&&d<u&&(u=d);for(u-t>c((0x7fffffff-r)/(y=n+1))&&h("overflow"),r+=(u-t)*y,t=u,i=0;i<m;++i)if((d=e[i])<t&&++r>0x7fffffff&&h("overflow"),d==t){for(s=r,l=36;!(s<(f=l<=o?1:l>=o+26?26:l-o));l+=36)v=s-f,b=36-f,x.push(p(w(f+v%b,0))),s=c(v/b);x.push(p(w(s,0))),o=O(r,y,n==a),r=0,++n}++r,++t}return x.join("")}if(i={version:"1.3.2",ucs2:{decode:g,encode:b},decode:v,encode:x,toASCII:function(e){return y(e,function(e){return l.test(e)?"xn--"+x(e):e})},toUnicode:function(e){return y(e,function(e){return s.test(e)?v(e.slice(4).toLowerCase()):e})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return i});else if(n&&a)if(e.exports==n)a.exports=i;else for(u in i)i.hasOwnProperty(u)&&(n[u]=i[u]);else r.punycode=i}(this)}),C("2Nl4L",function(e,t){var r,n;r=e.exports,n=function(e){var t=e&&e.IPv6;return{best:function(e){var t,r,n=e.toLowerCase().split(":"),a=n.length,o=8;for(""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[a-1]&&""===n[a-2]&&n.pop(),a=n.length,-1!==n[a-1].indexOf(".")&&(o=7),t=0;t<a&&""!==n[t];t++);if(t<o)for(n.splice(t,1,"0000");n.length<o;)n.splice(t,0,"0000");for(var i=0;i<o;i++){r=n[i].split("");for(var u=0;u<3;u++)if("0"===r[0]&&r.length>1)r.splice(0,1);else break;n[i]=r.join("")}var s=-1,l=0,f=0,d=-1,c=!1;for(i=0;i<o;i++)c?"0"===n[i]?f+=1:(c=!1,f>l&&(s=d,l=f)):"0"===n[i]&&(c=!0,d=i,f=1);f>l&&(s=d,l=f),l>1&&n.splice(s,l,""),a=n.length;var p="";for(""===n[0]&&(p=":"),i=0;i<a&&(p+=n[i],i!==a-1);i++)p+=":";return""===n[a-1]&&(p+=":"),p},noConflict:function(){return e.IPv6===this&&(e.IPv6=t),this}}},e.exports?e.exports=n():"function"==typeof define&&define.amd?define(n):r.IPv6=n(r)}),C("3PMOQ",function(e,t){var r,n;r=e.exports,n=function(e){var t=e&&e.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var n=e.lastIndexOf(".",t-1);if(n<=0||n>=t-1)return!1;var a=r.list[e.slice(t+1)];return!!a&&a.indexOf(" "+e.slice(n+1,t)+" ")>=0},is:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1||e.lastIndexOf(".",t-1)>=0)return!1;var n=r.list[e.slice(t+1)];return!!n&&n.indexOf(" "+e.slice(0,t)+" ")>=0},get:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var n=e.lastIndexOf(".",t-1);if(n<=0||n>=t-1)return null;var a=r.list[e.slice(t+1)];return!a||0>a.indexOf(" "+e.slice(n+1,t)+" ")?null:e.slice(n+1)},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return r},e.exports?e.exports=n():"function"==typeof define&&define.amd?define(n):r.SecondLevelDomains=n(r)});var I=z("800sp"),P=z("jJTNo");class M{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}let U="important",k=" !"+U,N=(S=class extends M{constructor(e){if(super(e),1!==e.type||"style"!==e.name||e.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return null==n?t:t+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${n};`},"")}update(e,[t]){let{style:r}=e.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(t)),this.render(t);for(let e of this.ft)null==t[e]&&(this.ft.delete(e),e.includes("-")?r.removeProperty(e):r[e]=null);for(let e in t){let n=t[e];if(null!=n){this.ft.add(e);let t="string"==typeof n&&n.endsWith(k);e.includes("-")||t?r.setProperty(e,t?n.slice(0,-11):n,t?U:""):r[e]=n}}return P.noChange}},(...e)=>({_$litDirective$:S,values:e}));var D=z("kWQjc"),F=z("bXwZF"),D=z("kWQjc"),F=(z("bXwZF"),z("bXwZF")),L=z("3pzcG"),$=z("jQJji"),B=z("AXvpI"),F=z("bXwZF"),$=z("jQJji"),Q=z("1vHsR"),B=z("AXvpI");let W=new(0,F.default),H=new(0,F.default);var J=function(e,t,r,n,a){let o,i,u,s,l,f,d,c,p,h;if(!(0,$.default)(e))throw new(0,Q.default)("cartesian is required.");if(!(0,$.default)(t))throw new(0,Q.default)("oneOverRadii is required.");if(!(0,$.default)(r))throw new(0,Q.default)("oneOverRadiiSquared is required.");if(!(0,$.default)(n))throw new(0,Q.default)("centerToleranceSquared is required.");let m=e.x,y=e.y,g=e.z,b=t.x,w=t.y,O=t.z,v=m*m*b*b,x=y*y*w*w,_=g*g*O*O,S=v+x+_,j=Math.sqrt(1/S),A=F.default.multiplyByScalar(e,j,W);if(S<n)return isFinite(j)?F.default.clone(A,a):void 0;let E=r.x,R=r.y,q=r.z;H.x=A.x*E*2,H.y=A.y*R*2,H.z=A.z*q*2;let T=(1-j)*F.default.magnitude(e)/(.5*F.default.magnitude(H)),z=0;do T-=z,i=1/(1+T*E),u=1/(1+T*R),s=1/(1+T*q),l=i*i,f=u*u,d=s*s,c=l*i,p=f*u,h=d*s,z=(o=v*l+x*f+_*d-1)/(-2*(v*c*E+x*p*R+_*h*q));while(Math.abs(o)>B.default.EPSILON12)return(0,$.default)(a)?(a.x=m*i,a.y=y*u,a.z=g*s,a):new(0,F.default)(m*i,y*u,g*s)};function Y(e,t,r){this.longitude=e??0,this.latitude=t??0,this.height=r??0}Y.fromRadians=function(e,t,r,n){return(L.default.typeOf.number("longitude",e),L.default.typeOf.number("latitude",t),r=r??0,(0,$.default)(n))?(n.longitude=e,n.latitude=t,n.height=r,n):new Y(e,t,r)},Y.fromDegrees=function(e,t,r,n){return L.default.typeOf.number("longitude",e),L.default.typeOf.number("latitude",t),e=B.default.toRadians(e),t=B.default.toRadians(t),Y.fromRadians(e,t,r,n)};let V=new(0,F.default),Z=new(0,F.default),X=new(0,F.default);Y._ellipsoidOneOverRadii=new(0,F.default)(1/6378137,1/6378137,1/6356752.314245179),Y._ellipsoidOneOverRadiiSquared=new(0,F.default)(1/0x24ffb2985f71,1/0x24ffb2985f71,24747391015697002e-30),Y._ellipsoidCenterToleranceSquared=B.default.EPSILON1,Y.fromCartesian=function(e,t,r){let n=(0,$.default)(t)?t.oneOverRadii:Y._ellipsoidOneOverRadii,a=(0,$.default)(t)?t.oneOverRadiiSquared:Y._ellipsoidOneOverRadiiSquared,o=J(e,n,a,(0,$.default)(t)?t._centerToleranceSquared:Y._ellipsoidCenterToleranceSquared,Z);if(!(0,$.default)(o))return;let i=F.default.multiplyComponents(o,a,V);i=F.default.normalize(i,i);let u=F.default.subtract(e,o,X),s=Math.atan2(i.y,i.x),l=Math.asin(i.z),f=B.default.sign(F.default.dot(u,e))*F.default.magnitude(u);return(0,$.default)(r)?(r.longitude=s,r.latitude=l,r.height=f,r):new Y(s,l,f)},Y.toCartesian=function(e,t,r){return L.default.defined("cartographic",e),F.default.fromRadians(e.longitude,e.latitude,e.height,t,r)},Y.clone=function(e,t){if((0,$.default)(e))return(0,$.default)(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new Y(e.longitude,e.latitude,e.height)},Y.equals=function(e,t){return e===t||(0,$.default)(e)&&(0,$.default)(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},Y.equalsEpsilon=function(e,t,r){return r=r??0,e===t||(0,$.default)(e)&&(0,$.default)(t)&&Math.abs(e.longitude-t.longitude)<=r&&Math.abs(e.latitude-t.latitude)<=r&&Math.abs(e.height-t.height)<=r},Y.ZERO=Object.freeze(new Y(0,0,0)),Y.prototype.clone=function(e){return Y.clone(this,e)},Y.prototype.equals=function(e){return Y.equals(this,e)},Y.prototype.equalsEpsilon=function(e,t){return Y.equalsEpsilon(this,e,t)},Y.prototype.toString=function(){return`(${this.longitude}, ${this.latitude}, ${this.height})`};var L=z("3pzcG"),$=z("jQJji"),Q=z("1vHsR"),B=z("AXvpI");function G(e,t,r,n){t=t??0,r=r??0,n=n??0,L.default.typeOf.number.greaterThanOrEquals("x",t,0),L.default.typeOf.number.greaterThanOrEquals("y",r,0),L.default.typeOf.number.greaterThanOrEquals("z",n,0),e._radii=new(0,F.default)(t,r,n),e._radiiSquared=new(0,F.default)(t*t,r*r,n*n),e._radiiToTheFourth=new(0,F.default)(t*t*t*t,r*r*r*r,n*n*n*n),e._oneOverRadii=new(0,F.default)(0===t?0:1/t,0===r?0:1/r,0===n?0:1/n),e._oneOverRadiiSquared=new(0,F.default)(0===t?0:1/(t*t),0===r?0:1/(r*r),0===n?0:1/(n*n)),e._minimumRadius=Math.min(t,r,n),e._maximumRadius=Math.max(t,r,n),e._centerToleranceSquared=B.default.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function K(e,t,r){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,G(this,e,t,r)}Object.defineProperties(K.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),K.clone=function(e,t){if(!(0,$.default)(e))return;let r=e._radii;return(0,$.default)(t)?(F.default.clone(r,t._radii),F.default.clone(e._radiiSquared,t._radiiSquared),F.default.clone(e._radiiToTheFourth,t._radiiToTheFourth),F.default.clone(e._oneOverRadii,t._oneOverRadii),F.default.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new K(r.x,r.y,r.z)},K.fromCartesian3=function(e,t){return(0,$.default)(t)||(t=new K),(0,$.default)(e)&&G(t,e.x,e.y,e.z),t},K.WGS84=Object.freeze(new K(6378137,6378137,6356752.314245179)),K.UNIT_SPHERE=Object.freeze(new K(1,1,1)),K.MOON=Object.freeze(new K(B.default.LUNAR_RADIUS,B.default.LUNAR_RADIUS,B.default.LUNAR_RADIUS)),K._default=K.WGS84,Object.defineProperties(K,{default:{get:function(){return K._default},set:function(e){L.default.typeOf.object("value",e),K._default=e,F.default._ellipsoidRadiiSquared=e.radiiSquared,Y._ellipsoidOneOverRadii=e.oneOverRadii,Y._ellipsoidOneOverRadiiSquared=e.oneOverRadiiSquared,Y._ellipsoidCenterToleranceSquared=e._centerToleranceSquared}}}),K.prototype.clone=function(e){return K.clone(this,e)},K.packedLength=F.default.packedLength,K.pack=function(e,t,r){return L.default.typeOf.object("value",e),L.default.defined("array",t),r=r??0,F.default.pack(e._radii,t,r),t},K.unpack=function(e,t,r){L.default.defined("array",e),t=t??0;let n=F.default.unpack(e,t);return K.fromCartesian3(n,r)},K.prototype.geocentricSurfaceNormal=F.default.normalize,K.prototype.geodeticSurfaceNormalCartographic=function(e,t){L.default.typeOf.object("cartographic",e);let r=e.longitude,n=e.latitude,a=Math.cos(n),o=a*Math.cos(r),i=a*Math.sin(r),u=Math.sin(n);return(0,$.default)(t)||(t=new(0,F.default)),t.x=o,t.y=i,t.z=u,F.default.normalize(t,t)},K.prototype.geodeticSurfaceNormal=function(e,t){if(L.default.typeOf.object("cartesian",e),isNaN(e.x)||isNaN(e.y)||isNaN(e.z))throw new(0,Q.default)("cartesian has a NaN component");if(!F.default.equalsEpsilon(e,F.default.ZERO,B.default.EPSILON14))return(0,$.default)(t)||(t=new(0,F.default)),t=F.default.multiplyComponents(e,this._oneOverRadiiSquared,t),F.default.normalize(t,t)};let ee=new(0,F.default),et=new(0,F.default);K.prototype.cartographicToCartesian=function(e,t){this.geodeticSurfaceNormalCartographic(e,ee),F.default.multiplyComponents(this._radiiSquared,ee,et);let r=Math.sqrt(F.default.dot(ee,et));return F.default.divideByScalar(et,r,et),F.default.multiplyByScalar(ee,e.height,ee),(0,$.default)(t)||(t=new(0,F.default)),F.default.add(et,ee,t)},K.prototype.cartographicArrayToCartesianArray=function(e,t){L.default.defined("cartographics",e);let r=e.length;(0,$.default)(t)?t.length=r:t=Array(r);for(let n=0;n<r;n++)t[n]=this.cartographicToCartesian(e[n],t[n]);return t};let er=new(0,F.default),en=new(0,F.default),ea=new(0,F.default);K.prototype.cartesianToCartographic=function(e,t){let r=this.scaleToGeodeticSurface(e,en);if(!(0,$.default)(r))return;let n=this.geodeticSurfaceNormal(r,er),a=F.default.subtract(e,r,ea),o=Math.atan2(n.y,n.x),i=Math.asin(n.z),u=B.default.sign(F.default.dot(a,e))*F.default.magnitude(a);return(0,$.default)(t)?(t.longitude=o,t.latitude=i,t.height=u,t):new Y(o,i,u)},K.prototype.cartesianArrayToCartographicArray=function(e,t){L.default.defined("cartesians",e);let r=e.length;(0,$.default)(t)?t.length=r:t=Array(r);for(let n=0;n<r;++n)t[n]=this.cartesianToCartographic(e[n],t[n]);return t},K.prototype.scaleToGeodeticSurface=function(e,t){return J(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},K.prototype.scaleToGeocentricSurface=function(e,t){L.default.typeOf.object("cartesian",e),(0,$.default)(t)||(t=new(0,F.default));let r=e.x,n=e.y,a=e.z,o=this._oneOverRadiiSquared,i=1/Math.sqrt(r*r*o.x+n*n*o.y+a*a*o.z);return F.default.multiplyByScalar(e,i,t)},K.prototype.transformPositionToScaledSpace=function(e,t){return(0,$.default)(t)||(t=new(0,F.default)),F.default.multiplyComponents(e,this._oneOverRadii,t)},K.prototype.transformPositionFromScaledSpace=function(e,t){return(0,$.default)(t)||(t=new(0,F.default)),F.default.multiplyComponents(e,this._radii,t)},K.prototype.equals=function(e){return this===e||(0,$.default)(e)&&F.default.equals(this._radii,e._radii)},K.prototype.toString=function(){return this._radii.toString()},K.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,t,r){if(L.default.typeOf.object("position",e),!B.default.equalsEpsilon(this._radii.x,this._radii.y,B.default.EPSILON15))throw new(0,Q.default)("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");L.default.typeOf.number.greaterThan("Ellipsoid.radii.z",this._radii.z,0),t=t??0;let n=this._squaredXOverSquaredZ;if((0,$.default)(r)||(r=new(0,F.default)),r.x=0,r.y=0,r.z=e.z*(1-n),!(Math.abs(r.z)>=this._radii.z-t))return r};let eo=new(0,F.default);K.prototype.getLocalCurvature=function(e,t){L.default.typeOf.object("surfacePosition",e),(0,$.default)(t)||(t=new(0,D.default));let r=this.getSurfaceNormalIntersectionWithZAxis(e,0,eo),n=F.default.distance(e,r),a=this.minimumRadius*n/this.maximumRadius**2;return D.default.fromElements(1/n,1/(n*a**2),t)};let ei=[.14887433898163,.43339539412925,.67940956829902,.86506336668898,.97390652851717,0],eu=[.29552422471475,.26926671930999,.21908636251598,.14945134915058,.066671344308684,0];function es(e,t,r){L.default.typeOf.number("a",e),L.default.typeOf.number("b",t),L.default.typeOf.func("func",r);let n=.5*(t+e),a=.5*(t-e),o=0;for(let e=0;e<5;e++){let t=a*ei[e];o+=eu[e]*(r(n+t)+r(n-t))}return o*a}K.prototype.surfaceArea=function(e){L.default.typeOf.object("rectangle",e);let t=e.west,r=e.east,n=e.south,a=e.north;for(;r<t;)r+=B.default.TWO_PI;let o=this._radiiSquared,i=o.x,u=o.y,s=o.z,l=i*u;return es(n,a,function(e){let n=Math.cos(e),a=Math.sin(e);return Math.cos(e)*es(t,r,function(e){let t=Math.cos(e),r=Math.sin(e);return Math.sqrt(l*a*a+s*(u*t*t+i*r*r)*n*n)})})};var B=z("AXvpI"),F=z("bXwZF"),L=z("3pzcG"),$=z("jQJji"),Q=z("1vHsR"),B=z("AXvpI");function el(e,t,r,n){this.x=e??0,this.y=t??0,this.z=r??0,this.w=n??0}el.fromElements=function(e,t,r,n,a){return(0,$.default)(a)?(a.x=e,a.y=t,a.z=r,a.w=n,a):new el(e,t,r,n)},el.fromColor=function(e,t){return(L.default.typeOf.object("color",e),(0,$.default)(t))?(t.x=e.red,t.y=e.green,t.z=e.blue,t.w=e.alpha,t):new el(e.red,e.green,e.blue,e.alpha)},el.clone=function(e,t){if((0,$.default)(e))return(0,$.default)(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new el(e.x,e.y,e.z,e.w)},el.packedLength=4,el.pack=function(e,t,r){return L.default.typeOf.object("value",e),L.default.defined("array",t),r=r??0,t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},el.unpack=function(e,t,r){return L.default.defined("array",e),t=t??0,(0,$.default)(r)||(r=new el),r.x=e[t++],r.y=e[t++],r.z=e[t++],r.w=e[t],r},el.packArray=function(e,t){L.default.defined("array",e);let r=e.length,n=4*r;if((0,$.default)(t))if(Array.isArray(t)||t.length===n)t.length!==n&&(t.length=n);else throw new(0,Q.default)("If result is a typed array, it must have exactly array.length * 4 elements");else t=Array(n);for(let n=0;n<r;++n)el.pack(e[n],t,4*n);return t},el.unpackArray=function(e,t){if(L.default.defined("array",e),L.default.typeOf.number.greaterThanOrEquals("array.length",e.length,4),e.length%4!=0)throw new(0,Q.default)("array length must be a multiple of 4.");let r=e.length;(0,$.default)(t)?t.length=r/4:t=Array(r/4);for(let n=0;n<r;n+=4){let r=n/4;t[r]=el.unpack(e,n,t[r])}return t},el.fromArray=el.unpack,el.maximumComponent=function(e){return L.default.typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z,e.w)},el.minimumComponent=function(e){return L.default.typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z,e.w)},el.minimumByComponent=function(e,t,r){return L.default.typeOf.object("first",e),L.default.typeOf.object("second",t),L.default.typeOf.object("result",r),r.x=Math.min(e.x,t.x),r.y=Math.min(e.y,t.y),r.z=Math.min(e.z,t.z),r.w=Math.min(e.w,t.w),r},el.maximumByComponent=function(e,t,r){return L.default.typeOf.object("first",e),L.default.typeOf.object("second",t),L.default.typeOf.object("result",r),r.x=Math.max(e.x,t.x),r.y=Math.max(e.y,t.y),r.z=Math.max(e.z,t.z),r.w=Math.max(e.w,t.w),r},el.clamp=function(e,t,r,n){L.default.typeOf.object("value",e),L.default.typeOf.object("min",t),L.default.typeOf.object("max",r),L.default.typeOf.object("result",n);let a=B.default.clamp(e.x,t.x,r.x),o=B.default.clamp(e.y,t.y,r.y),i=B.default.clamp(e.z,t.z,r.z),u=B.default.clamp(e.w,t.w,r.w);return n.x=a,n.y=o,n.z=i,n.w=u,n},el.magnitudeSquared=function(e){return L.default.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},el.magnitude=function(e){return Math.sqrt(el.magnitudeSquared(e))};let ef=new el;el.distance=function(e,t){return L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),el.subtract(e,t,ef),el.magnitude(ef)},el.distanceSquared=function(e,t){return L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),el.subtract(e,t,ef),el.magnitudeSquared(ef)},el.normalize=function(e,t){L.default.typeOf.object("cartesian",e),L.default.typeOf.object("result",t);let r=el.magnitude(e);if(t.x=e.x/r,t.y=e.y/r,t.z=e.z/r,t.w=e.w/r,isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||isNaN(t.w))throw new(0,Q.default)("normalized result is not a number");return t},el.dot=function(e,t){return L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},el.multiplyComponents=function(e,t,r){return L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),L.default.typeOf.object("result",r),r.x=e.x*t.x,r.y=e.y*t.y,r.z=e.z*t.z,r.w=e.w*t.w,r},el.divideComponents=function(e,t,r){return L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),L.default.typeOf.object("result",r),r.x=e.x/t.x,r.y=e.y/t.y,r.z=e.z/t.z,r.w=e.w/t.w,r},el.add=function(e,t,r){return L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),L.default.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},el.subtract=function(e,t,r){return L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),L.default.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},el.multiplyByScalar=function(e,t,r){return L.default.typeOf.object("cartesian",e),L.default.typeOf.number("scalar",t),L.default.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},el.divideByScalar=function(e,t,r){return L.default.typeOf.object("cartesian",e),L.default.typeOf.number("scalar",t),L.default.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},el.negate=function(e,t){return L.default.typeOf.object("cartesian",e),L.default.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},el.abs=function(e,t){return L.default.typeOf.object("cartesian",e),L.default.typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t.w=Math.abs(e.w),t};let ed=new el;el.lerp=function(e,t,r,n){return L.default.typeOf.object("start",e),L.default.typeOf.object("end",t),L.default.typeOf.number("t",r),L.default.typeOf.object("result",n),el.multiplyByScalar(t,r,ed),n=el.multiplyByScalar(e,1-r,n),el.add(ed,n,n)};let ec=new el;el.mostOrthogonalAxis=function(e,t){L.default.typeOf.object("cartesian",e),L.default.typeOf.object("result",t);let r=el.normalize(e,ec);return el.abs(r,r),t=r.x<=r.y?r.x<=r.z?r.x<=r.w?el.clone(el.UNIT_X,t):el.clone(el.UNIT_W,t):r.z<=r.w?el.clone(el.UNIT_Z,t):el.clone(el.UNIT_W,t):r.y<=r.z?r.y<=r.w?el.clone(el.UNIT_Y,t):el.clone(el.UNIT_W,t):r.z<=r.w?el.clone(el.UNIT_Z,t):el.clone(el.UNIT_W,t)},el.equals=function(e,t){return e===t||(0,$.default)(e)&&(0,$.default)(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},el.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]&&e.w===t[r+3]},el.equalsEpsilon=function(e,t,r,n){return e===t||(0,$.default)(e)&&(0,$.default)(t)&&B.default.equalsEpsilon(e.x,t.x,r,n)&&B.default.equalsEpsilon(e.y,t.y,r,n)&&B.default.equalsEpsilon(e.z,t.z,r,n)&&B.default.equalsEpsilon(e.w,t.w,r,n)},el.ZERO=Object.freeze(new el(0,0,0,0)),el.ONE=Object.freeze(new el(1,1,1,1)),el.UNIT_X=Object.freeze(new el(1,0,0,0)),el.UNIT_Y=Object.freeze(new el(0,1,0,0)),el.UNIT_Z=Object.freeze(new el(0,0,1,0)),el.UNIT_W=Object.freeze(new el(0,0,0,1)),el.prototype.clone=function(e){return el.clone(this,e)},el.prototype.equals=function(e){return el.equals(this,e)},el.prototype.equalsEpsilon=function(e,t,r){return el.equalsEpsilon(this,e,t,r)},el.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};let ep=new Float32Array(1),eh=new Uint8Array(ep.buffer),em=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0];el.packFloat=function(e,t){return L.default.typeOf.number("value",e),(0,$.default)(t)||(t=new el),ep[0]=e,em?(t.x=eh[0],t.y=eh[1],t.z=eh[2],t.w=eh[3]):(t.x=eh[3],t.y=eh[2],t.z=eh[1],t.w=eh[0]),t},el.unpackFloat=function(e){return L.default.typeOf.object("packedFloat",e),em?(eh[0]=e.x,eh[1]=e.y,eh[2]=e.z,eh[3]=e.w):(eh[0]=e.w,eh[1]=e.z,eh[2]=e.y,eh[3]=e.x),ep[0]};var L=z("3pzcG");let ey={};ey.EMPTY_OBJECT=Object.freeze({}),ey.EMPTY_ARRAY=Object.freeze([]);var $=z("jQJji"),Q=z("1vHsR"),B=z("AXvpI"),F=z("bXwZF"),L=z("3pzcG"),$=z("jQJji"),Q=z("1vHsR"),B=z("AXvpI");function eg(e,t,r,n,a,o,i,u,s){this[0]=e??0,this[1]=n??0,this[2]=i??0,this[3]=t??0,this[4]=a??0,this[5]=u??0,this[6]=r??0,this[7]=o??0,this[8]=s??0}eg.packedLength=9,eg.pack=function(e,t,r){return L.default.typeOf.object("value",e),L.default.defined("array",t),r=r??0,t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t},eg.unpack=function(e,t,r){return L.default.defined("array",e),t=t??0,(0,$.default)(r)||(r=new eg),r[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r},eg.packArray=function(e,t){L.default.defined("array",e);let r=e.length,n=9*r;if((0,$.default)(t))if(Array.isArray(t)||t.length===n)t.length!==n&&(t.length=n);else throw new(0,Q.default)("If result is a typed array, it must have exactly array.length * 9 elements");else t=Array(n);for(let n=0;n<r;++n)eg.pack(e[n],t,9*n);return t},eg.unpackArray=function(e,t){if(L.default.defined("array",e),L.default.typeOf.number.greaterThanOrEquals("array.length",e.length,9),e.length%9!=0)throw new(0,Q.default)("array length must be a multiple of 9.");let r=e.length;(0,$.default)(t)?t.length=r/9:t=Array(r/9);for(let n=0;n<r;n+=9){let r=n/9;t[r]=eg.unpack(e,n,t[r])}return t},eg.clone=function(e,t){if((0,$.default)(e))return(0,$.default)(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):new eg(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])},eg.fromArray=eg.unpack,eg.fromColumnMajorArray=function(e,t){return L.default.defined("values",e),eg.clone(e,t)},eg.fromRowMajorArray=function(e,t){return(L.default.defined("values",e),(0,$.default)(t))?(t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t):new eg(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},eg.fromQuaternion=function(e,t){L.default.typeOf.object("quaternion",e);let r=e.x*e.x,n=e.x*e.y,a=e.x*e.z,o=e.x*e.w,i=e.y*e.y,u=e.y*e.z,s=e.y*e.w,l=e.z*e.z,f=e.z*e.w,d=e.w*e.w,c=r-i-l+d,p=2*(n-f),h=2*(a+s),m=2*(n+f),y=-r+i-l+d,g=2*(u-o),b=2*(a-s),w=2*(u+o),O=-r-i+l+d;return(0,$.default)(t)?(t[0]=c,t[1]=m,t[2]=b,t[3]=p,t[4]=y,t[5]=w,t[6]=h,t[7]=g,t[8]=O,t):new eg(c,p,h,m,y,g,b,w,O)},eg.fromHeadingPitchRoll=function(e,t){L.default.typeOf.object("headingPitchRoll",e);let r=Math.cos(-e.pitch),n=Math.cos(-e.heading),a=Math.cos(e.roll),o=Math.sin(-e.pitch),i=Math.sin(-e.heading),u=Math.sin(e.roll),s=r*n,l=-a*i+u*o*n,f=u*i+a*o*n,d=r*i,c=a*n+u*o*i,p=-u*n+a*o*i,h=-o,m=u*r,y=a*r;return(0,$.default)(t)?(t[0]=s,t[1]=d,t[2]=h,t[3]=l,t[4]=c,t[5]=m,t[6]=f,t[7]=p,t[8]=y,t):new eg(s,l,f,d,c,p,h,m,y)},eg.fromScale=function(e,t){return(L.default.typeOf.object("scale",e),(0,$.default)(t))?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=e.y,t[5]=0,t[6]=0,t[7]=0,t[8]=e.z,t):new eg(e.x,0,0,0,e.y,0,0,0,e.z)},eg.fromUniformScale=function(e,t){return(L.default.typeOf.number("scale",e),(0,$.default)(t))?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=e,t):new eg(e,0,0,0,e,0,0,0,e)},eg.fromCrossProduct=function(e,t){return(L.default.typeOf.object("vector",e),(0,$.default)(t))?(t[0]=0,t[1]=e.z,t[2]=-e.y,t[3]=-e.z,t[4]=0,t[5]=e.x,t[6]=e.y,t[7]=-e.x,t[8]=0,t):new eg(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)},eg.fromRotationX=function(e,t){L.default.typeOf.number("angle",e);let r=Math.cos(e),n=Math.sin(e);return(0,$.default)(t)?(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=r,t[5]=n,t[6]=0,t[7]=-n,t[8]=r,t):new eg(1,0,0,0,r,-n,0,n,r)},eg.fromRotationY=function(e,t){L.default.typeOf.number("angle",e);let r=Math.cos(e),n=Math.sin(e);return(0,$.default)(t)?(t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=1,t[5]=0,t[6]=n,t[7]=0,t[8]=r,t):new eg(r,0,n,0,1,0,-n,0,r)},eg.fromRotationZ=function(e,t){L.default.typeOf.number("angle",e);let r=Math.cos(e),n=Math.sin(e);return(0,$.default)(t)?(t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new eg(r,-n,0,n,r,0,0,0,1)},eg.toArray=function(e,t){return(L.default.typeOf.object("matrix",e),(0,$.default)(t))?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},eg.getElementIndex=function(e,t){return L.default.typeOf.number.greaterThanOrEquals("row",t,0),L.default.typeOf.number.lessThanOrEquals("row",t,2),L.default.typeOf.number.greaterThanOrEquals("column",e,0),L.default.typeOf.number.lessThanOrEquals("column",e,2),3*e+t},eg.getColumn=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.number.greaterThanOrEquals("index",t,0),L.default.typeOf.number.lessThanOrEquals("index",t,2),L.default.typeOf.object("result",r);let n=3*t,a=e[n],o=e[n+1],i=e[n+2];return r.x=a,r.y=o,r.z=i,r},eg.setColumn=function(e,t,r,n){L.default.typeOf.object("matrix",e),L.default.typeOf.number.greaterThanOrEquals("index",t,0),L.default.typeOf.number.lessThanOrEquals("index",t,2),L.default.typeOf.object("cartesian",r),L.default.typeOf.object("result",n),n=eg.clone(e,n);let a=3*t;return n[a]=r.x,n[a+1]=r.y,n[a+2]=r.z,n},eg.getRow=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.number.greaterThanOrEquals("index",t,0),L.default.typeOf.number.lessThanOrEquals("index",t,2),L.default.typeOf.object("result",r);let n=e[t],a=e[t+3],o=e[t+6];return r.x=n,r.y=a,r.z=o,r},eg.setRow=function(e,t,r,n){return L.default.typeOf.object("matrix",e),L.default.typeOf.number.greaterThanOrEquals("index",t,0),L.default.typeOf.number.lessThanOrEquals("index",t,2),L.default.typeOf.object("cartesian",r),L.default.typeOf.object("result",n),(n=eg.clone(e,n))[t]=r.x,n[t+3]=r.y,n[t+6]=r.z,n};let eb=new(0,F.default);eg.setScale=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.object("scale",t),L.default.typeOf.object("result",r);let n=eg.getScale(e,eb),a=t.x/n.x,o=t.y/n.y,i=t.z/n.z;return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3]*o,r[4]=e[4]*o,r[5]=e[5]*o,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*i,r};let ew=new(0,F.default);eg.setUniformScale=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.number("scale",t),L.default.typeOf.object("result",r);let n=eg.getScale(e,ew),a=t/n.x,o=t/n.y,i=t/n.z;return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3]*o,r[4]=e[4]*o,r[5]=e[5]*o,r[6]=e[6]*i,r[7]=e[7]*i,r[8]=e[8]*i,r};let eO=new(0,F.default);eg.getScale=function(e,t){return L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t),t.x=F.default.magnitude(F.default.fromElements(e[0],e[1],e[2],eO)),t.y=F.default.magnitude(F.default.fromElements(e[3],e[4],e[5],eO)),t.z=F.default.magnitude(F.default.fromElements(e[6],e[7],e[8],eO)),t};let ev=new(0,F.default);eg.getMaximumScale=function(e){return eg.getScale(e,ev),F.default.maximumComponent(ev)};let ex=new(0,F.default);eg.setRotation=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",r);let n=eg.getScale(e,ex);return r[0]=t[0]*n.x,r[1]=t[1]*n.x,r[2]=t[2]*n.x,r[3]=t[3]*n.y,r[4]=t[4]*n.y,r[5]=t[5]*n.y,r[6]=t[6]*n.z,r[7]=t[7]*n.z,r[8]=t[8]*n.z,r};let e_=new(0,F.default);eg.getRotation=function(e,t){L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t);let r=eg.getScale(e,e_);return t[0]=e[0]/r.x,t[1]=e[1]/r.x,t[2]=e[2]/r.x,t[3]=e[3]/r.y,t[4]=e[4]/r.y,t[5]=e[5]/r.y,t[6]=e[6]/r.z,t[7]=e[7]/r.z,t[8]=e[8]/r.z,t},eg.multiply=function(e,t,r){L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),L.default.typeOf.object("result",r);let n=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],a=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],o=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],i=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],u=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],s=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],l=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],f=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],d=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];return r[0]=n,r[1]=a,r[2]=o,r[3]=i,r[4]=u,r[5]=s,r[6]=l,r[7]=f,r[8]=d,r},eg.add=function(e,t,r){return L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),L.default.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r},eg.subtract=function(e,t,r){return L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),L.default.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r},eg.multiplyByVector=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.object("cartesian",t),L.default.typeOf.object("result",r);let n=t.x,a=t.y,o=t.z,i=e[0]*n+e[3]*a+e[6]*o,u=e[1]*n+e[4]*a+e[7]*o,s=e[2]*n+e[5]*a+e[8]*o;return r.x=i,r.y=u,r.z=s,r},eg.multiplyByScalar=function(e,t,r){return L.default.typeOf.object("matrix",e),L.default.typeOf.number("scalar",t),L.default.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r},eg.multiplyByScale=function(e,t,r){return L.default.typeOf.object("matrix",e),L.default.typeOf.object("scale",t),L.default.typeOf.object("result",r),r[0]=e[0]*t.x,r[1]=e[1]*t.x,r[2]=e[2]*t.x,r[3]=e[3]*t.y,r[4]=e[4]*t.y,r[5]=e[5]*t.y,r[6]=e[6]*t.z,r[7]=e[7]*t.z,r[8]=e[8]*t.z,r},eg.multiplyByUniformScale=function(e,t,r){return L.default.typeOf.object("matrix",e),L.default.typeOf.number("scale",t),L.default.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r},eg.negate=function(e,t){return L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t},eg.transpose=function(e,t){L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t);let r=e[0],n=e[3],a=e[6],o=e[1],i=e[4],u=e[7],s=e[2],l=e[5],f=e[8];return t[0]=r,t[1]=n,t[2]=a,t[3]=o,t[4]=i,t[5]=u,t[6]=s,t[7]=l,t[8]=f,t};let eS=[1,0,0],ej=[2,2,1],eA=new eg,eE=new eg;eg.computeEigenDecomposition=function(e,t){L.default.typeOf.object("matrix",e);let r=B.default.EPSILON20,n=0,a=0;(0,$.default)(t)||(t={});let o=t.unitary=eg.clone(eg.IDENTITY,t.unitary),i=t.diagonal=eg.clone(e,t.diagonal),u=r*function(e){let t=0;for(let r=0;r<9;++r){let n=e[r];t+=n*n}return Math.sqrt(t)}(i);for(;a<10&&function(e){let t=0;for(let r=0;r<3;++r){let n=e[eg.getElementIndex(ej[r],eS[r])];t+=2*n*n}return Math.sqrt(t)}(i)>u;)!function(e,t){let r=B.default.EPSILON15,n=0,a=1;for(let t=0;t<3;++t){let r=Math.abs(e[eg.getElementIndex(ej[t],eS[t])]);r>n&&(a=t,n=r)}let o=1,i=0,u=eS[a],s=ej[a];if(Math.abs(e[eg.getElementIndex(s,u)])>r){let t,r=e[eg.getElementIndex(s,s)],n=(r-e[eg.getElementIndex(u,u)])/2/e[eg.getElementIndex(s,u)];o=1/Math.sqrt(1+(t=n<0?-1/(-n+Math.sqrt(1+n*n)):1/(n+Math.sqrt(1+n*n)))*t),i=t*o}(t=eg.clone(eg.IDENTITY,t))[eg.getElementIndex(u,u)]=t[eg.getElementIndex(s,s)]=o,t[eg.getElementIndex(s,u)]=i,t[eg.getElementIndex(u,s)]=-i}(i,eA),eg.transpose(eA,eE),eg.multiply(i,eA,i),eg.multiply(eE,i,i),eg.multiply(o,eA,o),++n>2&&(++a,n=0);return t},eg.abs=function(e,t){return L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t},eg.determinant=function(e){L.default.typeOf.object("matrix",e);let t=e[0],r=e[3],n=e[6],a=e[1],o=e[4],i=e[7],u=e[2],s=e[5],l=e[8];return t*(o*l-s*i)+a*(s*n-r*l)+u*(r*i-o*n)},eg.inverse=function(e,t){L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t);let r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],f=e[8],d=eg.determinant(e);if(Math.abs(d)<=B.default.EPSILON15)throw new(0,Q.default)("matrix is not invertible");return t[0]=i*f-l*u,t[1]=l*a-n*f,t[2]=n*u-i*a,t[3]=s*u-o*f,t[4]=r*f-s*a,t[5]=o*a-r*u,t[6]=o*l-s*i,t[7]=s*n-r*l,t[8]=r*i-o*n,eg.multiplyByScalar(t,1/d,t)};let eR=new eg;eg.inverseTranspose=function(e,t){return L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t),eg.inverse(eg.transpose(e,eR),t)},eg.equals=function(e,t){return e===t||(0,$.default)(e)&&(0,$.default)(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},eg.equalsEpsilon=function(e,t,r){return r=r??0,e===t||(0,$.default)(e)&&(0,$.default)(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r},eg.IDENTITY=Object.freeze(new eg(1,0,0,0,1,0,0,0,1)),eg.ZERO=Object.freeze(new eg(0,0,0,0,0,0,0,0,0)),eg.COLUMN0ROW0=0,eg.COLUMN0ROW1=1,eg.COLUMN0ROW2=2,eg.COLUMN1ROW0=3,eg.COLUMN1ROW1=4,eg.COLUMN1ROW2=5,eg.COLUMN2ROW0=6,eg.COLUMN2ROW1=7,eg.COLUMN2ROW2=8,Object.defineProperties(eg.prototype,{length:{get:function(){return eg.packedLength}}}),eg.prototype.clone=function(e){return eg.clone(this,e)},eg.prototype.equals=function(e){return eg.equals(this,e)},eg.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]},eg.prototype.equalsEpsilon=function(e,t){return eg.equalsEpsilon(this,e,t)},eg.prototype.toString=function(){return`(${this[0]}, ${this[3]}, ${this[6]})
(${this[1]}, ${this[4]}, ${this[7]})
(${this[2]}, ${this[5]}, ${this[8]})`};var $=z("jQJji");function eq(e){let t;this.name="RuntimeError",this.message=e;try{throw Error()}catch(e){t=e.stack}this.stack=t}function eT(e,t,r,n,a,o,i,u,s,l,f,d,c,p,h,m){this[0]=e??0,this[1]=a??0,this[2]=s??0,this[3]=c??0,this[4]=t??0,this[5]=o??0,this[6]=l??0,this[7]=p??0,this[8]=r??0,this[9]=i??0,this[10]=f??0,this[11]=h??0,this[12]=n??0,this[13]=u??0,this[14]=d??0,this[15]=m??0}(0,$.default)(Object.create)&&(eq.prototype=Object.create(Error.prototype),eq.prototype.constructor=eq),eq.prototype.toString=function(){let e=`${this.name}: ${this.message}`;return(0,$.default)(this.stack)&&(e+=`
${this.stack.toString()}`),e},eT.packedLength=16,eT.pack=function(e,t,r){return L.default.typeOf.object("value",e),L.default.defined("array",t),r=r??0,t[r++]=e[0],t[r++]=e[1],t[r++]=e[2],t[r++]=e[3],t[r++]=e[4],t[r++]=e[5],t[r++]=e[6],t[r++]=e[7],t[r++]=e[8],t[r++]=e[9],t[r++]=e[10],t[r++]=e[11],t[r++]=e[12],t[r++]=e[13],t[r++]=e[14],t[r]=e[15],t},eT.unpack=function(e,t,r){return L.default.defined("array",e),t=t??0,(0,$.default)(r)||(r=new eT),r[0]=e[t++],r[1]=e[t++],r[2]=e[t++],r[3]=e[t++],r[4]=e[t++],r[5]=e[t++],r[6]=e[t++],r[7]=e[t++],r[8]=e[t++],r[9]=e[t++],r[10]=e[t++],r[11]=e[t++],r[12]=e[t++],r[13]=e[t++],r[14]=e[t++],r[15]=e[t],r},eT.packArray=function(e,t){L.default.defined("array",e);let r=e.length,n=16*r;if((0,$.default)(t))if(Array.isArray(t)||t.length===n)t.length!==n&&(t.length=n);else throw new(0,Q.default)("If result is a typed array, it must have exactly array.length * 16 elements");else t=Array(n);for(let n=0;n<r;++n)eT.pack(e[n],t,16*n);return t},eT.unpackArray=function(e,t){if(L.default.defined("array",e),L.default.typeOf.number.greaterThanOrEquals("array.length",e.length,16),e.length%16!=0)throw new(0,Q.default)("array length must be a multiple of 16.");let r=e.length;(0,$.default)(t)?t.length=r/16:t=Array(r/16);for(let n=0;n<r;n+=16){let r=n/16;t[r]=eT.unpack(e,n,t[r])}return t},eT.clone=function(e,t){if((0,$.default)(e))return(0,$.default)(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):new eT(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},eT.fromArray=eT.unpack,eT.fromColumnMajorArray=function(e,t){return L.default.defined("values",e),eT.clone(e,t)},eT.fromRowMajorArray=function(e,t){return(L.default.defined("values",e),(0,$.default)(t))?(t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t):new eT(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},eT.fromRotationTranslation=function(e,t,r){return(L.default.typeOf.object("rotation",e),t=t??F.default.ZERO,(0,$.default)(r))?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=0,r[4]=e[3],r[5]=e[4],r[6]=e[5],r[7]=0,r[8]=e[6],r[9]=e[7],r[10]=e[8],r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,r):new eT(e[0],e[3],e[6],t.x,e[1],e[4],e[7],t.y,e[2],e[5],e[8],t.z,0,0,0,1)},eT.fromTranslationQuaternionRotationScale=function(e,t,r,n){L.default.typeOf.object("translation",e),L.default.typeOf.object("rotation",t),L.default.typeOf.object("scale",r),(0,$.default)(n)||(n=new eT);let a=r.x,o=r.y,i=r.z,u=t.x*t.x,s=t.x*t.y,l=t.x*t.z,f=t.x*t.w,d=t.y*t.y,c=t.y*t.z,p=t.y*t.w,h=t.z*t.z,m=t.z*t.w,y=t.w*t.w;return n[0]=(u-d-h+y)*a,n[1]=2*(s+m)*a,n[2]=2*(l-p)*a,n[3]=0,n[4]=2*(s-m)*o,n[5]=(-u+d-h+y)*o,n[6]=2*(c+f)*o,n[7]=0,n[8]=2*(l+p)*i,n[9]=2*(c-f)*i,n[10]=(-u-d+h+y)*i,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n},eT.fromTranslationRotationScale=function(e,t){return L.default.typeOf.object("translationRotationScale",e),eT.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)},eT.fromTranslation=function(e,t){return L.default.typeOf.object("translation",e),eT.fromRotationTranslation(eg.IDENTITY,e,t)},eT.fromScale=function(e,t){return(L.default.typeOf.object("scale",e),(0,$.default)(t))?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e.y,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e.z,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new eT(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},eT.fromUniformScale=function(e,t){return(L.default.typeOf.number("scale",e),(0,$.default)(t))?(t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t):new eT(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)},eT.fromRotation=function(e,t){return L.default.typeOf.object("rotation",e),(0,$.default)(t)||(t=new eT),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=0,t[4]=e[3],t[5]=e[4],t[6]=e[5],t[7]=0,t[8]=e[6],t[9]=e[7],t[10]=e[8],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};let ez=new(0,F.default),eC=new(0,F.default),eI=new(0,F.default);eT.fromCamera=function(e,t){L.default.typeOf.object("camera",e);let r=e.position,n=e.direction,a=e.up;L.default.typeOf.object("camera.position",r),L.default.typeOf.object("camera.direction",n),L.default.typeOf.object("camera.up",a),F.default.normalize(n,ez),F.default.normalize(F.default.cross(ez,a,eC),eC),F.default.normalize(F.default.cross(eC,ez,eI),eI);let o=eC.x,i=eC.y,u=eC.z,s=ez.x,l=ez.y,f=ez.z,d=eI.x,c=eI.y,p=eI.z,h=r.x,m=r.y,y=r.z,g=-(o*h)+-(i*m)+-(u*y),b=-(d*h)+-(c*m)+-(p*y),w=s*h+l*m+f*y;return(0,$.default)(t)?(t[0]=o,t[1]=d,t[2]=-s,t[3]=0,t[4]=i,t[5]=c,t[6]=-l,t[7]=0,t[8]=u,t[9]=p,t[10]=-f,t[11]=0,t[12]=g,t[13]=b,t[14]=w,t[15]=1,t):new eT(o,i,u,g,d,c,p,b,-s,-l,-f,w,0,0,0,1)},eT.computePerspectiveFieldOfView=function(e,t,r,n,a){L.default.typeOf.number.greaterThan("fovY",e,0),L.default.typeOf.number.lessThan("fovY",e,Math.PI),L.default.typeOf.number.greaterThan("near",r,0),L.default.typeOf.number.greaterThan("far",n,0),L.default.typeOf.object("result",a);let o=1/Math.tan(.5*e);return a[0]=o/t,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=o,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(n+r)/(r-n),a[11]=-1,a[12]=0,a[13]=0,a[14]=2*n*r/(r-n),a[15]=0,a},eT.computeOrthographicOffCenter=function(e,t,r,n,a,o,i){L.default.typeOf.number("left",e),L.default.typeOf.number("right",t),L.default.typeOf.number("bottom",r),L.default.typeOf.number("top",n),L.default.typeOf.number("near",a),L.default.typeOf.number("far",o),L.default.typeOf.object("result",i);let u=1/(t-e),s=1/(n-r),l=1/(o-a),f=-(t+e)*u,d=-(n+r)*s,c=-(o+a)*l;return u*=2,s*=2,l*=-2,i[0]=u,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=s,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=l,i[11]=0,i[12]=f,i[13]=d,i[14]=c,i[15]=1,i},eT.computePerspectiveOffCenter=function(e,t,r,n,a,o,i){return L.default.typeOf.number("left",e),L.default.typeOf.number("right",t),L.default.typeOf.number("bottom",r),L.default.typeOf.number("top",n),L.default.typeOf.number("near",a),L.default.typeOf.number("far",o),L.default.typeOf.object("result",i),i[0]=2*a/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*a/(n-r),i[6]=0,i[7]=0,i[8]=(t+e)/(t-e),i[9]=(n+r)/(n-r),i[10]=-(o+a)/(o-a),i[11]=-1,i[12]=0,i[13]=0,i[14]=-2*o*a/(o-a),i[15]=0,i},eT.computeInfinitePerspectiveOffCenter=function(e,t,r,n,a,o){return L.default.typeOf.number("left",e),L.default.typeOf.number("right",t),L.default.typeOf.number("bottom",r),L.default.typeOf.number("top",n),L.default.typeOf.number("near",a),L.default.typeOf.object("result",o),o[0]=2*a/(t-e),o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*a/(n-r),o[6]=0,o[7]=0,o[8]=(t+e)/(t-e),o[9]=(n+r)/(n-r),o[10]=-1,o[11]=-1,o[12]=0,o[13]=0,o[14]=-2*a,o[15]=0,o},eT.computeViewportTransformation=function(e,t,r,n){(0,$.default)(n)||(n=new eT);let a=(e=e??ey.EMPTY_OBJECT).x??0,o=e.y??0,i=e.width??0,u=e.height??0,s=.5*i,l=.5*u,f=((r=r??1)-(t=t??0))*.5,d=a+s,c=o+l,p=t+f;return n[0]=s,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=f,n[11]=0,n[12]=d,n[13]=c,n[14]=p,n[15]=1,n},eT.computeView=function(e,t,r,n,a){return L.default.typeOf.object("position",e),L.default.typeOf.object("direction",t),L.default.typeOf.object("up",r),L.default.typeOf.object("right",n),L.default.typeOf.object("result",a),a[0]=n.x,a[1]=r.x,a[2]=-t.x,a[3]=0,a[4]=n.y,a[5]=r.y,a[6]=-t.y,a[7]=0,a[8]=n.z,a[9]=r.z,a[10]=-t.z,a[11]=0,a[12]=-F.default.dot(n,e),a[13]=-F.default.dot(r,e),a[14]=F.default.dot(t,e),a[15]=1,a},eT.toArray=function(e,t){return(L.default.typeOf.object("matrix",e),(0,$.default)(t))?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},eT.getElementIndex=function(e,t){return L.default.typeOf.number.greaterThanOrEquals("row",t,0),L.default.typeOf.number.lessThanOrEquals("row",t,3),L.default.typeOf.number.greaterThanOrEquals("column",e,0),L.default.typeOf.number.lessThanOrEquals("column",e,3),4*e+t},eT.getColumn=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.number.greaterThanOrEquals("index",t,0),L.default.typeOf.number.lessThanOrEquals("index",t,3),L.default.typeOf.object("result",r);let n=4*t,a=e[n],o=e[n+1],i=e[n+2],u=e[n+3];return r.x=a,r.y=o,r.z=i,r.w=u,r},eT.setColumn=function(e,t,r,n){L.default.typeOf.object("matrix",e),L.default.typeOf.number.greaterThanOrEquals("index",t,0),L.default.typeOf.number.lessThanOrEquals("index",t,3),L.default.typeOf.object("cartesian",r),L.default.typeOf.object("result",n),n=eT.clone(e,n);let a=4*t;return n[a]=r.x,n[a+1]=r.y,n[a+2]=r.z,n[a+3]=r.w,n},eT.getRow=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.number.greaterThanOrEquals("index",t,0),L.default.typeOf.number.lessThanOrEquals("index",t,3),L.default.typeOf.object("result",r);let n=e[t],a=e[t+4],o=e[t+8],i=e[t+12];return r.x=n,r.y=a,r.z=o,r.w=i,r},eT.setRow=function(e,t,r,n){return L.default.typeOf.object("matrix",e),L.default.typeOf.number.greaterThanOrEquals("index",t,0),L.default.typeOf.number.lessThanOrEquals("index",t,3),L.default.typeOf.object("cartesian",r),L.default.typeOf.object("result",n),(n=eT.clone(e,n))[t]=r.x,n[t+4]=r.y,n[t+8]=r.z,n[t+12]=r.w,n},eT.setTranslation=function(e,t,r){return L.default.typeOf.object("matrix",e),L.default.typeOf.object("translation",t),L.default.typeOf.object("result",r),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=e[15],r};let eP=new(0,F.default);eT.setScale=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.object("scale",t),L.default.typeOf.object("result",r);let n=eT.getScale(e,eP),a=t.x/n.x,o=t.y/n.y,i=t.z/n.z;return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3],r[4]=e[4]*o,r[5]=e[5]*o,r[6]=e[6]*o,r[7]=e[7],r[8]=e[8]*i,r[9]=e[9]*i,r[10]=e[10]*i,r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r};let eM=new(0,F.default);eT.setUniformScale=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.number("scale",t),L.default.typeOf.object("result",r);let n=eT.getScale(e,eM),a=t/n.x,o=t/n.y,i=t/n.z;return r[0]=e[0]*a,r[1]=e[1]*a,r[2]=e[2]*a,r[3]=e[3],r[4]=e[4]*o,r[5]=e[5]*o,r[6]=e[6]*o,r[7]=e[7],r[8]=e[8]*i,r[9]=e[9]*i,r[10]=e[10]*i,r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r};let eU=new(0,F.default);eT.getScale=function(e,t){return L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t),t.x=F.default.magnitude(F.default.fromElements(e[0],e[1],e[2],eU)),t.y=F.default.magnitude(F.default.fromElements(e[4],e[5],e[6],eU)),t.z=F.default.magnitude(F.default.fromElements(e[8],e[9],e[10],eU)),t};let ek=new(0,F.default);eT.getMaximumScale=function(e){return eT.getScale(e,ek),F.default.maximumComponent(ek)};let eN=new(0,F.default);eT.setRotation=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",r);let n=eT.getScale(e,eN);return r[0]=t[0]*n.x,r[1]=t[1]*n.x,r[2]=t[2]*n.x,r[3]=e[3],r[4]=t[3]*n.y,r[5]=t[4]*n.y,r[6]=t[5]*n.y,r[7]=e[7],r[8]=t[6]*n.z,r[9]=t[7]*n.z,r[10]=t[8]*n.z,r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r};let eD=new(0,F.default);eT.getRotation=function(e,t){L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t);let r=eT.getScale(e,eD);return t[0]=e[0]/r.x,t[1]=e[1]/r.x,t[2]=e[2]/r.x,t[3]=e[4]/r.y,t[4]=e[5]/r.y,t[5]=e[6]/r.y,t[6]=e[8]/r.z,t[7]=e[9]/r.z,t[8]=e[10]/r.z,t},eT.multiply=function(e,t,r){L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),L.default.typeOf.object("result",r);let n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],f=e[7],d=e[8],c=e[9],p=e[10],h=e[11],m=e[12],y=e[13],g=e[14],b=e[15],w=t[0],O=t[1],v=t[2],x=t[3],_=t[4],S=t[5],j=t[6],A=t[7],E=t[8],R=t[9],q=t[10],T=t[11],z=t[12],C=t[13],I=t[14],P=t[15];return r[0]=n*w+u*O+d*v+m*x,r[1]=a*w+s*O+c*v+y*x,r[2]=o*w+l*O+p*v+g*x,r[3]=i*w+f*O+h*v+b*x,r[4]=n*_+u*S+d*j+m*A,r[5]=a*_+s*S+c*j+y*A,r[6]=o*_+l*S+p*j+g*A,r[7]=i*_+f*S+h*j+b*A,r[8]=n*E+u*R+d*q+m*T,r[9]=a*E+s*R+c*q+y*T,r[10]=o*E+l*R+p*q+g*T,r[11]=i*E+f*R+h*q+b*T,r[12]=n*z+u*C+d*I+m*P,r[13]=a*z+s*C+c*I+y*P,r[14]=o*z+l*C+p*I+g*P,r[15]=i*z+f*C+h*I+b*P,r},eT.add=function(e,t,r){return L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),L.default.typeOf.object("result",r),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r[4]=e[4]+t[4],r[5]=e[5]+t[5],r[6]=e[6]+t[6],r[7]=e[7]+t[7],r[8]=e[8]+t[8],r[9]=e[9]+t[9],r[10]=e[10]+t[10],r[11]=e[11]+t[11],r[12]=e[12]+t[12],r[13]=e[13]+t[13],r[14]=e[14]+t[14],r[15]=e[15]+t[15],r},eT.subtract=function(e,t,r){return L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),L.default.typeOf.object("result",r),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r[4]=e[4]-t[4],r[5]=e[5]-t[5],r[6]=e[6]-t[6],r[7]=e[7]-t[7],r[8]=e[8]-t[8],r[9]=e[9]-t[9],r[10]=e[10]-t[10],r[11]=e[11]-t[11],r[12]=e[12]-t[12],r[13]=e[13]-t[13],r[14]=e[14]-t[14],r[15]=e[15]-t[15],r},eT.multiplyTransformation=function(e,t,r){L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),L.default.typeOf.object("result",r);let n=e[0],a=e[1],o=e[2],i=e[4],u=e[5],s=e[6],l=e[8],f=e[9],d=e[10],c=e[12],p=e[13],h=e[14],m=t[0],y=t[1],g=t[2],b=t[4],w=t[5],O=t[6],v=t[8],x=t[9],_=t[10],S=t[12],j=t[13],A=t[14];return r[0]=n*m+i*y+l*g,r[1]=a*m+u*y+f*g,r[2]=o*m+s*y+d*g,r[3]=0,r[4]=n*b+i*w+l*O,r[5]=a*b+u*w+f*O,r[6]=o*b+s*w+d*O,r[7]=0,r[8]=n*v+i*x+l*_,r[9]=a*v+u*x+f*_,r[10]=o*v+s*x+d*_,r[11]=0,r[12]=n*S+i*j+l*A+c,r[13]=a*S+u*j+f*A+p,r[14]=o*S+s*j+d*A+h,r[15]=1,r},eT.multiplyByMatrix3=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.object("rotation",t),L.default.typeOf.object("result",r);let n=e[0],a=e[1],o=e[2],i=e[4],u=e[5],s=e[6],l=e[8],f=e[9],d=e[10],c=t[0],p=t[1],h=t[2],m=t[3],y=t[4],g=t[5],b=t[6],w=t[7],O=t[8];return r[0]=n*c+i*p+l*h,r[1]=a*c+u*p+f*h,r[2]=o*c+s*p+d*h,r[3]=0,r[4]=n*m+i*y+l*g,r[5]=a*m+u*y+f*g,r[6]=o*m+s*y+d*g,r[7]=0,r[8]=n*b+i*w+l*O,r[9]=a*b+u*w+f*O,r[10]=o*b+s*w+d*O,r[11]=0,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},eT.multiplyByTranslation=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.object("translation",t),L.default.typeOf.object("result",r);let n=t.x,a=t.y,o=t.z,i=n*e[0]+a*e[4]+o*e[8]+e[12],u=n*e[1]+a*e[5]+o*e[9]+e[13],s=n*e[2]+a*e[6]+o*e[10]+e[14];return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=i,r[13]=u,r[14]=s,r[15]=e[15],r},eT.multiplyByScale=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.object("scale",t),L.default.typeOf.object("result",r);let n=t.x,a=t.y,o=t.z;return 1===n&&1===a&&1===o?eT.clone(e,r):(r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=e[3],r[4]=a*e[4],r[5]=a*e[5],r[6]=a*e[6],r[7]=e[7],r[8]=o*e[8],r[9]=o*e[9],r[10]=o*e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r)},eT.multiplyByUniformScale=function(e,t,r){return L.default.typeOf.object("matrix",e),L.default.typeOf.number("scale",t),L.default.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3],r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7],r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},eT.multiplyByVector=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.object("cartesian",t),L.default.typeOf.object("result",r);let n=t.x,a=t.y,o=t.z,i=t.w,u=e[0]*n+e[4]*a+e[8]*o+e[12]*i,s=e[1]*n+e[5]*a+e[9]*o+e[13]*i,l=e[2]*n+e[6]*a+e[10]*o+e[14]*i,f=e[3]*n+e[7]*a+e[11]*o+e[15]*i;return r.x=u,r.y=s,r.z=l,r.w=f,r},eT.multiplyByPointAsVector=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.object("cartesian",t),L.default.typeOf.object("result",r);let n=t.x,a=t.y,o=t.z,i=e[0]*n+e[4]*a+e[8]*o,u=e[1]*n+e[5]*a+e[9]*o,s=e[2]*n+e[6]*a+e[10]*o;return r.x=i,r.y=u,r.z=s,r},eT.multiplyByPoint=function(e,t,r){L.default.typeOf.object("matrix",e),L.default.typeOf.object("cartesian",t),L.default.typeOf.object("result",r);let n=t.x,a=t.y,o=t.z,i=e[0]*n+e[4]*a+e[8]*o+e[12],u=e[1]*n+e[5]*a+e[9]*o+e[13],s=e[2]*n+e[6]*a+e[10]*o+e[14];return r.x=i,r.y=u,r.z=s,r},eT.multiplyByScalar=function(e,t,r){return L.default.typeOf.object("matrix",e),L.default.typeOf.number("scalar",t),L.default.typeOf.object("result",r),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*t,r[9]=e[9]*t,r[10]=e[10]*t,r[11]=e[11]*t,r[12]=e[12]*t,r[13]=e[13]*t,r[14]=e[14]*t,r[15]=e[15]*t,r},eT.negate=function(e,t){return L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},eT.transpose=function(e,t){L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t);let r=e[1],n=e[2],a=e[3],o=e[6],i=e[7],u=e[11];return t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[10]=e[10],t[11]=e[14],t[12]=a,t[13]=i,t[14]=u,t[15]=e[15],t},eT.abs=function(e,t){return L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t[4]=Math.abs(e[4]),t[5]=Math.abs(e[5]),t[6]=Math.abs(e[6]),t[7]=Math.abs(e[7]),t[8]=Math.abs(e[8]),t[9]=Math.abs(e[9]),t[10]=Math.abs(e[10]),t[11]=Math.abs(e[11]),t[12]=Math.abs(e[12]),t[13]=Math.abs(e[13]),t[14]=Math.abs(e[14]),t[15]=Math.abs(e[15]),t},eT.equals=function(e,t){return e===t||(0,$.default)(e)&&(0,$.default)(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]},eT.equalsEpsilon=function(e,t,r){return r=r??0,e===t||(0,$.default)(e)&&(0,$.default)(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r&&Math.abs(e[9]-t[9])<=r&&Math.abs(e[10]-t[10])<=r&&Math.abs(e[11]-t[11])<=r&&Math.abs(e[12]-t[12])<=r&&Math.abs(e[13]-t[13])<=r&&Math.abs(e[14]-t[14])<=r&&Math.abs(e[15]-t[15])<=r},eT.getTranslation=function(e,t){return L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t),t.x=e[12],t.y=e[13],t.z=e[14],t},eT.getMatrix3=function(e,t){return L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t};let eF=new eg,eL=new eg,e$=new el,eB=new el(0,0,0,1);eT.inverse=function(e,t){L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t);let r=e[0],n=e[4],a=e[8],o=e[12],i=e[1],u=e[5],s=e[9],l=e[13],f=e[2],d=e[6],c=e[10],p=e[14],h=e[3],m=e[7],y=e[11],g=e[15],b=c*g,w=p*y,O=d*g,v=p*m,x=d*y,_=c*m,S=f*g,j=p*h,A=f*y,E=c*h,R=f*m,q=d*h,T=b*u+v*s+x*l-(w*u+O*s+_*l),z=w*i+S*s+E*l-(b*i+j*s+A*l),C=O*i+j*u+R*l-(v*i+S*u+q*l),I=_*i+A*u+q*s-(x*i+E*u+R*s),P=w*n+O*a+_*o-(b*n+v*a+x*o),M=b*r+j*a+A*o-(w*r+S*a+E*o),U=v*r+S*n+q*o-(O*r+j*n+R*o),k=x*r+E*n+R*a-(_*r+A*n+q*a);b=a*l,w=o*s,O=n*l,v=o*u,x=n*s,_=a*u,S=r*l,j=o*i,A=r*s;let N=b*m+v*y+x*g-(w*m+O*y+_*g),D=w*h+S*y+(E=a*i)*g-(b*h+j*y+A*g),F=O*h+j*m+(R=r*u)*g-(v*h+S*m+(q=n*i)*g),$=_*h+A*m+q*y-(x*h+E*m+R*y),Q=O*c+_*p+w*d-(x*p+b*d+v*c),W=A*p+b*f+j*c-(S*c+E*p+w*f),H=S*d+q*p+v*f-(R*p+O*f+j*d),J=R*c+x*f+E*d-(A*d+q*c+_*f),Y=r*T+n*z+a*C+o*I;if(Math.abs(Y)<B.default.EPSILON21){if(eg.equalsEpsilon(eT.getMatrix3(e,eF),eL,B.default.EPSILON7)&&el.equals(eT.getRow(e,3,e$),eB))return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=1,t;throw new eq("matrix is not invertible because its determinate is zero.")}return Y=1/Y,t[0]=T*Y,t[1]=z*Y,t[2]=C*Y,t[3]=I*Y,t[4]=P*Y,t[5]=M*Y,t[6]=U*Y,t[7]=k*Y,t[8]=N*Y,t[9]=D*Y,t[10]=F*Y,t[11]=$*Y,t[12]=Q*Y,t[13]=W*Y,t[14]=H*Y,t[15]=J*Y,t},eT.inverseTransformation=function(e,t){L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t);let r=e[0],n=e[1],a=e[2],o=e[4],i=e[5],u=e[6],s=e[8],l=e[9],f=e[10],d=e[12],c=e[13],p=e[14],h=-r*d-n*c-a*p,m=-o*d-i*c-u*p,y=-s*d-l*c-f*p;return t[0]=r,t[1]=o,t[2]=s,t[3]=0,t[4]=n,t[5]=i,t[6]=l,t[7]=0,t[8]=a,t[9]=u,t[10]=f,t[11]=0,t[12]=h,t[13]=m,t[14]=y,t[15]=1,t};let eQ=new eT;eT.inverseTranspose=function(e,t){return L.default.typeOf.object("matrix",e),L.default.typeOf.object("result",t),eT.inverse(eT.transpose(e,eQ),t)},eT.IDENTITY=Object.freeze(new eT(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)),eT.ZERO=Object.freeze(new eT(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)),eT.COLUMN0ROW0=0,eT.COLUMN0ROW1=1,eT.COLUMN0ROW2=2,eT.COLUMN0ROW3=3,eT.COLUMN1ROW0=4,eT.COLUMN1ROW1=5,eT.COLUMN1ROW2=6,eT.COLUMN1ROW3=7,eT.COLUMN2ROW0=8,eT.COLUMN2ROW1=9,eT.COLUMN2ROW2=10,eT.COLUMN2ROW3=11,eT.COLUMN3ROW0=12,eT.COLUMN3ROW1=13,eT.COLUMN3ROW2=14,eT.COLUMN3ROW3=15,Object.defineProperties(eT.prototype,{length:{get:function(){return eT.packedLength}}}),eT.prototype.clone=function(e){return eT.clone(this,e)},eT.prototype.equals=function(e){return eT.equals(this,e)},eT.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]&&e[9]===t[r+9]&&e[10]===t[r+10]&&e[11]===t[r+11]&&e[12]===t[r+12]&&e[13]===t[r+13]&&e[14]===t[r+14]&&e[15]===t[r+15]},eT.prototype.equalsEpsilon=function(e,t){return eT.equalsEpsilon(this,e,t)},eT.prototype.toString=function(){return`(${this[0]}, ${this[4]}, ${this[8]}, ${this[12]})
(${this[1]}, ${this[5]}, ${this[9]}, ${this[13]})
(${this[2]}, ${this[6]}, ${this[10]}, ${this[14]})
(${this[3]}, ${this[7]}, ${this[11]}, ${this[15]})`};var eW=z("9btZb"),D=z("kWQjc"),F=z("bXwZF"),L=z("3pzcG"),$=z("jQJji"),Q=z("1vHsR"),L=z("3pzcG"),eH=function(e,t,r){let n,a;L.default.defined("array",e),L.default.defined("itemToFind",t),L.default.defined("comparator",r);let o=0,i=e.length-1;for(;o<=i;){if((a=r(e[n=~~((o+i)/2)],t))<0){o=n+1;continue}if(a>0){i=n-1;continue}return n}return~(i+1)},L=z("3pzcG"),$=z("jQJji"),eJ=function(e,t,r,n,a){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=r,this.yPoleOffset=n,this.ut1MinusUtc=a},$=z("jQJji"),Q=z("1vHsR"),L=z("3pzcG"),Q=(z("1vHsR"),z("1vHsR")),eY=function(e){if(null===e||isNaN(e))throw new(0,Q.default)("year is required and must be a number.");return e%4==0&&e%100!=0||e%400==0};let eV=[31,28,31,30,31,30,31,31,30,31,30,31];var eZ=function(e,t,r,n,a,o,i,u){e=e??1,t=t??1,r=r??1,n=n??0,a=a??0,o=o??0,i=i??0,u=u??!1,L.default.typeOf.number.greaterThanOrEquals("Year",e,1),L.default.typeOf.number.lessThanOrEquals("Year",e,9999),L.default.typeOf.number.greaterThanOrEquals("Month",t,1),L.default.typeOf.number.lessThanOrEquals("Month",t,12),L.default.typeOf.number.greaterThanOrEquals("Day",r,1),L.default.typeOf.number.lessThanOrEquals("Day",r,31),L.default.typeOf.number.greaterThanOrEquals("Hour",n,0),L.default.typeOf.number.lessThanOrEquals("Hour",n,23),L.default.typeOf.number.greaterThanOrEquals("Minute",a,0),L.default.typeOf.number.lessThanOrEquals("Minute",a,59),L.default.typeOf.bool("IsLeapSecond",u),L.default.typeOf.number.greaterThanOrEquals("Second",o,0),L.default.typeOf.number.lessThanOrEquals("Second",o,u?60:59),L.default.typeOf.number.greaterThanOrEquals("Millisecond",i,0),L.default.typeOf.number.lessThan("Millisecond",i,1e3),function(){let n=2===t&&eY(e)?eV[t-1]+1:eV[t-1];if(r>n)throw new(0,Q.default)("Month and Day represents invalid date")}(),this.year=e,this.month=t,this.day=r,this.hour=n,this.minute=a,this.second=o,this.millisecond=i,this.isLeapSecond=u},eX=function(e,t){this.julianDate=e,this.offset=t},eG=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),eK=Object.freeze({UTC:0,TAI:1});let e0=new eZ,e1=[31,28,31,30,31,30,31,31,30,31,30,31];function e2(e,t){return ts.compare(e.julianDate,t.julianDate)}let e3=new eX;function e4(e){e3.julianDate=e;let t=ts.leapSeconds,r=eH(t,e3,e2);r<0&&(r=~r),r>=t.length&&(r=t.length-1);let n=t[r].offset;r>0&&ts.secondsDifference(t[r].julianDate,e)>n&&(n=t[--r].offset),ts.addSeconds(e,n,e)}function e5(e,t){e3.julianDate=e;let r=ts.leapSeconds,n=eH(r,e3,e2);if(n<0&&(n=~n),0===n)return ts.addSeconds(e,-r[0].offset,t);if(n>=r.length)return ts.addSeconds(e,-r[n-1].offset,t);let a=ts.secondsDifference(r[n].julianDate,e);return 0===a?ts.addSeconds(e,-r[n].offset,t):a<=1?void 0:ts.addSeconds(e,-r[--n].offset,t)}function e6(e,t,r){let n=t/eG.SECONDS_PER_DAY|0;return e+=n,(t-=eG.SECONDS_PER_DAY*n)<0&&(e--,t+=eG.SECONDS_PER_DAY),r.dayNumber=e,r.secondsOfDay=t,r}function e8(e,t,r,n,a,o,i){let u=(t-14)/12|0,s=e+4800+u,l=(1461*s/4|0)+(367*(t-2-12*u)/12|0)-(3*((s+100)/100|0)/4|0)+r-32075;(n-=12)<0&&(n+=24);let f=o+(n*eG.SECONDS_PER_HOUR+a*eG.SECONDS_PER_MINUTE+i*eG.SECONDS_PER_MILLISECOND);return f>=43200&&(l-=1),[l,f]}let e7=/^(\d{4})$/,e9=/^(\d{4})-(\d{2})$/,te=/^(\d{4})-?(\d{3})$/,tt=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,tr=/^(\d{4})-?(\d{2})-?(\d{2})$/,tn=/([Z+\-])?(\d{2})?:?(\d{2})?$/,ta=/^(\d{2})(\.\d+)?/.source+tn.source,to=/^(\d{2}):?(\d{2})(\.\d+)?/.source+tn.source,ti=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+tn.source,tu="Invalid ISO 8601 date.";function ts(e,t,r){this.dayNumber=void 0,this.secondsOfDay=void 0,e=e??0,t=t??0,r=r??eK.UTC;let n=0|e;t+=(e-n)*eG.SECONDS_PER_DAY,e6(n,t,this),r===eK.UTC&&e4(this)}ts.fromGregorianDate=function(e,t){if(!(e instanceof eZ))throw new(0,Q.default)("date must be a valid GregorianDate.");let r=e8(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return(0,$.default)(t)?(e6(r[0],r[1],t),e4(t),t):new ts(r[0],r[1],eK.UTC)},ts.fromDate=function(e,t){if(!(e instanceof Date)||isNaN(e.getTime()))throw new(0,Q.default)("date must be a valid JavaScript Date.");let r=e8(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return(0,$.default)(t)?(e6(r[0],r[1],t),e4(t),t):new ts(r[0],r[1],eK.UTC)},ts.fromIso8601=function(e,t){let r,n,a,o,i;if("string"!=typeof e)throw new(0,Q.default)(tu);let u=(e=e.replace(",",".")).split("T"),s=1,l=1,f=0,d=0,c=0,p=0,h=u[0],m=u[1];if(!(0,$.default)(h))throw new(0,Q.default)(tu);if(null!==(u=h.match(tr))){if((o=h.split("-").length-1)>0&&2!==o)throw new(0,Q.default)(tu);r=+u[1],s=+u[2],l=+u[3]}else if(null!==(u=h.match(e9)))r=+u[1],s=+u[2];else if(null!==(u=h.match(e7)))r=+u[1];else{let e;if(null!==(u=h.match(te))){if(r=+u[1],e=+u[2],a=eY(r),e<1||a&&e>366||!a&&e>365)throw new(0,Q.default)(tu)}else if(null!==(u=h.match(tt))){r=+u[1];let t=+u[2],n=+u[3]||0;if((o=h.split("-").length-1)>0&&(!(0,$.default)(u[3])&&1!==o||(0,$.default)(u[3])&&2!==o))throw new(0,Q.default)(tu);e=7*t+n-new Date(Date.UTC(r,0,4)).getUTCDay()-3}else throw new(0,Q.default)(tu);(n=new Date(Date.UTC(r,0,1))).setUTCDate(e),s=n.getUTCMonth()+1,l=n.getUTCDate()}if(a=eY(r),s<1||s>12||l<1||(2!==s||!a)&&l>e1[s-1]||a&&2===s&&l>29)throw new(0,Q.default)(tu);if((0,$.default)(m)){if(null!==(u=m.match(ti))){if((o=m.split(":").length-1)>0&&2!==o&&3!==o)throw new(0,Q.default)(tu);f=+u[1],d=+u[2],c=+u[3],p=1e3*(u[4]||0),i=5}else if(null!==(u=m.match(to))){if((o=m.split(":").length-1)>2)throw new(0,Q.default)(tu);f=+u[1],d=+u[2],c=60*(u[3]||0),i=4}else if(null!==(u=m.match(ta)))f=+u[1],d=60*(u[2]||0),i=3;else throw new(0,Q.default)(tu);if(d>=60||c>=61||f>24||24===f&&(d>0||c>0||p>0))throw new(0,Q.default)(tu);let e=u[i],t=+u[i+1],n=+(u[i+2]||0);switch(e){case"+":f-=t,d-=n;break;case"-":f+=t,d+=n;break;case"Z":break;default:d+=new Date(Date.UTC(r,s-1,l,f,d)).getTimezoneOffset()}}let y=60===c;for(y&&c--;d>=60;)d-=60,f++;for(;f>=24;)f-=24,l++;for(n=a&&2===s?29:e1[s-1];l>n;)l-=n,++s>12&&(s-=12,r++),n=a&&2===s?29:e1[s-1];for(;d<0;)d+=60,f--;for(;f<0;)f+=24,l--;for(;l<1;)--s<1&&(s+=12,r--),l+=n=a&&2===s?29:e1[s-1];let g=e8(r,s,l,f,d,c,p);return(0,$.default)(t)?(e6(g[0],g[1],t),e4(t)):t=new ts(g[0],g[1],eK.UTC),y&&ts.addSeconds(t,1,t),t},ts.now=function(e){return ts.fromDate(new Date,e)};let tl=new ts(0,0,eK.TAI);ts.toGregorianDate=function(e,t){if(!(0,$.default)(e))throw new(0,Q.default)("julianDate is required.");let r=!1,n=e5(e,tl);(0,$.default)(n)||(ts.addSeconds(e,-1,tl),n=e5(tl,tl),r=!0);let a=n.dayNumber,o=n.secondsOfDay;o>=43200&&(a+=1);let i=a+68569|0,u=4*i/146097|0,s=4e3*((i=i-((146097*u+3)/4|0)|0)+1)/1461001|0,l=80*(i=i-(1461*s/4|0)+31|0)/2447|0,f=i-(2447*l/80|0)|0;i=l/11|0;let d=l+2-12*i|0,c=100*(u-49)+s+i|0,p=o/eG.SECONDS_PER_HOUR|0,h=o-p*eG.SECONDS_PER_HOUR,m=h/eG.SECONDS_PER_MINUTE|0,y=0|(h-=m*eG.SECONDS_PER_MINUTE),g=(h-y)/eG.SECONDS_PER_MILLISECOND;return((p+=12)>23&&(p-=24),r&&(y+=1),(0,$.default)(t))?(t.year=c,t.month=d,t.day=f,t.hour=p,t.minute=m,t.second=y,t.millisecond=g,t.isLeapSecond=r,t):new eZ(c,d,f,p,m,y,g,r)},ts.toDate=function(e){if(!(0,$.default)(e))throw new(0,Q.default)("julianDate is required.");let t=ts.toGregorianDate(e,e0),r=t.second;return t.isLeapSecond&&(r-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,r,t.millisecond))},ts.toIso8601=function(e,t){let r;if(!(0,$.default)(e))throw new(0,Q.default)("julianDate is required.");let n=ts.toGregorianDate(e,e0),a=n.year,o=n.month,i=n.day,u=n.hour,s=n.minute,l=n.second,f=n.millisecond;if(1e4===a&&1===o&&1===i&&0===u&&0===s&&0===l&&0===f&&(a=9999,o=12,i=31,u=24),!(0,$.default)(t)&&0!==f){let e=.01*f;return r=e<1e-6?e.toFixed(20).replace(".","").replace(/0+$/,""):e.toString().replace(".",""),`${a.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}T${u.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}.${r}Z`}return(0,$.default)(t)&&0!==t?(r=(.01*f).toFixed(t).replace(".","").slice(0,t),`${a.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}T${u.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}.${r}Z`):`${a.toString().padStart(4,"0")}-${o.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}T${u.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}Z`},ts.clone=function(e,t){if((0,$.default)(e))return(0,$.default)(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new ts(e.dayNumber,e.secondsOfDay,eK.TAI)},ts.compare=function(e,t){if(!(0,$.default)(e))throw new(0,Q.default)("left is required.");if(!(0,$.default)(t))throw new(0,Q.default)("right is required.");let r=e.dayNumber-t.dayNumber;return 0!==r?r:e.secondsOfDay-t.secondsOfDay},ts.equals=function(e,t){return e===t||(0,$.default)(e)&&(0,$.default)(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},ts.equalsEpsilon=function(e,t,r){return r=r??0,e===t||(0,$.default)(e)&&(0,$.default)(t)&&Math.abs(ts.secondsDifference(e,t))<=r},ts.totalDays=function(e){if(!(0,$.default)(e))throw new(0,Q.default)("julianDate is required.");return e.dayNumber+e.secondsOfDay/eG.SECONDS_PER_DAY},ts.secondsDifference=function(e,t){if(!(0,$.default)(e))throw new(0,Q.default)("left is required.");if(!(0,$.default)(t))throw new(0,Q.default)("right is required.");return(e.dayNumber-t.dayNumber)*eG.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},ts.daysDifference=function(e,t){if(!(0,$.default)(e))throw new(0,Q.default)("left is required.");if(!(0,$.default)(t))throw new(0,Q.default)("right is required.");return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/eG.SECONDS_PER_DAY},ts.computeTaiMinusUtc=function(e){e3.julianDate=e;let t=ts.leapSeconds,r=eH(t,e3,e2);return r<0&&(r=~r,--r<0&&(r=0)),t[r].offset},ts.addSeconds=function(e,t,r){if(!(0,$.default)(e))throw new(0,Q.default)("julianDate is required.");if(!(0,$.default)(t))throw new(0,Q.default)("seconds is required.");if(!(0,$.default)(r))throw new(0,Q.default)("result is required.");return e6(e.dayNumber,e.secondsOfDay+t,r)},ts.addMinutes=function(e,t,r){if(!(0,$.default)(e))throw new(0,Q.default)("julianDate is required.");if(!(0,$.default)(t))throw new(0,Q.default)("minutes is required.");if(!(0,$.default)(r))throw new(0,Q.default)("result is required.");let n=e.secondsOfDay+t*eG.SECONDS_PER_MINUTE;return e6(e.dayNumber,n,r)},ts.addHours=function(e,t,r){if(!(0,$.default)(e))throw new(0,Q.default)("julianDate is required.");if(!(0,$.default)(t))throw new(0,Q.default)("hours is required.");if(!(0,$.default)(r))throw new(0,Q.default)("result is required.");let n=e.secondsOfDay+t*eG.SECONDS_PER_HOUR;return e6(e.dayNumber,n,r)},ts.addDays=function(e,t,r){if(!(0,$.default)(e))throw new(0,Q.default)("julianDate is required.");if(!(0,$.default)(t))throw new(0,Q.default)("days is required.");if(!(0,$.default)(r))throw new(0,Q.default)("result is required.");return e6(e.dayNumber+t,e.secondsOfDay,r)},ts.lessThan=function(e,t){return 0>ts.compare(e,t)},ts.lessThanOrEquals=function(e,t){return 0>=ts.compare(e,t)},ts.greaterThan=function(e,t){return ts.compare(e,t)>0},ts.greaterThanOrEquals=function(e,t){return ts.compare(e,t)>=0},ts.prototype.clone=function(e){return ts.clone(this,e)},ts.prototype.equals=function(e){return ts.equals(this,e)},ts.prototype.equalsEpsilon=function(e,t){return ts.equalsEpsilon(this,e,t)},ts.prototype.toString=function(){return ts.toIso8601(this)},ts.leapSeconds=[new eX(new ts(2441317,43210,eK.TAI),10),new eX(new ts(2441499,43211,eK.TAI),11),new eX(new ts(2441683,43212,eK.TAI),12),new eX(new ts(2442048,43213,eK.TAI),13),new eX(new ts(2442413,43214,eK.TAI),14),new eX(new ts(2442778,43215,eK.TAI),15),new eX(new ts(2443144,43216,eK.TAI),16),new eX(new ts(2443509,43217,eK.TAI),17),new eX(new ts(2443874,43218,eK.TAI),18),new eX(new ts(2444239,43219,eK.TAI),19),new eX(new ts(2444786,43220,eK.TAI),20),new eX(new ts(2445151,43221,eK.TAI),21),new eX(new ts(2445516,43222,eK.TAI),22),new eX(new ts(2446247,43223,eK.TAI),23),new eX(new ts(2447161,43224,eK.TAI),24),new eX(new ts(2447892,43225,eK.TAI),25),new eX(new ts(2448257,43226,eK.TAI),26),new eX(new ts(2448804,43227,eK.TAI),27),new eX(new ts(2449169,43228,eK.TAI),28),new eX(new ts(2449534,43229,eK.TAI),29),new eX(new ts(2450083,43230,eK.TAI),30),new eX(new ts(2450630,43231,eK.TAI),31),new eX(new ts(2451179,43232,eK.TAI),32),new eX(new ts(2453736,43233,eK.TAI),33),new eX(new ts(2454832,43234,eK.TAI),34),new eX(new ts(2456109,43235,eK.TAI),35),new eX(new ts(2457204,43236,eK.TAI),36),new eX(new ts(2457754,43237,eK.TAI),37)];var tf={};j=tf,A=function(e,t,r,n){var a,o=n&&n.URI;function i(e,t){var r=arguments.length>=1,n=arguments.length>=2;if(!(this instanceof i))return r?n?new i(e,t):new i(e):new i;if(void 0===e){if(r)throw TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}if(null===e&&r)throw TypeError("null is not a valid argument for URI");return(this.href(e),void 0!==t)?this.absoluteTo(t):this}i.version="1.19.11";var u=i.prototype,s=Object.prototype.hasOwnProperty;function l(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function f(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function d(e){return"Array"===f(e)}function c(e,t){var r,n,a={};if("RegExp"===f(t))a=null;else if(d(t))for(r=0,n=t.length;r<n;r++)a[t[r]]=!0;else a[t]=!0;for(r=0,n=e.length;r<n;r++)(a&&void 0!==a[e[r]]||!a&&t.test(e[r]))&&(e.splice(r,1),n--,r--);return e}function p(e,t){if(d(t)){for(r=0,n=t.length;r<n;r++)if(!p(e,t[r]))return!1;return!0}var r,n,a=f(t);for(r=0,n=e.length;r<n;r++)if("RegExp"===a){if("string"==typeof e[r]&&e[r].match(t))return!0}else if(e[r]===t)return!0;return!1}function h(e,t){if(!d(e)||!d(t)||e.length!==t.length)return!1;e.sort(),t.sort();for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function m(e){return e.replace(/^\/+|\/+$/g,"")}function y(e){return escape(e)}function g(e){return encodeURIComponent(e).replace(/[!'()*]/g,y).replace(/\*/g,"%2A")}i._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:i.preventInvalidHostname,duplicateQueryParameters:i.duplicateQueryParameters,escapeQuerySpace:i.escapeQuerySpace}},i.preventInvalidHostname=!1,i.duplicateQueryParameters=!1,i.escapeQuerySpace=!0,i.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,i.idn_expression=/[^a-z0-9\._-]/i,i.punycode_expression=/(xn--)/i,i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig,i.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},i.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,i.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},i.hostProtocols=["http","https"],i.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,i.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},i.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return i.domAttributes[t]}},i.encode=g,i.decode=decodeURIComponent,i.iso8859=function(){i.encode=escape,i.decode=unescape},i.unicode=function(){i.encode=g,i.decode=decodeURIComponent},i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},i.encodeQuery=function(e,t){var r=i.encode(e+"");return void 0===t&&(t=i.escapeQuerySpace),t?r.replace(/%20/g,"+"):r},i.decodeQuery=function(e,t){e+="",void 0===t&&(t=i.escapeQuerySpace);try{return i.decode(t?e.replace(/\+/g,"%20"):e)}catch(t){return e}};var b={encode:"encode",decode:"decode"},w=function(e,t){return function(r){try{return i[t](r+"").replace(i.characters[e][t].expression,function(r){return i.characters[e][t].map[r]})}catch(e){return r}}};for(a in b)i[a+"PathSegment"]=w("pathname",b[a]),i[a+"UrnPathSegment"]=w("urnpath",b[a]);var O=function(e,t,r){return function(n){for(var a=r?function(e){return i[t](i[r](e))}:i[t],o=(n+"").split(e),u=0,s=o.length;u<s;u++)o[u]=a(o[u]);return o.join(e)}};function v(e){return function(t,r){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!r),this)}}function x(e,t){return function(r,n){return void 0===r?this._parts[e]||"":(null!==r&&(r+="").charAt(0)===t&&(r=r.substring(1)),this._parts[e]=r,this.build(!n),this)}}i.decodePath=O("/","decodePathSegment"),i.decodeUrnPath=O(":","decodeUrnPathSegment"),i.recodePath=O("/","encodePathSegment","decode"),i.recodeUrnPath=O(":","encodeUrnPathSegment","decode"),i.encodeReserved=w("reserved","encode"),i.parse=function(e,t){var r;return t||(t={preventInvalidHostname:i.preventInvalidHostname}),(r=(e=(e=e.replace(i.leading_whitespace_expression,"")).replace(i.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(t.fragment=e.substring(r+1)||null,e=e.substring(0,r)),(r=e.indexOf("?"))>-1&&(t.query=e.substring(r+1)||null,e=e.substring(0,r)),"//"===(e=(e=e.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(t.protocol=null,e=e.substring(2),e=i.parseAuthority(e,t)):(r=e.indexOf(":"))>-1&&(t.protocol=e.substring(0,r)||null,t.protocol&&!t.protocol.match(i.protocol_expression)?t.protocol=void 0:"//"===e.substring(r+1,r+3).replace(/\\/g,"/")?(e=e.substring(r+3),e=i.parseAuthority(e,t)):(e=e.substring(r+1),t.urn=!0)),t.path=e,t},i.parseHost=function(e,t){e||(e="");var r,n,a=(e=e.replace(/\\/g,"/")).indexOf("/");if(-1===a&&(a=e.length),"["===e.charAt(0))r=e.indexOf("]"),t.hostname=e.substring(1,r)||null,t.port=e.substring(r+2,a)||null,"/"===t.port&&(t.port=null);else{var o=e.indexOf(":"),u=e.indexOf("/"),s=e.indexOf(":",o+1);-1!==s&&(-1===u||s<u)?(t.hostname=e.substring(0,a)||null,t.port=null):(t.hostname=(n=e.substring(0,a).split(":"))[0]||null,t.port=n[1]||null)}return t.hostname&&"/"!==e.substring(a).charAt(0)&&(a++,e="/"+e),t.preventInvalidHostname&&i.ensureValidHostname(t.hostname,t.protocol),t.port&&i.ensureValidPort(t.port),e.substring(a)||"/"},i.parseAuthority=function(e,t){return e=i.parseUserinfo(e,t),i.parseHost(e,t)},i.parseUserinfo=function(e,t){var r,n=e;-1!==e.indexOf("\\")&&(e=e.replace(/\\/g,"/"));var a=e.indexOf("/"),o=e.lastIndexOf("@",a>-1?a:e.length-1);return o>-1&&(-1===a||o<a)?(t.username=(r=e.substring(0,o).split(":"))[0]?i.decode(r[0]):null,r.shift(),t.password=r[0]?i.decode(r.join(":")):null,e=n.substring(o+1)):(t.username=null,t.password=null),e},i.parseQuery=function(e,t){if(!e||!(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var r,n,a,o={},u=e.split("&"),l=u.length,f=0;f<l;f++)r=u[f].split("="),n=i.decodeQuery(r.shift(),t),a=r.length?i.decodeQuery(r.join("="),t):null,"__proto__"!==n&&(s.call(o,n)?(("string"==typeof o[n]||null===o[n])&&(o[n]=[o[n]]),o[n].push(a)):o[n]=a);return o},i.build=function(e){var t="",r=!1;return e.protocol&&(t+=e.protocol+":"),!e.urn&&(t||e.hostname)&&(t+="//",r=!0),t+=i.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&r&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},i.buildHost=function(e){var t="";return e.hostname?(i.ip6_expression.test(e.hostname)?t+="["+e.hostname+"]":t+=e.hostname,e.port&&(t+=":"+e.port),t):""},i.buildAuthority=function(e){return i.buildUserinfo(e)+i.buildHost(e)},i.buildUserinfo=function(e){var t="";return e.username&&(t+=i.encode(e.username)),e.password&&(t+=":"+i.encode(e.password)),t&&(t+="@"),t},i.buildQuery=function(e,t,r){var n,a,o,u,l="";for(a in e)if("__proto__"===a)continue;else if(s.call(e,a))if(d(e[a]))for(o=0,n={},u=e[a].length;o<u;o++)void 0!==e[a][o]&&void 0===n[e[a][o]+""]&&(l+="&"+i.buildQueryParameter(a,e[a][o],r),!0!==t&&(n[e[a][o]+""]=!0));else void 0!==e[a]&&(l+="&"+i.buildQueryParameter(a,e[a],r));return l.substring(1)},i.buildQueryParameter=function(e,t,r){return i.encodeQuery(e,r)+(null!==t?"="+i.encodeQuery(t,r):"")},i.addQuery=function(e,t,r){if("object"==typeof t)for(var n in t)s.call(t,n)&&i.addQuery(e,n,t[n]);else if("string"==typeof t){if(void 0===e[t]){e[t]=r;return}"string"==typeof e[t]&&(e[t]=[e[t]]),d(r)||(r=[r]),e[t]=(e[t]||[]).concat(r)}else throw TypeError("URI.addQuery() accepts an object, string as the name parameter")},i.setQuery=function(e,t,r){if("object"==typeof t)for(var n in t)s.call(t,n)&&i.setQuery(e,n,t[n]);else if("string"==typeof t)e[t]=void 0===r?null:r;else throw TypeError("URI.setQuery() accepts an object, string as the name parameter")},i.removeQuery=function(e,t,r){var n,a,o;if(d(t))for(n=0,a=t.length;n<a;n++)e[t[n]]=void 0;else if("RegExp"===f(t))for(o in e)t.test(o)&&(e[o]=void 0);else if("object"==typeof t)for(o in t)s.call(t,o)&&i.removeQuery(e,o,t[o]);else if("string"==typeof t)void 0!==r?"RegExp"===f(r)?!d(e[t])&&r.test(e[t])?e[t]=void 0:e[t]=c(e[t],r):e[t]!==String(r)||d(r)&&1!==r.length?d(e[t])&&(e[t]=c(e[t],r)):e[t]=void 0:e[t]=void 0;else throw TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},i.hasQuery=function(e,t,r,n){switch(f(t)){case"String":break;case"RegExp":for(var a in e)if(s.call(e,a)&&t.test(a)&&(void 0===r||i.hasQuery(e,a,r)))return!0;return!1;case"Object":for(var o in t)if(s.call(t,o)&&!i.hasQuery(e,o,t[o]))return!1;return!0;default:throw TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(f(r)){case"Undefined":return t in e;case"Boolean":return!!(d(e[t])?e[t].length:e[t])===r;case"Function":return!!r(e[t],t,e);case"Array":if(!d(e[t]))return!1;return(n?p:h)(e[t],r);case"RegExp":if(!d(e[t]))return!!(e[t]&&e[t].match(r));if(!n)return!1;return p(e[t],r);case"Number":r=String(r);case"String":if(!d(e[t]))return e[t]===r;if(!n)return!1;return p(e[t],r);default:throw TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},i.joinPaths=function(){for(var e=[],t=[],r=0,n=0;n<arguments.length;n++){var a=new i(arguments[n]);e.push(a);for(var o=a.segment(),u=0;u<o.length;u++)"string"==typeof o[u]&&t.push(o[u]),o[u]&&r++}if(!t.length||!r)return new i("");var s=new i("").segment(t);return(""===e[0].path()||"/"===e[0].path().slice(0,1))&&s.path("/"+s.path()),s.normalize()},i.commonPath=function(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r)){r--;break}return r<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":(("/"!==e.charAt(r)||"/"!==t.charAt(r))&&(r=e.substring(0,r).lastIndexOf("/")),e.substring(0,r+1))},i.withinString=function(e,t,r){r||(r={});var n=r.start||i.findUri.start,a=r.end||i.findUri.end,o=r.trim||i.findUri.trim,u=r.parens||i.findUri.parens,s=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var l=n.exec(e);if(!l)break;var f=l.index;if(r.ignoreHtml){var d=e.slice(Math.max(f-3,0),f);if(d&&s.test(d))continue}for(var c=f+e.slice(f).search(a),p=e.slice(f,c),h=-1;;){var m=u.exec(p);if(!m)break;h=Math.max(h,m.index+m[0].length)}if(!((p=h>-1?p.slice(0,h)+p.slice(h).replace(o,""):p.replace(o,"")).length<=l[0].length||r.ignore&&r.ignore.test(p))){c=f+p.length;var y=t(p,f,c,e);if(void 0===y){n.lastIndex=c;continue}y=String(y),e=e.slice(0,f)+y+e.slice(c),n.lastIndex=f+y.length}}return n.lastIndex=0,e},i.ensureValidHostname=function(t,r){var n=!!t,a=!1;if(r&&(a=p(i.hostProtocols,r)),a&&!n)throw TypeError("Hostname cannot be empty, if protocol is "+r);if(t&&t.match(i.invalid_hostname_characters)){if(!e)throw TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(t).match(i.invalid_hostname_characters))throw TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_]')}},i.ensureValidPort=function(e){if(e){var t=Number(e);if(!/^[0-9]+$/.test(t)||!(t>0)||!(t<65536))throw TypeError('Port "'+e+'" is not a valid port')}},i.noConflict=function(e){if(e){var t={URI:this.noConflict()};return n.URITemplate&&"function"==typeof n.URITemplate.noConflict&&(t.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"==typeof n.IPv6.noConflict&&(t.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"==typeof n.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=n.SecondLevelDomains.noConflict()),t}return n.URI===this&&(n.URI=o),this},u.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=i.build(this._parts),this._deferred_build=!1),this},u.clone=function(){return new i(this)},u.valueOf=u.toString=function(){return this.build(!1)._string},u.protocol=v("protocol"),u.username=v("username"),u.password=v("password"),u.hostname=v("hostname"),u.port=v("port"),u.query=x("query","?"),u.fragment=x("fragment","#"),u.search=function(e,t){var r=this.query(e,t);return"string"==typeof r&&r.length?"?"+r:r},u.hash=function(e,t){var r=this.fragment(e,t);return"string"==typeof r&&r.length?"#"+r:r},u.pathname=function(e,t){if(void 0!==e&&!0!==e)return this._parts.urn?this._parts.path=e?i.recodeUrnPath(e):"":this._parts.path=e?i.recodePath(e):"/",this.build(!t),this;var r=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?i.decodeUrnPath:i.decodePath)(r):r},u.path=u.pathname,u.href=function(e,t){if(void 0===e)return this.toString();this._string="",this._parts=i._parts();var r,n=e instanceof i,a="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName){var o=i.getDomAttribute(e);e=e[o]||"",a=!1}if(!n&&a&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=i.parse(String(e),this._parts);else if(n||a){var u=n?e._parts:e;for(r in u)"query"!==r&&s.call(this._parts,r)&&(this._parts[r]=u[r]);u.query&&this.query(u.query,!1)}else throw TypeError("invalid input");return this.build(!t),this},u.is=function(e){var t=!1,n=!1,a=!1,o=!1,u=!1,s=!1,l=!1,f=!this._parts.urn;switch(this._parts.hostname&&(f=!1,n=i.ip4_expression.test(this._parts.hostname),a=i.ip6_expression.test(this._parts.hostname),u=(o=!(t=n||a))&&r&&r.has(this._parts.hostname),s=o&&i.idn_expression.test(this._parts.hostname),l=o&&i.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return f;case"absolute":return!f;case"domain":case"name":return o;case"sld":return u;case"ip":return t;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return a;case"idn":return s;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return l}return null};var _=u.protocol,S=u.port,j=u.hostname;u.protocol=function(e,t){if(e&&!(e=e.replace(/:(\/\/)?$/,"")).match(i.protocol_expression))throw TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return _.call(this,e,t)},u.scheme=u.protocol,u.port=function(e,t){return this._parts.urn?void 0===e?"":this:(void 0!==e&&(0===e&&(e=null),e&&(":"===(e+="").charAt(0)&&(e=e.substring(1)),i.ensureValidPort(e))),S.call(this,e,t))},u.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var r={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==i.parseHost(e,r))throw TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=r.hostname,this._parts.preventInvalidHostname&&i.ensureValidHostname(e,this._parts.protocol)}return j.call(this,e,t)},u.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var r=this.protocol();return this.authority()?(r?r+"://":"")+this.authority():""}var n=i(e);return this.protocol(n.protocol()).authority(n.authority()).build(!t),this},u.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?i.buildHost(this._parts):"";if("/"!==i.parseHost(e,this._parts))throw TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},u.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?i.buildAuthority(this._parts):"";if("/"!==i.parseAuthority(e,this._parts))throw TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},u.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e)return"@"!==e[e.length-1]&&(e+="@"),i.parseUserinfo(e,this._parts),this.build(!t),this;var r=i.buildUserinfo(this._parts);return r?r.substring(0,r.length-1):r},u.resource=function(e,t){var r;return void 0===e?this.path()+this.search()+this.hash():(r=i.parse(e),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!t),this)},u.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var n=this._parts.hostname.length-this.domain().length,a=RegExp("^"+l(this._parts.hostname.substring(0,n)));if(e&&"."!==e.charAt(e.length-1)&&(e+="."),-1!==e.indexOf(":"))throw TypeError("Domains cannot contain colons");return e&&i.ensureValidHostname(e,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(a,e),this.build(!t),this},u.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var n=this._parts.hostname.length-this.tld(t).length-1;return n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||""}if(!e)throw TypeError("cannot set domain empty");if(-1!==e.indexOf(":"))throw TypeError("Domains cannot contain colons");if(i.ensureValidHostname(e,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var a=RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},u.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n,a=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(a+1);return!0!==t&&r&&r.list[o.toLowerCase()]&&r.get(this._parts.hostname)||o}if(e)if(e.match(/[^a-zA-Z0-9-]/))if(r&&r.is(e))n=RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(n,e);else throw TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');else if(!this._parts.hostname||this.is("IP"))throw ReferenceError("cannot set TLD on non-domain host");else n=RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(n,e);else throw TypeError("cannot set TLD empty");return this.build(!t),this},u.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return e?i.decodePath(n):n}var a=this._parts.path.length-this.filename().length,o=RegExp("^"+l(this._parts.path.substring(0,a)));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=i.recodePath(e),this._parts.path=this._parts.path.replace(o,e),this.build(!t),this},u.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("string"!=typeof e){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(r+1);return e?i.decodePathSegment(n):n}var a=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(a=!0);var o=RegExp(l(this.filename())+"$");return e=i.recodePath(e),this._parts.path=this._parts.path.replace(o,e),a?this.normalizePath(t):this.build(!t),this},u.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var r,n,a=this.filename(),o=a.lastIndexOf(".");return -1===o?"":(r=a.substring(o+1),n=/^[a-z0-9%]+$/i.test(r)?r:"",e?i.decodePathSegment(n):n)}"."===e.charAt(0)&&(e=e.substring(1));var u,s=this.suffix();if(s)u=e?RegExp(l(s)+"$"):RegExp(l("."+s)+"$");else{if(!e)return this;this._parts.path+="."+i.recodePath(e)}return u&&(e=i.recodePath(e),this._parts.path=this._parts.path.replace(u,e)),this.build(!t),this},u.segment=function(e,t,r){var n=this._parts.urn?":":"/",a=this.path(),o="/"===a.substring(0,1),i=a.split(n);if(void 0!==e&&"number"!=typeof e&&(r=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw Error('Bad segment "'+e+'", must be 0-based integer');if(o&&i.shift(),e<0&&(e=Math.max(i.length+e,0)),void 0===t)return void 0===e?i:i[e];if(null===e||void 0===i[e])if(d(t)){i=[];for(var u=0,s=t.length;u<s;u++)(t[u].length||i.length&&i[i.length-1].length)&&(i.length&&!i[i.length-1].length&&i.pop(),i.push(m(t[u])))}else(t||"string"==typeof t)&&(t=m(t),""===i[i.length-1]?i[i.length-1]=t:i.push(t));else t?i[e]=m(t):i.splice(e,1);return o&&i.unshift(""),this.path(i.join(n),r)},u.segmentCoded=function(e,t,r){var n,a,o;if("number"!=typeof e&&(r=t,t=e,e=void 0),void 0===t){if(d(n=this.segment(e,t,r)))for(a=0,o=n.length;a<o;a++)n[a]=i.decode(n[a]);else n=void 0!==n?i.decode(n):void 0;return n}if(d(t))for(a=0,o=t.length;a<o;a++)t[a]=i.encode(t[a]);else t="string"==typeof t||t instanceof String?i.encode(t):t;return this.segment(e,t,r)};var A=u.query;return u.query=function(e,t){if(!0===e)return i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=e.call(this,r);return this._parts.query=i.buildQuery(n||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=i.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):A.call(this,e,t)},u.setQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)n[e]=void 0!==t?t:null;else if("object"==typeof e)for(var a in e)s.call(e,a)&&(n[a]=e[a]);else throw TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},u.addQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.addQuery(n,e,void 0===t?null:t),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},u.removeQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.removeQuery(n,e,t),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},u.hasQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.hasQuery(n,e,t,r)},u.setSearch=u.setQuery,u.addSearch=u.addQuery,u.removeSearch=u.removeQuery,u.hasSearch=u.hasQuery,u.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},u.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},u.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},u.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===i.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},u.normalizePath=function(e){var t,r,n,a=this._parts.path;if(!a)return this;if(this._parts.urn)return this._parts.path=i.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;a=i.recodePath(a);var o="";for("/"!==a.charAt(0)&&(t=!0,a="/"+a),("/.."===a.slice(-3)||"/."===a.slice(-2))&&(a+="/"),a=a.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(o=a.substring(1).match(/^(\.\.\/)+/)||"")&&(o=o[0]);-1!==(r=a.search(/\/\.\.(\/|$)/));){if(0===r){a=a.substring(3);continue}-1===(n=a.substring(0,r).lastIndexOf("/"))&&(n=r),a=a.substring(0,n)+a.substring(r+3)}return t&&this.is("relative")&&(a=o+a.substring(1)),this._parts.path=a,this.build(!e),this},u.normalizePathname=u.normalizePath,u.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(i.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},u.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},u.normalizeSearch=u.normalizeQuery,u.normalizeHash=u.normalizeFragment,u.iso8859=function(){var e=i.encode,t=i.decode;i.encode=escape,i.decode=decodeURIComponent;try{this.normalize()}finally{i.encode=e,i.decode=t}return this},u.unicode=function(){var e=i.encode,t=i.decode;i.encode=g,i.decode=unescape;try{this.normalize()}finally{i.encode=e,i.decode=t}return this},u.readable=function(){var t=this.clone();t.username("").password("").normalize();var r="";if(t._parts.protocol&&(r+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(r+=e.toUnicode(t._parts.hostname),t._parts.port&&(r+=":"+t._parts.port)):r+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(r+="/"),r+=t.path(!0),t._parts.query){for(var n="",a=0,o=t._parts.query.split("&"),u=o.length;a<u;a++){var s=(o[a]||"").split("=");n+="&"+i.decodeQuery(s[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==s[1]&&(n+="="+i.decodeQuery(s[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+i.decodeQuery(t.hash(),!0)},u.absoluteTo=function(e){var t,r,n,a=this.clone(),o=["protocol","username","password","hostname","port"];if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(e instanceof i||(e=new i(e)),a._parts.protocol)return a;if(a._parts.protocol=e._parts.protocol,this._parts.hostname)return a;for(r=0;n=o[r];r++)a._parts[n]=e._parts[n];return a._parts.path?(".."===a._parts.path.substring(-2)&&(a._parts.path+="/"),"/"!==a.path().charAt(0)&&(t=(t=e.directory())||(0===e.path().indexOf("/")?"/":""),a._parts.path=(t?t+"/":"")+a._parts.path,a.normalizePath())):(a._parts.path=e._parts.path,a._parts.query||(a._parts.query=e._parts.query)),a.build(),a},u.relativeTo=function(e){var t,r,n,a,o,u=this.clone().normalize();if(u._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(e=new i(e).normalize(),t=u._parts,r=e._parts,a=u.path(),o=e.path(),"/"!==a.charAt(0))throw Error("URI is already relative");if("/"!==o.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");return t.protocol===r.protocol&&(t.protocol=null),t.username!==r.username||t.password!==r.password||null!==t.protocol||null!==t.username||null!==t.password||t.hostname!==r.hostname||t.port!==r.port||((t.hostname=null,t.port=null,a===o)?t.path="":(n=i.commonPath(a,o))&&(t.path=r.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../")+t.path.substring(n.length)||"./")),u.build()},u.equals=function(e){var t,r,n,a=this.clone(),o=new i(e),u={},l={},f={};if(a.normalize(),o.normalize(),a.toString()===o.toString())return!0;if(t=a.query(),r=o.query(),a.query(""),o.query(""),a.toString()!==o.toString()||t.length!==r.length)return!1;for(n in u=i.parseQuery(t,this._parts.escapeQuerySpace),l=i.parseQuery(r,this._parts.escapeQuerySpace),u)if(s.call(u,n)){if(d(u[n])){if(!h(u[n],l[n]))return!1}else if(u[n]!==l[n])return!1;f[n]=!0}for(n in l)if(s.call(l,n)&&!f[n])return!1;return!0},u.preventInvalidHostname=function(e){return this._parts.preventInvalidHostname=!!e,this},u.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},u.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},i},tf?tf=A(z("3hCk4"),z("2Nl4L"),z("3PMOQ")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],A):j.URI=A(j.punycode,j.IPv6,j.SecondLevelDomains,j);var L=z("3pzcG"),td=function e(t,r){if(null===t||"object"!=typeof t)return t;r=r??!1;let n=new t.constructor;for(let a in t)if(t.hasOwnProperty(a)){let o=t[a];r&&(o=e(o,r)),n[a]=o}return n},$=z("jQJji"),tc=function e(t,r,n){let a,o,i;n=n??!1;let u={},s=(0,$.default)(t),l=(0,$.default)(r);if(s)for(a in t)t.hasOwnProperty(a)&&(o=t[a],l&&n&&"object"==typeof o&&r.hasOwnProperty(a)&&"object"==typeof(i=r[a])?u[a]=e(o,i,n):u[a]=o);if(l)for(a in r)r.hasOwnProperty(a)&&!u.hasOwnProperty(a)&&(i=r[a],u[a]=i);return u},tp=function(){let e,t,r=new Promise(function(r,n){e=r,t=n});return{resolve:e,reject:t,promise:r}},$=z("jQJji"),Q=z("1vHsR"),$=z("jQJji"),Q=z("1vHsR");function th(e,t){let r;return"undefined"!=typeof document&&(r=document),th._implementation(e,t,r)}th._implementation=function(e,t,r){if(!(0,$.default)(e))throw new(0,Q.default)("relative uri is required.");if(!(0,$.default)(t)){if(void 0===r)return e;t=r.baseURI??r.location.href}let n=new(R(tf))(e);return""!==n.scheme()?n.toString():n.absoluteTo(t).toString()};var $=z("jQJji"),Q=z("1vHsR"),tm=function(e,t){if(!(0,$.default)(e))throw new(0,Q.default)("uri is required.");let r="",n=e.lastIndexOf("/");return -1!==n&&(r=e.substring(0,n+1)),t&&(0!==(e=new(R(tf))(e)).query().length&&(r+=`?${e.query()}`),0!==e.fragment().length&&(r+=`#${e.fragment()}`)),r},$=z("jQJji"),Q=z("1vHsR"),ty=function(e){if(!(0,$.default)(e))throw new(0,Q.default)("uri is required.");let t=new(R(tf))(e);t.normalize();let r=t.path(),n=r.lastIndexOf("/");return -1!==n&&(r=r.substr(n+1)),r=-1===(n=r.lastIndexOf("."))?"":r.substr(n+1)},$=z("jQJji");let tg={};var tb=function(e,t,r){(0,$.default)(t)||(t=e.width),(0,$.default)(r)||(r=e.height);let n=tg[t];(0,$.default)(n)||(n={},tg[t]=n);let a=n[r];if(!(0,$.default)(a)){let e=document.createElement("canvas");e.width=t,e.height=r,(a=e.getContext("2d",{willReadFrequently:!0})).globalCompositeOperation="copy",n[r]=a}return a.drawImage(e,0,0,t,r),a.getImageData(0,0,t,r).data},L=z("3pzcG");let tw=/^blob:/i;var tO=function(e){return L.default.typeOf.string("uri",e),tw.test(e)},$=z("jQJji"),tv=function(t){(0,$.default)(e)||(e=document.createElement("a")),e.href=window.location.href;let r=e.host,n=e.protocol;return e.href=t,e.href=e.href,n!==e.protocol||r!==e.host},L=z("3pzcG");let tx=/^data:/i;var t_=function(e){return L.default.typeOf.string("uri",e),tx.test(e)},tS=function(e){let t=document.createElement("script");return t.async=!0,t.src=e,new Promise((e,r)=>{window.crossOriginIsolated&&t.setAttribute("crossorigin","anonymous");let n=document.getElementsByTagName("head")[0];t.onload=function(){t.onload=void 0,n.removeChild(t),e()},t.onerror=function(e){r(e)},n.appendChild(t)})},B=z("AXvpI"),$=z("jQJji"),Q=z("1vHsR"),tj=function(e){if(!(0,$.default)(e))throw new(0,Q.default)("obj is required.");let t="";for(let r in e)if(e.hasOwnProperty(r)){let n=e[r],a=`${encodeURIComponent(r)}=`;if(Array.isArray(n))for(let e=0,r=n.length;e<r;++e)t+=`${a+encodeURIComponent(n[e])}&`;else t+=`${a+encodeURIComponent(n)}&`}return t.slice(0,-1)},$=z("jQJji"),Q=z("1vHsR"),tA=function(e){if(!(0,$.default)(e))throw new(0,Q.default)("queryString is required.");let t={};if(""===e)return t;let r=e.replace(/\+/g,"%20").split(/[&;]/);for(let e=0,n=r.length;e<n;++e){let n=r[e].split("="),a=decodeURIComponent(n[0]),o=n[1];o=(0,$.default)(o)?decodeURIComponent(o):"";let i=t[a];"string"==typeof i?t[a]=[i,o]:Array.isArray(i)?i.push(o):t[a]=o}return t},$=z("jQJji"),tE=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),tR=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function tq(e){let t=(e=e??ey.EMPTY_OBJECT).throttleByServer??!1,r=e.throttle??!1;this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=e.priority??0,this.throttle=r,this.throttleByServer=t,this.type=e.type??tR.OTHER,this.serverKey=e.serverKey,this.state=tE.UNISSUED,this.deferred=void 0,this.cancelled=!1}tq.prototype.cancel=function(){this.cancelled=!0},tq.prototype.clone=function(e){return(0,$.default)(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=tE.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new tq(this)};var $=z("jQJji"),tT=function(e){let t={};if(!e)return t;let r=e.split("\r\n");for(let e=0;e<r.length;++e){let n=r[e],a=n.indexOf(": ");if(a>0){let e=n.substring(0,a),r=n.substring(a+2);t[e]=r}}return t};function tz(e,t,r){this.statusCode=e,this.response=t,this.responseHeaders=r,"string"==typeof this.responseHeaders&&(this.responseHeaders=tT(this.responseHeaders))}tz.prototype.toString=function(){let e="Request has failed.";return(0,$.default)(this.statusCode)&&(e+=` Status Code: ${this.statusCode}`),e};var L=z("3pzcG"),$=z("jQJji"),L=z("3pzcG"),$=z("jQJji");function tC(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function tI(e,t){return t-e}Object.defineProperties(tC.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),tC.prototype.addEventListener=function(e,t){L.default.typeOf.func("listener",e),this._listeners.push(e),this._scopes.push(t);let r=this;return function(){r.removeEventListener(e,t)}},tC.prototype.removeEventListener=function(e,t){L.default.typeOf.func("listener",e);let r=this._listeners,n=this._scopes,a=-1;for(let o=0;o<r.length;o++)if(r[o]===e&&n[o]===t){a=o;break}return -1!==a&&(this._insideRaiseEvent?(this._toRemove.push(a),r[a]=void 0,n[a]=void 0):(r.splice(a,1),n.splice(a,1)),!0)},tC.prototype.raiseEvent=function(){let e;this._insideRaiseEvent=!0;let t=this._listeners,r=this._scopes,n=t.length;for(e=0;e<n;e++){let n=t[e];(0,$.default)(n)&&t[e].apply(r[e],arguments)}let a=this._toRemove;if((n=a.length)>0){for(a.sort(tI),e=0;e<n;e++){let n=a[e];t.splice(n,1),r.splice(n,1)}a.length=0}this._insideRaiseEvent=!1};var L=z("3pzcG"),$=z("jQJji");function tP(e){L.default.typeOf.object("options",e),L.default.defined("options.comparator",e.comparator),this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function tM(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}Object.defineProperties(tP.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){L.default.typeOf.number.greaterThanOrEquals("maximumLength",e,0);let t=this._length;if(e<t){let r=this._array;for(let n=e;n<t;++n)r[n]=void 0;this._length=e,r.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}}),tP.prototype.reserve=function(e){e=e??this._length,this._array.length=e},tP.prototype.heapify=function(e){e=e??0;let t=this._length,r=this._comparator,n=this._array,a=-1,o=!0;for(;o;){let i=2*(e+1),u=i-1;a=u<t&&0>r(n[u],n[e])?u:e,i<t&&0>r(n[i],n[a])&&(a=i),a!==e?(tM(n,a,e),e=a):o=!1}},tP.prototype.resort=function(){let e=this._length;for(let t=Math.ceil(e/2);t>=0;--t)this.heapify(t)},tP.prototype.insert=function(e){let t;L.default.defined("element",e);let r=this._array,n=this._comparator,a=this._maximumLength,o=this._length++;for(o<r.length?r[o]=e:r.push(e);0!==o;){let e=Math.floor((o-1)/2);if(0>n(r[o],r[e]))tM(r,o,e),o=e;else break}return(0,$.default)(a)&&this._length>a&&(t=r[a],this._length=a),t},tP.prototype.pop=function(e){if(e=e??0,0===this._length)return;L.default.typeOf.number.lessThan("index",e,this._length);let t=this._array,r=t[e];return tM(t,e,--this._length),this.heapify(e),t[this._length]=void 0,r};let tU={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},tk=20,tN=new tP({comparator:function(e,t){return e.priority-t.priority}});tN.maximumLength=tk,tN.reserve(tk);let tD=[],tF={},tL="undefined"!=typeof document?new(R(tf))(document.location.href):new(R(tf)),t$=new tC;function tB(){}function tQ(e){(0,$.default)(e.priorityFunction)&&(e.priority=e.priorityFunction())}function tW(e){return e.state===tE.UNISSUED&&(e.state=tE.ISSUED,e.deferred=tp()),e.deferred.promise}function tH(e){let t=tW(e);return e.state=tE.ACTIVE,tD.push(e),++tU.numberOfActiveRequests,++tU.numberOfActiveRequestsEver,++tF[e.serverKey],e.requestFunction().then(function(t){if(e.state===tE.CANCELLED)return;let r=e.deferred;--tU.numberOfActiveRequests,--tF[e.serverKey],t$.raiseEvent(),e.state=tE.RECEIVED,e.deferred=void 0,r.resolve(t)}).catch(function(t){e.state!==tE.CANCELLED&&(++tU.numberOfFailedRequests,--tU.numberOfActiveRequests,--tF[e.serverKey],t$.raiseEvent(t),e.state=tE.FAILED,e.deferred.reject(t))}),t}function tJ(e){let t=e.state===tE.ACTIVE;if(e.state=tE.CANCELLED,++tU.numberOfCancelledRequests,(0,$.default)(e.deferred)){let t=e.deferred;e.deferred=void 0,t.reject()}t&&(--tU.numberOfActiveRequests,--tF[e.serverKey],++tU.numberOfCancelledActiveRequests),(0,$.default)(e.cancelFunction)&&e.cancelFunction()}tB.maximumRequests=50,tB.maximumRequestsPerServer=18,tB.requestsByServer={},tB.throttleRequests=!0,tB.debugShowStatistics=!1,tB.requestCompletedEvent=t$,Object.defineProperties(tB,{statistics:{get:function(){return tU}},priorityHeapLength:{get:function(){return tk},set:function(e){if(e<tk)for(;tN.length>e;)tJ(tN.pop());tk=e,tN.maximumLength=e,tN.reserve(e)}}}),tB.serverHasOpenSlots=function(e,t){t=t??1;let r=tB.requestsByServer[e]??tB.maximumRequestsPerServer;return tF[e]+t<=r},tB.heapHasOpenSlots=function(e){return tN.length+e<=tk},tB.update=function(){let e,t,r=0,n=tD.length;for(e=0;e<n;++e){if((t=tD[e]).cancelled&&tJ(t),t.state!==tE.ACTIVE){++r;continue}r>0&&(tD[e-r]=t)}tD.length-=r;let a=tN.internalArray,o=tN.length;for(e=0;e<o;++e)tQ(a[e]);tN.resort();let i=Math.max(tB.maximumRequests-tD.length,0),u=0;for(;u<i&&tN.length>0;){if((t=tN.pop()).cancelled||t.throttleByServer&&!tB.serverHasOpenSlots(t.serverKey)){tJ(t);continue}tH(t),++u}tB.debugShowStatistics&&(0===tU.numberOfActiveRequests&&tU.lastNumberOfActiveRequests>0&&(tU.numberOfAttemptedRequests>0&&(console.log(`Number of attempted requests: ${tU.numberOfAttemptedRequests}`),tU.numberOfAttemptedRequests=0),tU.numberOfCancelledRequests>0&&(console.log(`Number of cancelled requests: ${tU.numberOfCancelledRequests}`),tU.numberOfCancelledRequests=0),tU.numberOfCancelledActiveRequests>0&&(console.log(`Number of cancelled active requests: ${tU.numberOfCancelledActiveRequests}`),tU.numberOfCancelledActiveRequests=0),tU.numberOfFailedRequests>0&&(console.log(`Number of failed requests: ${tU.numberOfFailedRequests}`),tU.numberOfFailedRequests=0)),tU.lastNumberOfActiveRequests=tU.numberOfActiveRequests)},tB.getServerKey=function(e){L.default.typeOf.string("url",e);let t=new(R(tf))(e);""===t.scheme()&&(t=t.absoluteTo(tL)).normalize();let r=t.authority();/:/.test(r)||(r=`${r}:${"https"===t.scheme()?"443":"80"}`);let n=tF[r];return(0,$.default)(n)||(tF[r]=0),r},tB.request=function(e){if(L.default.typeOf.object("request",e),L.default.typeOf.string("request.url",e.url),L.default.typeOf.func("request.requestFunction",e.requestFunction),t_(e.url)||tO(e.url))return t$.raiseEvent(),e.state=tE.RECEIVED,e.requestFunction();if(++tU.numberOfAttemptedRequests,(0,$.default)(e.serverKey)||(e.serverKey=tB.getServerKey(e.url)),tB.throttleRequests&&e.throttleByServer&&!tB.serverHasOpenSlots(e.serverKey))return;if(!tB.throttleRequests||!e.throttle)return tH(e);if(tD.length>=tB.maximumRequests)return;tQ(e);let t=tN.insert(e);if((0,$.default)(t)){if(t===e)return;tJ(t)}return tW(e)},tB.clearForSpecs=function(){for(;tN.length>0;)tJ(tN.pop());let e=tD.length;for(let t=0;t<e;++t)tJ(tD[t]);tD.length=0,tF={},tU.numberOfAttemptedRequests=0,tU.numberOfActiveRequests=0,tU.numberOfCancelledRequests=0,tU.numberOfCancelledActiveRequests=0,tU.numberOfFailedRequests=0,tU.numberOfActiveRequestsEver=0,tU.lastNumberOfActiveRequests=0},tB.numberOfActiveRequestsByServer=function(e){return tF[e]},tB.requestHeap=tN;var $=z("jQJji"),Q=z("1vHsR");let tY={},tV={};tY.add=function(e,t){if(!(0,$.default)(e))throw new(0,Q.default)("host is required.");if(!(0,$.default)(t)||t<=0)throw new(0,Q.default)("port is required to be greater than 0.");let r=`${e.toLowerCase()}:${t}`;(0,$.default)(tV[r])||(tV[r]=!0)},tY.remove=function(e,t){if(!(0,$.default)(e))throw new(0,Q.default)("host is required.");if(!(0,$.default)(t)||t<=0)throw new(0,Q.default)("port is required to be greater than 0.");let r=`${e.toLowerCase()}:${t}`;(0,$.default)(tV[r])&&delete tV[r]},tY.contains=function(e){if(!(0,$.default)(e))throw new(0,Q.default)("url is required.");let t=function(e){let t=new(R(tf))(e);t.normalize();let r=t.authority();if(0!==r.length){if(t.authority(r),-1!==r.indexOf("@")&&(r=r.split("@")[1]),-1===r.indexOf(":")){let e=t.scheme();if(0===e.length&&(e=(e=window.location.protocol).substring(0,e.length-1)),"http"===e)r+=":80";else{if("https"!==e)return;r+=":443"}}return r}}(e);return!!((0,$.default)(t)&&(0,$.default)(tV[t]))},tY.clear=function(){tV={}};let tZ=function(){try{let e=new XMLHttpRequest;return e.open("GET","#",!0),e.responseType="blob","blob"===e.responseType}catch(e){return!1}}();function tX(e){"string"==typeof(e=e??ey.EMPTY_OBJECT)&&(e={url:e}),L.default.typeOf.string("options.url",e.url),this._url=void 0,this._templateValues=tG(e.templateValues,{}),this._queryParameters=tG(e.queryParameters,{}),this.headers=tG(e.headers,{}),this.request=e.request??new tq,this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=e.retryAttempts??0,this._retryCount=0,e.parseUrl??!0?this.parseUrl(e.url,!0,!0):this._url=e.url,this._credits=e.credits}function tG(e,t){return(0,$.default)(e)?td(e):t}function tK(e,t,r){if(!r)return tc(e,t);let n=td(e,!0);for(let e in t)if(t.hasOwnProperty(e)){let r=n[e],a=t[e];(0,$.default)(r)?(Array.isArray(r)||(r=n[e]=[r]),n[e]=r.concat(a)):n[e]=Array.isArray(a)?a.slice():a}return n}function t0(e){let t=e.resource,r=e.flipY,n=e.skipColorSpaceConversion,a=e.preferImageBitmap,o=t.request;o.url=t.url,o.requestFunction=function(){let e=!1;t.isDataUri||t.isBlobUri||(e=t.isCrossOriginUrl);let i=tp();return tX._Implementations.createImage(o,e,i,r,n,a),i.promise};let i=tB.request(o);if((0,$.default)(i))return i.catch(function(e){return o.state!==tE.FAILED?Promise.reject(e):t.retryOnError(e).then(function(i){return i?(o.state=tE.UNISSUED,o.deferred=void 0,t0({resource:t,flipY:r,skipColorSpaceConversion:n,preferImageBitmap:a})):Promise.reject(e)})})}function t1(e){if(e.state===tE.ISSUED||e.state===tE.ACTIVE)throw new eq("The Resource is already being fetched.");e.state=tE.UNISSUED,e.deferred=void 0}tX.createIfNeeded=function(e){return e instanceof tX?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new tX({url:e})},tX.supportsImageBitmapOptions=function(){return(0,$.default)(t)?t:t="function"!=typeof createImageBitmap?Promise.resolve(!1):tX.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAABGdBTUEAAE4g3rEiDgAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADElEQVQI12Ng6GAAAAEUAIngE3ZiAAAAAElFTkSuQmCC"}).then(function(e){return Promise.all([createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none",colorSpaceConversion:"none"}),createImageBitmap(e)])}).then(function(e){let t=tb(e[0]),r=tb(e[1]);return t[1]!==r[1]}).catch(function(){return!1})},Object.defineProperties(tX,{isBlobSupported:{get:function(){return tZ}}}),Object.defineProperties(tX.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){this.parseUrl(e,!1,!1)}},extension:{get:function(){return ty(this._url)}},isDataUri:{get:function(){return t_(this._url)}},isBlobUri:{get:function(){return tO(this._url)}},isCrossOriginUrl:{get:function(){return tv(this._url)}},hasHeaders:{get:function(){return Object.keys(this.headers).length>0}},credits:{get:function(){return this._credits}}}),tX.prototype.toString=function(){return this.getUrlComponent(!0,!0)},tX.prototype.parseUrl=function(e,t,r,n){var a;let o=new(R(tf))(e),i=0===(a=o.query()).length?{}:-1===a.indexOf("=")?{[a]:void 0}:tA(a);this._queryParameters=t?tK(i,this.queryParameters,r):i,o.search(""),o.fragment(""),(0,$.default)(n)&&""===o.scheme()&&(o=o.absoluteTo(th(n))),this._url=o.toString()},tX.prototype.getUrlComponent=function(e,t){if(this.isDataUri)return this._url;let r=this._url;e&&(r=`${r}${function(e){let t=Object.keys(e);return 0===t.length?"":1!==t.length||(0,$.default)(e[t[0]])?`?${tj(e)}`:`?${t[0]}`}(this.queryParameters)}`),r=r.replace(/%7B/g,"{").replace(/%7D/g,"}");let n=this._templateValues;return Object.keys(n).length>0&&(r=r.replace(/{(.*?)}/g,function(e,t){let r=n[t];return(0,$.default)(r)?encodeURIComponent(r):e})),t&&(0,$.default)(this.proxy)&&(r=this.proxy.getURL(r)),r},tX.prototype.setQueryParameters=function(e,t){t?this._queryParameters=tK(this._queryParameters,e,!1):this._queryParameters=tK(e,this._queryParameters,!1)},tX.prototype.appendQueryParameters=function(e){this._queryParameters=tK(e,this._queryParameters,!0)},tX.prototype.setTemplateValues=function(e,t){t?this._templateValues=tc(this._templateValues,e):this._templateValues=tc(e,this._templateValues)},tX.prototype.getDerivedResource=function(e){let t=this.clone();if(t._retryCount=0,(0,$.default)(e.url)){let r=e.preserveQueryParameters??!1;t.parseUrl(e.url,!0,r,this._url)}return(0,$.default)(e.queryParameters)&&(t._queryParameters=tc(e.queryParameters,t.queryParameters)),(0,$.default)(e.templateValues)&&(t._templateValues=tc(e.templateValues,t.templateValues)),(0,$.default)(e.headers)&&(t.headers=tc(e.headers,t.headers)),(0,$.default)(e.proxy)&&(t.proxy=e.proxy),(0,$.default)(e.request)&&(t.request=e.request),(0,$.default)(e.retryCallback)&&(t.retryCallback=e.retryCallback),(0,$.default)(e.retryAttempts)&&(t.retryAttempts=e.retryAttempts),t},tX.prototype.retryOnError=function(e){let t=this.retryCallback;if("function"!=typeof t||this._retryCount>=this.retryAttempts)return Promise.resolve(!1);let r=this;return Promise.resolve(t(this,e)).then(function(e){return++r._retryCount,e})},tX.prototype.clone=function(e){return(0,$.default)(e)?(e._url=this._url,e._queryParameters=td(this._queryParameters),e._templateValues=td(this._templateValues),e.headers=td(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e):new tX({url:this._url,queryParameters:this.queryParameters,templateValues:this.templateValues,headers:this.headers,proxy:this.proxy,retryCallback:this.retryCallback,retryAttempts:this.retryAttempts,request:this.request.clone(),parseUrl:!1,credits:(0,$.default)(this.credits)?this.credits.slice():void 0})},tX.prototype.getBaseUri=function(e){return tm(this.getUrlComponent(e),e)},tX.prototype.appendForwardSlash=function(){var e;this._url=((0===(e=this._url).length||"/"!==e[e.length-1])&&(e=`${e}/`),e)},tX.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},tX.fetchArrayBuffer=function(e){return new tX(e).fetchArrayBuffer()},tX.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},tX.fetchBlob=function(e){return new tX(e).fetchBlob()},tX.prototype.fetchImage=function(e){let t,r,n,a=(e=e??ey.EMPTY_OBJECT).preferImageBitmap??!1,o=e.preferBlob??!1,i=e.flipY??!1,u=e.skipColorSpaceConversion??!1;if(t1(this.request),!tZ||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!o)return t0({resource:this,flipY:i,skipColorSpaceConversion:u,preferImageBitmap:a});let s=this.fetchBlob();if((0,$.default)(s))return tX.supportsImageBitmapOptions().then(function(e){return t=e&&a,s}).then(function(e){return(0,$.default)(e)?(n=e,t)?tX.createImageBitmapFromBlob(e,{flipY:i,premultiplyAlpha:!1,skipColorSpaceConversion:u}):t0({resource:r=new tX({url:window.URL.createObjectURL(e)}),flipY:i,skipColorSpaceConversion:u,preferImageBitmap:!1}):void 0}).then(function(e){if((0,$.default)(e))return e.blob=n,t||window.URL.revokeObjectURL(r.url),e}).catch(function(e){return(0,$.default)(r)&&window.URL.revokeObjectURL(r.url),e.blob=n,Promise.reject(e)})},tX.fetchImage=function(e){return new tX(e).fetchImage({flipY:e.flipY,skipColorSpaceConversion:e.skipColorSpaceConversion,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},tX.prototype.fetchText=function(){return this.fetch({responseType:"text"})},tX.fetchText=function(e){return new tX(e).fetchText()},tX.prototype.fetchJson=function(){let e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if((0,$.default)(e))return e.then(function(e){if((0,$.default)(e))return JSON.parse(e)})},tX.fetchJson=function(e){return new tX(e).fetchJson()},tX.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},tX.fetchXML=function(e){return new tX(e).fetchXML()},tX.prototype.fetchJsonp=function(e){let t;e=e??"callback",t1(this.request);do t=`loadJsonp${B.default.nextRandomNumber().toString().substring(2,8)}`;while((0,$.default)(window[t]))return function e(t,r,n){let a={};a[r]=n,t.setQueryParameters(a);let o=t.request,i=t.url;o.url=i,o.requestFunction=function(){let e=tp();return window[n]=function(t){e.resolve(t);try{delete window[n]}catch(e){window[n]=void 0}},tX._Implementations.loadAndExecuteScript(i,n,e),e.promise};let u=tB.request(o);if((0,$.default)(u))return u.catch(function(a){return o.state!==tE.FAILED?Promise.reject(a):t.retryOnError(a).then(function(i){return i?(o.state=tE.UNISSUED,o.deferred=void 0,e(t,r,n)):Promise.reject(a)})})}(this,e,t)},tX.fetchJsonp=function(e){return new tX(e).fetchJsonp(e.callbackParameterName)},tX.prototype._makeRequest=function(e){let t=this;t1(t.request);let r=t.request,n=t.url;r.url=n,r.requestFunction=function(){let a=e.responseType,o=tc(e.headers,t.headers),i=e.overrideMimeType,u=e.method,s=e.data,l=tp(),f=tX._Implementations.loadWithXhr(n,a,u,s,o,l,i);return(0,$.default)(f)&&(0,$.default)(f.abort)&&(r.cancelFunction=function(){f.abort()}),l.promise};let a=tB.request(r);if((0,$.default)(a))return a.then(function(e){return r.cancelFunction=void 0,e}).catch(function(n){return(r.cancelFunction=void 0,r.state!==tE.FAILED)?Promise.reject(n):t.retryOnError(n).then(function(a){return a?(r.state=tE.UNISSUED,r.deferred=void 0,t.fetch(e)):Promise.reject(n)})})};let t2=/^data:(.*?)(;base64)?,(.*)$/;function t3(e,t){let r=decodeURIComponent(t);return e?atob(r):r}function t4(e,t){let r=t3(e,t),n=new ArrayBuffer(r.length),a=new Uint8Array(n);for(let e=0;e<r.length;e++)a[e]=r.charCodeAt(e);return n}tX.prototype.fetch=function(e){return(e=tG(e,{})).method="GET",this._makeRequest(e)},tX.fetch=function(e){return new tX(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},tX.prototype.delete=function(e){return(e=tG(e,{})).method="DELETE",this._makeRequest(e)},tX.delete=function(e){return new tX(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},tX.prototype.head=function(e){return(e=tG(e,{})).method="HEAD",this._makeRequest(e)},tX.head=function(e){return new tX(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},tX.prototype.options=function(e){return(e=tG(e,{})).method="OPTIONS",this._makeRequest(e)},tX.options=function(e){return new tX(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},tX.prototype.post=function(e,t){return L.default.defined("data",e),(t=tG(t,{})).method="POST",t.data=e,this._makeRequest(t)},tX.post=function(e){return new tX(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},tX.prototype.put=function(e,t){return L.default.defined("data",e),(t=tG(t,{})).method="PUT",t.data=e,this._makeRequest(t)},tX.put=function(e){return new tX(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},tX.prototype.patch=function(e,t){return L.default.defined("data",e),(t=tG(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},tX.patch=function(e){return new tX(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},tX._Implementations={},tX._Implementations.loadImageElement=function(e,t,r){let n=new Image;n.onload=function(){0===n.naturalWidth&&0===n.naturalHeight&&0===n.width&&0===n.height&&(n.width=300,n.height=150),r.resolve(n)},n.onerror=function(e){r.reject(e)},t&&(tY.contains(e)?n.crossOrigin="use-credentials":n.crossOrigin=""),n.src=e},tX._Implementations.createImage=function(e,t,r,n,a,o){let i=e.url;tX.supportsImageBitmapOptions().then(function(u){if(!(u&&o))return void tX._Implementations.loadImageElement(i,t,r);let s=tp(),l=tX._Implementations.loadWithXhr(i,"blob","GET",void 0,void 0,s,void 0,void 0,void 0);return(0,$.default)(l)&&(0,$.default)(l.abort)&&(e.cancelFunction=function(){l.abort()}),s.promise.then(function(e){return(0,$.default)(e)?tX.createImageBitmapFromBlob(e,{flipY:n,premultiplyAlpha:!1,skipColorSpaceConversion:a}):void r.reject(new eq(`Successfully retrieved ${i} but it contained no content.`))}).then(function(e){r.resolve(e)})}).catch(function(e){r.reject(e)})},tX.createImageBitmapFromBlob=function(e,t){return L.default.defined("options",t),L.default.typeOf.bool("options.flipY",t.flipY),L.default.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),L.default.typeOf.bool("options.skipColorSpaceConversion",t.skipColorSpaceConversion),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"from-image",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none",colorSpaceConversion:t.skipColorSpaceConversion?"none":"default"})};let t5="undefined"==typeof XMLHttpRequest;function t6(e){e=e??ey.EMPTY_OBJECT,this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._addNewLeapSeconds=e.addNewLeapSeconds??!0,(0,$.default)(e.data)?t7(this,e.data):t7(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function t8(e,t){return ts.compare(e.julianDate,t)}function t7(e,t){let r;if(!(0,$.default)(t.columnNames))throw new eq("Error in loaded EOP data: The columnNames property is required.");if(!(0,$.default)(t.samples))throw new eq("Error in loaded EOP data: The samples property is required.");let n=t.columnNames.indexOf("modifiedJulianDateUtc"),a=t.columnNames.indexOf("xPoleWanderRadians"),o=t.columnNames.indexOf("yPoleWanderRadians"),i=t.columnNames.indexOf("ut1MinusUtcSeconds"),u=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),s=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),l=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||a<0||o<0||i<0||u<0||s<0||l<0)throw new eq("Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns");let f=e._samples=t.samples,d=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=a,e._yPoleWanderRadiansColumn=o,e._ut1MinusUtcSecondsColumn=i,e._xCelestialPoleOffsetRadiansColumn=u,e._yCelestialPoleOffsetRadiansColumn=s,e._taiMinusUtcSecondsColumn=l,e._columnCount=t.columnNames.length,e._lastIndex=void 0;let c=e._addNewLeapSeconds;for(let t=0,a=f.length;t<a;t+=e._columnCount){let e=f[t+n],a=f[t+l],o=new ts(e+eG.MODIFIED_JULIAN_DATE_DIFFERENCE,a,eK.TAI);if(d.push(o),c){if(a!==r&&(0,$.default)(r)){let e=ts.leapSeconds,t=eH(e,o,t8);if(t<0){let r=new eX(o,a);e.splice(~t,0,r)}}r=a}}}function t9(e,t,r,n,a){let o=r*n;a.xPoleWander=t[o+e._xPoleWanderRadiansColumn],a.yPoleWander=t[o+e._yPoleWanderRadiansColumn],a.xPoleOffset=t[o+e._xCelestialPoleOffsetRadiansColumn],a.yPoleOffset=t[o+e._yCelestialPoleOffsetRadiansColumn],a.ut1MinusUtc=t[o+e._ut1MinusUtcSecondsColumn]}tX._Implementations.loadWithXhr=function(e,t,r,n,a,o,i){let u=t2.exec(e);if(null!==u)return void o.resolve(function(e,t){t=t??"";let r=e[1],n=!!e[2],a=e[3];switch(t){case"":case"text":return t3(n,a);case"arraybuffer":return t4(n,a);case"blob":return new Blob([t4(n,a)],{type:r});case"document":return new DOMParser().parseFromString(t3(n,a),r);case"json":return JSON.parse(t3(n,a));default:throw new(0,Q.default)(`Unhandled responseType: ${t}`)}}(u,t));if(t5)return void fetch(e,{method:r,headers:a}).then(async e=>{if(!e.ok){let t={};e.headers.forEach((e,r)=>{t[r]=e}),o.reject(new tz(e.status,e,t));return}switch(t){case"text":o.resolve(e.text());break;case"json":o.resolve(e.json());break;default:o.resolve(new Uint8Array(await e.arrayBuffer()).buffer)}}).catch(()=>{o.reject(new tz)});let s=new XMLHttpRequest;if(tY.contains(e)&&(s.withCredentials=!0),s.open(r,e,!0),(0,$.default)(i)&&(0,$.default)(s.overrideMimeType)&&s.overrideMimeType(i),(0,$.default)(a))for(let e in a)a.hasOwnProperty(e)&&s.setRequestHeader(e,a[e]);(0,$.default)(t)&&(s.responseType=t);let l=!1;return"string"==typeof e&&(l=0===e.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),s.onload=function(){if((s.status<200||s.status>=300)&&!(l&&0===s.status))return void o.reject(new tz(s.status,s.response,s.getAllResponseHeaders()));let e=s.response,n=s.responseType;if("HEAD"===r||"OPTIONS"===r){let e=s.getAllResponseHeaders().trim().split(/[\r\n]+/),t={};e.forEach(function(e){let r=e.split(": ");t[r.shift()]=r.join(": ")}),o.resolve(t);return}if(204===s.status)o.resolve(void 0);else if((0,$.default)(e)&&(!(0,$.default)(t)||n===t))o.resolve(e);else if("json"===t&&"string"==typeof e)try{o.resolve(JSON.parse(e))}catch(e){o.reject(e)}else(""===n||"document"===n)&&(0,$.default)(s.responseXML)&&s.responseXML.hasChildNodes()?o.resolve(s.responseXML):(""===n||"text"===n)&&(0,$.default)(s.responseText)?o.resolve(s.responseText):o.reject(new eq("Invalid XMLHttpRequest response type."))},s.onerror=function(e){o.reject(new tz)},s.send(n),s},tX._Implementations.loadAndExecuteScript=function(e,t,r){return tS(e,t).catch(function(e){r.reject(e)})},tX._DefaultImplementations={},tX._DefaultImplementations.createImage=tX._Implementations.createImage,tX._DefaultImplementations.loadWithXhr=tX._Implementations.loadWithXhr,tX._DefaultImplementations.loadAndExecuteScript=tX._Implementations.loadAndExecuteScript,tX.DEFAULT=Object.freeze(new tX({url:"undefined"==typeof document?"":document.location.href.split("?")[0]}));function re(e,t,r,n,a,o,i){var u,s,l,f,d;let c=e._columnCount;if(o>t.length-1)return i.xPoleWander=0,i.yPoleWander=0,i.xPoleOffset=0,i.yPoleOffset=0,i.ut1MinusUtc=0,i;let p=t[a],h=t[o];if(p.equals(h)||n.equals(p))return t9(e,r,a,c,i),i;if(n.equals(h))return t9(e,r,o,c,i),i;let m=ts.secondsDifference(n,p)/ts.secondsDifference(h,p),y=a*c,g=o*c,b=r[y+e._ut1MinusUtcSecondsColumn],w=r[g+e._ut1MinusUtcSecondsColumn],O=w-b;if(O>.5||O<-.5){let t=r[y+e._taiMinusUtcSecondsColumn],a=r[g+e._taiMinusUtcSecondsColumn];t!==a&&(h.equals(n)?b=w:w-=a-t)}return i.xPoleWander=(u=r[y+e._xPoleWanderRadiansColumn])+m*(r[g+e._xPoleWanderRadiansColumn]-u),i.yPoleWander=(s=r[y+e._yPoleWanderRadiansColumn])+m*(r[g+e._yPoleWanderRadiansColumn]-s),i.xPoleOffset=(l=r[y+e._xCelestialPoleOffsetRadiansColumn])+m*(r[g+e._xCelestialPoleOffsetRadiansColumn]-l),i.yPoleOffset=(f=r[y+e._yCelestialPoleOffsetRadiansColumn])+m*(r[g+e._yCelestialPoleOffsetRadiansColumn]-f),i.ut1MinusUtc=(d=b)+m*(w-d),i}t6.fromUrl=async function(e,t){let r;L.default.defined("url",e),t=t??ey.EMPTY_OBJECT;let n=tX.createIfNeeded(e);try{r=await n.fetchJson()}catch(e){throw new eq(`An error occurred while retrieving the EOP data from the URL ${n.url}.`)}return new t6({addNewLeapSeconds:t.addNewLeapSeconds,data:r})},t6.NONE=Object.freeze({compute:function(e,t){return(0,$.default)(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new eJ(0,0,0,0,0),t}}),t6.prototype.compute=function(e,t){if(!(0,$.default)(this._samples))return;if((0,$.default)(t)||(t=new eJ(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;let r=this._dates,n=this._lastIndex,a=0,o=0;if((0,$.default)(n)){let i=r[n],u=r[n+1],s=ts.lessThanOrEquals(i,e),l=!(0,$.default)(u),f=l||ts.greaterThanOrEquals(u,e);if(s&&f)return a=n,!l&&u.equals(e)&&++a,o=a+1,re(this,r,this._samples,e,a,o,t),t}let i=eH(r,e,ts.compare,this._dateColumn);return i>=0?(i<r.length-1&&r[i+1].equals(e)&&++i,a=i,o=i):(a=(o=~i)-1)<0&&(a=0),this._lastIndex=a,re(this,r,this._samples,e,a,o,t),t};var $=z("jQJji"),Q=z("1vHsR"),B=z("AXvpI");function rt(e,t,r){this.heading=e??0,this.pitch=t??0,this.roll=r??0}rt.fromQuaternion=function(e,t){if(!(0,$.default)(e))throw new(0,Q.default)("quaternion is required");(0,$.default)(t)||(t=new rt);let r=2*(e.w*e.y-e.z*e.x),n=1-2*(e.x*e.x+e.y*e.y),a=2*(e.w*e.x+e.y*e.z),o=1-2*(e.y*e.y+e.z*e.z),i=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(i,o),t.roll=Math.atan2(a,n),t.pitch=-B.default.asinClamped(r),t},rt.fromDegrees=function(e,t,r,n){if(!(0,$.default)(e))throw new(0,Q.default)("heading is required");if(!(0,$.default)(t))throw new(0,Q.default)("pitch is required");if(!(0,$.default)(r))throw new(0,Q.default)("roll is required");return(0,$.default)(n)||(n=new rt),n.heading=e*B.default.RADIANS_PER_DEGREE,n.pitch=t*B.default.RADIANS_PER_DEGREE,n.roll=r*B.default.RADIANS_PER_DEGREE,n},rt.clone=function(e,t){if((0,$.default)(e))return(0,$.default)(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new rt(e.heading,e.pitch,e.roll)},rt.equals=function(e,t){return e===t||(0,$.default)(e)&&(0,$.default)(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},rt.equalsEpsilon=function(e,t,r,n){return e===t||(0,$.default)(e)&&(0,$.default)(t)&&B.default.equalsEpsilon(e.heading,t.heading,r,n)&&B.default.equalsEpsilon(e.pitch,t.pitch,r,n)&&B.default.equalsEpsilon(e.roll,t.roll,r,n)},rt.prototype.clone=function(e){return rt.clone(this,e)},rt.prototype.equals=function(e){return rt.equals(this,e)},rt.prototype.equalsEpsilon=function(e,t,r){return rt.equalsEpsilon(this,e,t,r)},rt.prototype.toString=function(){return`(${this.heading}, ${this.pitch}, ${this.roll})`};var $=z("jQJji"),Q=z("1vHsR"),rr=Object.assign(Object.create(null),{url:"file:///node_modules/@cesium/engine/Source/Core/buildModuleUrl.js"});let rn=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function ra(e){return"undefined"==typeof document?e:((0,$.default)(r)||(r=document.createElement("a")),r.href=e,r.href)}function ro(){let e;if((0,$.default)(n))return n;if(e="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:(0,$.default)(rr?.url)?th(".","file:///node_modules/@cesium/engine/Source/Core/buildModuleUrl.js"):"object"==typeof define&&(0,$.default)(define.amd)&&!define.amd.toUrlUndefined&&(0,$.default)(void 0)?th("..",rs("Core/buildModuleUrl.js")):function(){let e=document.getElementsByTagName("script");for(let t=0,r=e.length;t<r;++t){let r=e[t].getAttribute("src"),n=rn.exec(r);if(null!==n)return n[1]}}(),!(0,$.default)(e))throw new(0,Q.default)("Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.");return(n=new tX({url:ra(e)})).appendForwardSlash(),n}function ri(e){return ra((void 0)(`../${e}`))}function ru(e){return ro().getDerivedResource({url:e}).url}function rs(e){return(0,$.default)(a)||(a="object"==typeof define&&(0,$.default)(define.amd)&&!define.amd.toUrlUndefined&&(0,$.default)(void 0)?ri:ru),a(e)}rs._cesiumScriptRegex=rn,rs._buildModuleUrlFromBaseUrl=ru,rs._clearBaseResource=function(){n=void 0},rs.setBaseUrl=function(e){n=tX.DEFAULT.getDerivedResource({url:e})},rs.getCesiumBaseUrl=ro;var $=z("jQJji"),rl=function(e,t,r){this.x=e,this.y=t,this.s=r};function rf(e){e=e??ey.EMPTY_OBJECT,this._xysFileUrlTemplate=tX.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=e.interpolationOrder??9,this._sampleZeroJulianEphemerisDate=e.sampleZeroJulianEphemerisDate??2442396.5,this._sampleZeroDateTT=new ts(this._sampleZeroJulianEphemerisDate,0,eK.TAI),this._stepSizeDays=e.stepSizeDays??1,this._samplesPerXysFile=e.samplesPerXysFile??1e3,this._totalSamples=e.totalSamples??27426,this._samples=Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];let t=this._interpolationOrder,r=this._denominators=Array(t+1),n=this._xTable=Array(t+1),a=Math.pow(this._stepSizeDays,t);for(let e=0;e<=t;++e){r[e]=a,n[e]=e*this._stepSizeDays;for(let n=0;n<=t;++n)n!==e&&(r[e]*=e-n);r[e]=1/r[e]}this._work=Array(t+1),this._coef=Array(t+1)}let rd=new ts(0,0,eK.TAI);function rc(e,t,r){return rd.dayNumber=t,rd.secondsOfDay=r,ts.daysDifference(rd,e._sampleZeroDateTT)}function rp(e,t){if(e._chunkDownloadsInProgress[t])return e._chunkDownloadsInProgress[t];let r=e._xysFileUrlTemplate,n=((0,$.default)(r)?r.getDerivedResource({templateValues:{0:t}}):new tX({url:rs(`Assets/IAU2006_XYS/IAU2006_XYS_${t}.json`)})).fetchJson().then(function(r){e._chunkDownloadsInProgress[t]=!1;let n=e._samples,a=r.samples,o=t*e._samplesPerXysFile*3;for(let e=0,t=a.length;e<t;++e)n[o+e]=a[e]});return e._chunkDownloadsInProgress[t]=n,n}rf.prototype.preload=function(e,t,r,n){let a=rc(this,e,t),o=rc(this,r,n),i=a/this._stepSizeDays-this._interpolationOrder/2|0;i<0&&(i=0);let u=o/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;u>=this._totalSamples&&(u=this._totalSamples-1);let s=i/this._samplesPerXysFile|0,l=u/this._samplesPerXysFile|0,f=[];for(let e=s;e<=l;++e)f.push(rp(this,e));return Promise.all(f)},rf.prototype.computeXysRadians=function(e,t,r){let n,a,o=rc(this,e,t);if(o<0)return;let i=o/this._stepSizeDays|0;if(i>=this._totalSamples)return;let u=this._interpolationOrder,s=i-(u/2|0);s<0&&(s=0);let l=s+u;l>=this._totalSamples&&(s=(l=this._totalSamples-1)-u)<0&&(s=0);let f=!1,d=this._samples;if((0,$.default)(d[3*s])||(rp(this,s/this._samplesPerXysFile|0),f=!0),(0,$.default)(d[3*l])||(rp(this,l/this._samplesPerXysFile|0),f=!0),f)return;(0,$.default)(r)?(r.x=0,r.y=0,r.s=0):r=new rl(0,0,0);let c=o-s*this._stepSizeDays,p=this._work,h=this._denominators,m=this._coef,y=this._xTable;for(n=0;n<=u;++n)p[n]=c-y[n];for(n=0;n<=u;++n){for(a=0,m[n]=1;a<=u;++a)a!==n&&(m[n]*=p[a]);m[n]*=h[n];let e=(s+n)*3;r.x+=m[n]*d[e++],r.y+=m[n]*d[e++],r.s+=m[n]*d[e]}return r};var B=z("AXvpI"),F=z("bXwZF"),L=z("3pzcG"),$=z("jQJji"),L=z("3pzcG"),$=z("jQJji"),Q=z("1vHsR"),$=z("jQJji");let rh={requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0},rm={};function ry(e){let t=e.split(".");for(let e=0,r=t.length;e<r;++e)t[e]=parseInt(t[e],10);return t}function rg(){if(!(0,$.default)(u)&&(u=!1,!rv())){let e=/ Chrome\/([\.0-9]+)/.exec(i.userAgent);null!==e&&(u=!0,s=ry(e[1]))}return u}function rb(){if(!(0,$.default)(l)&&(l=!1,!rg()&&!rv()&&/ Safari\/[\.0-9]+/.test(i.userAgent))){let e=/ Version\/([\.0-9]+)/.exec(i.userAgent);null!==e&&(l=!0,f=ry(e[1]))}return l}function rw(){if(!(0,$.default)(d)){d=!1;let e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(i.userAgent);null!==e&&(d=!0,(c=ry(e[1])).isNightly=!!e[2])}return d}function rO(){if(!(0,$.default)(p)){let e;p=!1,"Microsoft Internet Explorer"===i.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(i.userAgent))&&(p=!0,h=ry(e[1])):"Netscape"===i.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(i.userAgent))&&(p=!0,h=ry(e[1]))}return p}function rv(){if(!(0,$.default)(m)){m=!1;let e=/ Edg\/([\.0-9]+)/.exec(i.userAgent);null!==e&&(m=!0,y=ry(e[1]))}return m}function rx(){if(!(0,$.default)(g)){g=!1;let e=/Firefox\/([\.0-9]+)/.exec(i.userAgent);null!==e&&(g=!0,b=ry(e[1]))}return g}function r_(){if(!(0,$.default)(_)){let e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;");let t=e.style.imageRendering;(_=(0,$.default)(t)&&""!==t)&&(x=t)}return _}function rS(){if(!rS.initialized)throw new(0,Q.default)("You must call FeatureDetection.supportsWebP.initialize and wait for the promise to resolve before calling FeatureDetection.supportsWebP");return rS._result}Object.defineProperties(rm,{element:{get:function(){if(rm.supportsFullscreen())return document[rh.fullscreenElement]}},changeEventName:{get:function(){if(rm.supportsFullscreen())return rh.fullscreenchange}},errorEventName:{get:function(){if(rm.supportsFullscreen())return rh.fullscreenerror}},enabled:{get:function(){if(rm.supportsFullscreen())return document[rh.fullscreenEnabled]}},fullscreen:{get:function(){if(rm.supportsFullscreen())return null!==rm.element}}}),rm.supportsFullscreen=function(){let e;if((0,$.default)(o))return o;o=!1;let t=document.body;if("function"==typeof t.requestFullscreen)return rh.requestFullscreen="requestFullscreen",rh.exitFullscreen="exitFullscreen",rh.fullscreenEnabled="fullscreenEnabled",rh.fullscreenElement="fullscreenElement",rh.fullscreenchange="fullscreenchange",rh.fullscreenerror="fullscreenerror",o=!0;let r=["webkit","moz","o","ms","khtml"];for(let n=0,a=r.length;n<a;++n){let a=r[n];"function"==typeof t[e=`${a}RequestFullscreen`]?(rh.requestFullscreen=e,o=!0):"function"==typeof t[e=`${a}RequestFullScreen`]&&(rh.requestFullscreen=e,o=!0),"function"==typeof document[e=`${a}ExitFullscreen`]?rh.exitFullscreen=e:"function"==typeof document[e=`${a}CancelFullScreen`]&&(rh.exitFullscreen=e),void 0!==document[e=`${a}FullscreenEnabled`]?rh.fullscreenEnabled=e:void 0!==document[e=`${a}FullScreenEnabled`]&&(rh.fullscreenEnabled=e),void 0!==document[e=`${a}FullscreenElement`]?rh.fullscreenElement=e:void 0!==document[e=`${a}FullScreenElement`]&&(rh.fullscreenElement=e),e=`${a}fullscreenchange`,void 0!==document[`on${e}`]&&("ms"===a&&(e="MSFullscreenChange"),rh.fullscreenchange=e),e=`${a}fullscreenerror`,void 0!==document[`on${e}`]&&("ms"===a&&(e="MSFullscreenError"),rh.fullscreenerror=e)}return o},rm.requestFullscreen=function(e,t){rm.supportsFullscreen()&&e[rh.requestFullscreen]({vrDisplay:t})},rm.exitFullscreen=function(){rm.supportsFullscreen()&&document[rh.exitFullscreen]()},rm._names=rh,i="undefined"!=typeof navigator?navigator:{},rS._promise=void 0,rS._result=void 0,rS.initialize=function(){return(0,$.default)(rS._promise)||(rS._promise=new Promise(e=>{let t=new Image;t.onload=function(){rS._result=t.width>0&&t.height>0,e(rS._result)},t.onerror=function(){rS._result=!1,e(rS._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"})),rS._promise},Object.defineProperties(rS,{initialized:{get:function(){return(0,$.default)(rS._result)}}});let rj=[];"undefined"!=typeof ArrayBuffer&&(rj.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&rj.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&rj.push(Uint8ClampedArray),"undefined"!=typeof BigInt64Array&&rj.push(BigInt64Array),"undefined"!=typeof BigUint64Array&&rj.push(BigUint64Array));let rA={isChrome:rg,chromeVersion:function(){return rg()&&s},isSafari:rb,safariVersion:function(){return rb()&&f},isWebkit:rw,webkitVersion:function(){return rw()&&c},isInternetExplorer:rO,internetExplorerVersion:function(){return rO()&&h},isEdge:rv,edgeVersion:function(){return rv()&&y},isFirefox:rx,firefoxVersion:function(){return rx()&&b},isWindows:function(){return(0,$.default)(w)||(w=/Windows/i.test(i.appVersion)),w},isIPadOrIOS:function(){return(0,$.default)(O)||(O="iPhone"===navigator.platform||"iPod"===navigator.platform||"iPad"===navigator.platform),O},hardwareConcurrency:i.hardwareConcurrency??3,supportsPointerEvents:function(){return(0,$.default)(v)||(v=!rx()&&"undefined"!=typeof PointerEvent&&(!(0,$.default)(i.pointerEnabled)||i.pointerEnabled)),v},supportsImageRenderingPixelated:r_,supportsWebP:rS,imageRenderingValue:function(){return r_()?x:void 0},typedArrayTypes:rj};rA.supportsBasis=function(e){return rA.supportsWebAssembly()&&e.context.supportsBasis},rA.supportsFullscreen=function(){return rm.supportsFullscreen()},rA.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},rA.supportsBigInt64Array=function(){return"undefined"!=typeof BigInt64Array},rA.supportsBigUint64Array=function(){return"undefined"!=typeof BigUint64Array},rA.supportsBigInt=function(){return"undefined"!=typeof BigInt},rA.supportsWebWorkers=function(){return"undefined"!=typeof Worker},rA.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly},rA.supportsWebgl2=function(e){return L.default.defined("scene",e),e.context.webgl2},rA.supportsEsmWebWorkers=function(){return!rx()||parseInt(b)>=114};var B=z("AXvpI");function rE(e,t,r,n){this.x=e??0,this.y=t??0,this.z=r??0,this.w=n??0}let rR=new(0,F.default);rE.fromAxisAngle=function(e,t,r){L.default.typeOf.object("axis",e),L.default.typeOf.number("angle",t);let n=t/2,a=Math.sin(n),o=(rR=F.default.normalize(e,rR)).x*a,i=rR.y*a,u=rR.z*a,s=Math.cos(n);return(0,$.default)(r)?(r.x=o,r.y=i,r.z=u,r.w=s,r):new rE(o,i,u,s)};let rq=[1,2,0],rT=[,,,];rE.fromRotationMatrix=function(e,t){let r,n,a,o,i;L.default.typeOf.object("matrix",e);let u=e[eg.COLUMN0ROW0],s=e[eg.COLUMN1ROW1],l=e[eg.COLUMN2ROW2],f=u+s+l;if(f>0)i=.5*(r=Math.sqrt(f+1)),r=.5/r,n=(e[eg.COLUMN1ROW2]-e[eg.COLUMN2ROW1])*r,a=(e[eg.COLUMN2ROW0]-e[eg.COLUMN0ROW2])*r,o=(e[eg.COLUMN0ROW1]-e[eg.COLUMN1ROW0])*r;else{let t=0;s>u&&(t=1),l>u&&l>s&&(t=2);let f=rq[t],d=rq[f];r=Math.sqrt(e[eg.getElementIndex(t,t)]-e[eg.getElementIndex(f,f)]-e[eg.getElementIndex(d,d)]+1),rT[t]=.5*r,r=.5/r,i=(e[eg.getElementIndex(d,f)]-e[eg.getElementIndex(f,d)])*r,rT[f]=(e[eg.getElementIndex(f,t)]+e[eg.getElementIndex(t,f)])*r,rT[d]=(e[eg.getElementIndex(d,t)]+e[eg.getElementIndex(t,d)])*r,n=-rT[0],a=-rT[1],o=-rT[2]}return(0,$.default)(t)?(t.x=n,t.y=a,t.z=o,t.w=i,t):new rE(n,a,o,i)};let rz=new rE,rC=new rE,rI=new rE,rP=new rE;rE.fromHeadingPitchRoll=function(e,t){return L.default.typeOf.object("headingPitchRoll",e),rP=rE.fromAxisAngle(F.default.UNIT_X,e.roll,rz),rI=rE.fromAxisAngle(F.default.UNIT_Y,-e.pitch,t),t=rE.multiply(rI,rP,rI),rC=rE.fromAxisAngle(F.default.UNIT_Z,-e.heading,rz),rE.multiply(rC,t,t)};let rM=new(0,F.default),rU=new(0,F.default),rk=new rE,rN=new rE,rD=new rE;rE.packedLength=4,rE.pack=function(e,t,r){return L.default.typeOf.object("value",e),L.default.defined("array",t),r=r??0,t[r++]=e.x,t[r++]=e.y,t[r++]=e.z,t[r]=e.w,t},rE.unpack=function(e,t,r){return L.default.defined("array",e),t=t??0,(0,$.default)(r)||(r=new rE),r.x=e[t],r.y=e[t+1],r.z=e[t+2],r.w=e[t+3],r},rE.packedInterpolationLength=3,rE.convertPackedArrayForInterpolation=function(e,t,r,n){rE.unpack(e,4*r,rD),rE.conjugate(rD,rD);for(let a=0,o=r-t+1;a<o;a++){let r=3*a;rE.unpack(e,(t+a)*4,rk),rE.multiply(rk,rD,rk),rk.w<0&&rE.negate(rk,rk),rE.computeAxis(rk,rM);let o=rE.computeAngle(rk);(0,$.default)(n)||(n=[]),n[r]=rM.x*o,n[r+1]=rM.y*o,n[r+2]=rM.z*o}},rE.unpackInterpolationResult=function(e,t,r,n,a){(0,$.default)(a)||(a=new rE),F.default.fromArray(e,0,rU);let o=F.default.magnitude(rU);return rE.unpack(t,4*n,rN),0===o?rE.clone(rE.IDENTITY,rk):rE.fromAxisAngle(rU,o,rk),rE.multiply(rk,rN,a)},rE.clone=function(e,t){if((0,$.default)(e))return(0,$.default)(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new rE(e.x,e.y,e.z,e.w)},rE.conjugate=function(e,t){return L.default.typeOf.object("quaternion",e),L.default.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},rE.magnitudeSquared=function(e){return L.default.typeOf.object("quaternion",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},rE.magnitude=function(e){return Math.sqrt(rE.magnitudeSquared(e))},rE.normalize=function(e,t){L.default.typeOf.object("result",t);let r=1/rE.magnitude(e),n=e.x*r,a=e.y*r,o=e.z*r,i=e.w*r;return t.x=n,t.y=a,t.z=o,t.w=i,t},rE.inverse=function(e,t){L.default.typeOf.object("result",t);let r=rE.magnitudeSquared(e);return t=rE.conjugate(e,t),rE.multiplyByScalar(t,1/r,t)},rE.add=function(e,t,r){return L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),L.default.typeOf.object("result",r),r.x=e.x+t.x,r.y=e.y+t.y,r.z=e.z+t.z,r.w=e.w+t.w,r},rE.subtract=function(e,t,r){return L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),L.default.typeOf.object("result",r),r.x=e.x-t.x,r.y=e.y-t.y,r.z=e.z-t.z,r.w=e.w-t.w,r},rE.negate=function(e,t){return L.default.typeOf.object("quaternion",e),L.default.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},rE.dot=function(e,t){return L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},rE.multiply=function(e,t,r){L.default.typeOf.object("left",e),L.default.typeOf.object("right",t),L.default.typeOf.object("result",r);let n=e.x,a=e.y,o=e.z,i=e.w,u=t.x,s=t.y,l=t.z,f=t.w;return r.x=i*u+n*f+a*l-o*s,r.y=i*s-n*l+a*f+o*u,r.z=i*l+n*s-a*u+o*f,r.w=i*f-n*u-a*s-o*l,r},rE.multiplyByScalar=function(e,t,r){return L.default.typeOf.object("quaternion",e),L.default.typeOf.number("scalar",t),L.default.typeOf.object("result",r),r.x=e.x*t,r.y=e.y*t,r.z=e.z*t,r.w=e.w*t,r},rE.divideByScalar=function(e,t,r){return L.default.typeOf.object("quaternion",e),L.default.typeOf.number("scalar",t),L.default.typeOf.object("result",r),r.x=e.x/t,r.y=e.y/t,r.z=e.z/t,r.w=e.w/t,r},rE.computeAxis=function(e,t){L.default.typeOf.object("quaternion",e),L.default.typeOf.object("result",t);let r=e.w;if(Math.abs(r-1)<B.default.EPSILON6||Math.abs(r+1)<B.default.EPSILON6)return t.x=1,t.y=t.z=0,t;let n=1/Math.sqrt(1-r*r);return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t},rE.computeAngle=function(e){return(L.default.typeOf.object("quaternion",e),Math.abs(e.w-1)<B.default.EPSILON6)?0:2*Math.acos(e.w)};let rF=new rE;rE.lerp=function(e,t,r,n){return L.default.typeOf.object("start",e),L.default.typeOf.object("end",t),L.default.typeOf.number("t",r),L.default.typeOf.object("result",n),rF=rE.multiplyByScalar(t,r,rF),n=rE.multiplyByScalar(e,1-r,n),rE.add(rF,n,n)};let rL=new rE,r$=new rE,rB=new rE;rE.slerp=function(e,t,r,n){L.default.typeOf.object("start",e),L.default.typeOf.object("end",t),L.default.typeOf.number("t",r),L.default.typeOf.object("result",n);let a=rE.dot(e,t),o=t;if(a<0&&(a=-a,o=rL=rE.negate(t,rL)),1-a<B.default.EPSILON6)return rE.lerp(e,o,r,n);let i=Math.acos(a);return r$=rE.multiplyByScalar(e,Math.sin((1-r)*i),r$),rB=rE.multiplyByScalar(o,Math.sin(r*i),rB),n=rE.add(r$,rB,n),rE.multiplyByScalar(n,1/Math.sin(i),n)},rE.log=function(e,t){L.default.typeOf.object("quaternion",e),L.default.typeOf.object("result",t);let r=B.default.acosClamped(e.w),n=0;return 0!==r&&(n=r/Math.sin(r)),F.default.multiplyByScalar(e,n,t)},rE.exp=function(e,t){L.default.typeOf.object("cartesian",e),L.default.typeOf.object("result",t);let r=F.default.magnitude(e),n=0;return 0!==r&&(n=Math.sin(r)/r),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=Math.cos(r),t};let rQ=new(0,F.default),rW=new(0,F.default),rH=new rE,rJ=new rE;rE.computeInnerQuadrangle=function(e,t,r,n){L.default.typeOf.object("q0",e),L.default.typeOf.object("q1",t),L.default.typeOf.object("q2",r),L.default.typeOf.object("result",n);let a=rE.conjugate(t,rH);rE.multiply(a,r,rJ);let o=rE.log(rJ,rQ);rE.multiply(a,e,rJ);let i=rE.log(rJ,rW);return F.default.add(o,i,o),F.default.multiplyByScalar(o,.25,o),F.default.negate(o,o),rE.exp(o,rH),rE.multiply(t,rH,n)},rE.squad=function(e,t,r,n,a,o){L.default.typeOf.object("q0",e),L.default.typeOf.object("q1",t),L.default.typeOf.object("s0",r),L.default.typeOf.object("s1",n),L.default.typeOf.number("t",a),L.default.typeOf.object("result",o);let i=rE.slerp(e,t,a,rH),u=rE.slerp(r,n,a,rJ);return rE.slerp(i,u,2*a*(1-a),o)};let rY=new rE,rV=rA.supportsTypedArrays()?new Float32Array(8):[],rZ=rA.supportsTypedArrays()?new Float32Array(8):[],rX=rA.supportsTypedArrays()?new Float32Array(8):[],rG=rA.supportsTypedArrays()?new Float32Array(8):[];for(let e=0;e<7;++e){let t=e+1,r=2*t+1;rV[e]=1/(t*r),rZ[e]=t/r}rV[7]=.013978731275862502,rZ[7]=.8946388016552002,rE.fastSlerp=function(e,t,r,n){let a;L.default.typeOf.object("start",e),L.default.typeOf.object("end",t),L.default.typeOf.number("t",r),L.default.typeOf.object("result",n);let o=rE.dot(e,t);o>=0?a=1:(a=-1,o=-o);let i=o-1,u=1-r,s=r*r,l=u*u;for(let e=7;e>=0;--e)rX[e]=(rV[e]*s-rZ[e])*i,rG[e]=(rV[e]*l-rZ[e])*i;let f=a*r*(1+rX[0]*(1+rX[1]*(1+rX[2]*(1+rX[3]*(1+rX[4]*(1+rX[5]*(1+rX[6]*(1+rX[7])))))))),d=u*(1+rG[0]*(1+rG[1]*(1+rG[2]*(1+rG[3]*(1+rG[4]*(1+rG[5]*(1+rG[6]*(1+rG[7])))))))),c=rE.multiplyByScalar(e,d,rY);return rE.multiplyByScalar(t,f,n),rE.add(c,n,n)},rE.fastSquad=function(e,t,r,n,a,o){L.default.typeOf.object("q0",e),L.default.typeOf.object("q1",t),L.default.typeOf.object("s0",r),L.default.typeOf.object("s1",n),L.default.typeOf.number("t",a),L.default.typeOf.object("result",o);let i=rE.fastSlerp(e,t,a,rH),u=rE.fastSlerp(r,n,a,rJ);return rE.fastSlerp(i,u,2*a*(1-a),o)},rE.equals=function(e,t){return e===t||(0,$.default)(e)&&(0,$.default)(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},rE.equalsEpsilon=function(e,t,r){return r=r??0,e===t||(0,$.default)(e)&&(0,$.default)(t)&&Math.abs(e.x-t.x)<=r&&Math.abs(e.y-t.y)<=r&&Math.abs(e.z-t.z)<=r&&Math.abs(e.w-t.w)<=r},rE.ZERO=Object.freeze(new rE(0,0,0,0)),rE.IDENTITY=Object.freeze(new rE(0,0,0,1)),rE.prototype.clone=function(e){return rE.clone(this,e)},rE.prototype.equals=function(e){return rE.equals(this,e)},rE.prototype.equalsEpsilon=function(e,t){return rE.equalsEpsilon(this,e,t)},rE.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`};let rK={},r0={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},r1={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},r2={},r3={east:new(0,F.default),north:new(0,F.default),up:new(0,F.default),west:new(0,F.default),south:new(0,F.default),down:new(0,F.default)},r4=new(0,F.default),r5=new(0,F.default),r6=new(0,F.default);rK.localFrameToFixedFrameGenerator=function(e,t){let r;if(!r0.hasOwnProperty(e)||!r0[e].hasOwnProperty(t))throw new(0,Q.default)("firstAxis and secondAxis must be east, north, up, west, south or down.");let n=r0[e][t],a=e+t;return(0,$.default)(r2[a])?r=r2[a]:(r=function(r,a,o){if(!(0,$.default)(r))throw new(0,Q.default)("origin is required.");if(isNaN(r.x)||isNaN(r.y)||isNaN(r.z))throw new(0,Q.default)("origin has a NaN component");if((0,$.default)(o)||(o=new eT),F.default.equalsEpsilon(r,F.default.ZERO,B.default.EPSILON14))F.default.unpack(r1[e],0,r4),F.default.unpack(r1[t],0,r5),F.default.unpack(r1[n],0,r6);else if(B.default.equalsEpsilon(r.x,0,B.default.EPSILON14)&&B.default.equalsEpsilon(r.y,0,B.default.EPSILON14)){let a=B.default.sign(r.z);F.default.unpack(r1[e],0,r4),"east"!==e&&"west"!==e&&F.default.multiplyByScalar(r4,a,r4),F.default.unpack(r1[t],0,r5),"east"!==t&&"west"!==t&&F.default.multiplyByScalar(r5,a,r5),F.default.unpack(r1[n],0,r6),"east"!==n&&"west"!==n&&F.default.multiplyByScalar(r6,a,r6)}else{(a=a??K.default).geodeticSurfaceNormal(r,r3.up);let o=r3.up,i=r3.east;i.x=-r.y,i.y=r.x,i.z=0,F.default.normalize(i,r3.east),F.default.cross(o,i,r3.north),F.default.multiplyByScalar(r3.up,-1,r3.down),F.default.multiplyByScalar(r3.east,-1,r3.west),F.default.multiplyByScalar(r3.north,-1,r3.south),r4=r3[e],r5=r3[t],r6=r3[n]}return o[0]=r4.x,o[1]=r4.y,o[2]=r4.z,o[3]=0,o[4]=r5.x,o[5]=r5.y,o[6]=r5.z,o[7]=0,o[8]=r6.x,o[9]=r6.y,o[10]=r6.z,o[11]=0,o[12]=r.x,o[13]=r.y,o[14]=r.z,o[15]=1,o},r2[a]=r),r},rK.eastNorthUpToFixedFrame=rK.localFrameToFixedFrameGenerator("east","north"),rK.northEastDownToFixedFrame=rK.localFrameToFixedFrameGenerator("north","east"),rK.northUpEastToFixedFrame=rK.localFrameToFixedFrameGenerator("north","up"),rK.northWestUpToFixedFrame=rK.localFrameToFixedFrameGenerator("north","west");let r8=new rE,r7=new(0,F.default)(1,1,1),r9=new eT;rK.headingPitchRollToFixedFrame=function(e,t,r,n,a){L.default.typeOf.object("HeadingPitchRoll",t),n=n??rK.eastNorthUpToFixedFrame;let o=rE.fromHeadingPitchRoll(t,r8),i=eT.fromTranslationQuaternionRotationScale(F.default.ZERO,o,r7,r9);return a=n(e,r,a),eT.multiply(a,i,a)};let ne=new eT,nt=new eg;rK.headingPitchRollQuaternion=function(e,t,r,n,a){L.default.typeOf.object("HeadingPitchRoll",t);let o=rK.headingPitchRollToFixedFrame(e,t,r,n,ne),i=eT.getMatrix3(o,nt);return rE.fromRotationMatrix(i,a)};let nr=new(0,F.default)(1,1,1),nn=new(0,F.default),na=new eT,no=new eT,ni=new eg,nu=new rE;rK.fixedFrameToHeadingPitchRoll=function(e,t,r,n){L.default.defined("transform",e),t=t??K.default,r=r??rK.eastNorthUpToFixedFrame,(0,$.default)(n)||(n=new rt);let a=eT.getTranslation(e,nn);if(F.default.equals(a,F.default.ZERO))return n.heading=0,n.pitch=0,n.roll=0,n;let o=eT.inverseTransformation(r(a,t,na),na),i=eT.setScale(e,nr,no);i=eT.setTranslation(i,F.default.ZERO,i),o=eT.multiply(o,i,o);let u=rE.fromRotationMatrix(eT.getMatrix3(o,ni),nu);return u=rE.normalize(u,u),rt.fromQuaternion(u,n)};let ns=B.default.TWO_PI/86400,nl=new ts;rK.computeIcrfToCentralBodyFixedMatrix=function(e,t){let r=rK.computeIcrfToFixedMatrix(e,t);return(0,$.default)(r)||(r=rK.computeTemeToPseudoFixedMatrix(e,t)),r},rK.computeTemeToPseudoFixedMatrix=function(e,t){let r;if(!(0,$.default)(e))throw new(0,Q.default)("date is required.");let n=(nl=ts.addSeconds(e,-ts.computeTaiMinusUtc(e),nl)).dayNumber,a=nl.secondsOfDay,o=n-2451545,i=(24110.54841+(r=a>=43200?(o+.5)/eG.DAYS_PER_JULIAN_CENTURY:(o-.5)/eG.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+r*(.093104+-62e-7*r)))*ns%B.default.TWO_PI+(72921158553e-15+11772758384668e-32*(n-2451545.5))*((a+.5*eG.SECONDS_PER_DAY)%eG.SECONDS_PER_DAY),u=Math.cos(i),s=Math.sin(i);return(0,$.default)(t)?(t[0]=u,t[1]=-s,t[2]=0,t[3]=s,t[4]=u,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new eg(u,s,0,-s,u,0,0,0,1)},rK.iau2006XysData=new rf,rK.earthOrientationParameters=t6.NONE,rK.preloadIcrfFixed=function(e){let t=e.start.dayNumber,r=e.start.secondsOfDay+32.184,n=e.stop.dayNumber,a=e.stop.secondsOfDay+32.184;return rK.iau2006XysData.preload(t,r,n,a)},rK.computeIcrfToFixedMatrix=function(e,t){if(!(0,$.default)(e))throw new(0,Q.default)("date is required.");(0,$.default)(t)||(t=new eg);let r=rK.computeFixedToIcrfMatrix(e,t);if((0,$.default)(r))return eg.transpose(r,t)};let nf=new rt,nd=new eg,nc=new ts;rK.computeMoonFixedToIcrfMatrix=function(e,t){if(!(0,$.default)(e))throw new(0,Q.default)("date is required.");(0,$.default)(t)||(t=new eg);let r=ts.addSeconds(e,32.184,nc),n=ts.totalDays(r)-2451545,a=B.default.toRadians(12.112)-B.default.toRadians(.052992)*n,o=B.default.toRadians(24.224)-B.default.toRadians(.105984)*n,i=B.default.toRadians(227.645)+B.default.toRadians(13.012)*n,u=B.default.toRadians(261.105)+B.default.toRadians(13.340716)*n,s=B.default.toRadians(358)+B.default.toRadians(.9856)*n;return nf.pitch=B.default.toRadians(180)-B.default.toRadians(3.878)*Math.sin(a)-B.default.toRadians(.12)*Math.sin(o)+B.default.toRadians(.07)*Math.sin(i)-B.default.toRadians(.017)*Math.sin(u),nf.roll=B.default.toRadians(-23.47)+B.default.toRadians(1.543)*Math.cos(a)+B.default.toRadians(.24)*Math.cos(o)-B.default.toRadians(.028)*Math.cos(i)+B.default.toRadians(.007)*Math.cos(u),nf.heading=B.default.toRadians(154.375)+B.default.toRadians(13.17635831)*n+B.default.toRadians(3.558)*Math.sin(a)+B.default.toRadians(.121)*Math.sin(o)-B.default.toRadians(.064)*Math.sin(i)+B.default.toRadians(.016)*Math.sin(u)+B.default.toRadians(.025)*Math.sin(s),eg.fromHeadingPitchRoll(nf,nd)},rK.computeIcrfToMoonFixedMatrix=function(e,t){if(!(0,$.default)(e))throw new(0,Q.default)("date is required.");(0,$.default)(t)||(t=new eg);let r=rK.computeMoonFixedToIcrfMatrix(e,t);if((0,$.default)(r))return eg.transpose(r,t)};let np=new rl(0,0,0),nh=new eJ(0,0,0,0,0,0),nm=new eg,ny=new eg;rK.computeFixedToIcrfMatrix=function(e,t){if(!(0,$.default)(e))throw new(0,Q.default)("date is required.");(0,$.default)(t)||(t=new eg);let r=rK.earthOrientationParameters.compute(e,nh);if(!(0,$.default)(r))return;let n=e.dayNumber,a=e.secondsOfDay+32.184,o=rK.iau2006XysData.computeXysRadians(n,a,np);if(!(0,$.default)(o))return;let i=o.x+r.xPoleOffset,u=o.y+r.yPoleOffset,s=1/(1+Math.sqrt(1-i*i-u*u));nm[0]=1-s*i*i,nm[3]=-s*i*u,nm[6]=i,nm[1]=-s*i*u,nm[4]=1-s*u*u,nm[7]=u,nm[2]=-i,nm[5]=-u,nm[8]=1-s*(i*i+u*u);let l=eg.fromRotationZ(-o.s,ny),f=eg.multiply(nm,l,nm),d=e.dayNumber,c=(e.secondsOfDay-ts.computeTaiMinusUtc(e)+r.ut1MinusUtc)/eG.SECONDS_PER_DAY,p=.779057273264+c+.00273781191135448*(d-2451545+c);p=p%1*B.default.TWO_PI;let h=eg.fromRotationZ(p,ny),m=eg.multiply(f,h,nm),y=Math.cos(r.xPoleWander),g=Math.cos(r.yPoleWander),b=Math.sin(r.xPoleWander),w=Math.sin(r.yPoleWander),O=n-2451545+a/eG.SECONDS_PER_DAY,v=-47e-6*(O/=36525)*B.default.RADIANS_PER_DEGREE/3600,x=Math.cos(v),_=Math.sin(v);return ny[0]=y*x,ny[1]=y*_,ny[2]=b,ny[3]=-g*_+w*b*x,ny[4]=g*x+w*b*_,ny[5]=-w*y,ny[6]=-w*_-g*b*x,ny[7]=w*x-g*b*_,ny[8]=g*y,eg.multiply(m,ny,t)};let ng=new el;rK.pointToWindowCoordinates=function(e,t,r,n){return(n=rK.pointToGLWindowCoordinates(e,t,r,n)).y=2*t[5]-n.y,n},rK.pointToGLWindowCoordinates=function(e,t,r,n){if(!(0,$.default)(e))throw new(0,Q.default)("modelViewProjectionMatrix is required.");if(!(0,$.default)(t))throw new(0,Q.default)("viewportTransformation is required.");if(!(0,$.default)(r))throw new(0,Q.default)("point is required.");return(0,$.default)(n)||(n=new(0,D.default)),eT.multiplyByVector(e,el.fromElements(r.x,r.y,r.z,1,ng),ng),el.multiplyByScalar(ng,1/ng.w,ng),eT.multiplyByVector(t,ng,ng),D.default.fromCartesian4(ng,n)};let nb=new(0,F.default),nw=new(0,F.default),nO=new(0,F.default);rK.rotationMatrixFromPositionVelocity=function(e,t,r,n){if(!(0,$.default)(e))throw new(0,Q.default)("position is required.");if(!(0,$.default)(t))throw new(0,Q.default)("velocity is required.");let a=(r??K.default).geodeticSurfaceNormal(e,nb),o=F.default.cross(t,a,nw);F.default.equalsEpsilon(o,F.default.ZERO,B.default.EPSILON6)&&(o=F.default.clone(F.default.UNIT_X,o));let i=F.default.cross(o,t,nO);return F.default.normalize(i,i),F.default.cross(t,i,o),F.default.negate(o,o),F.default.normalize(o,o),(0,$.default)(n)||(n=new eg),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=o.x,n[4]=o.y,n[5]=o.z,n[6]=i.x,n[7]=i.y,n[8]=i.z,n};let nv=new eT(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),nx=new Y,n_=new(0,F.default),nS=new(0,F.default),nj=new eg,nA=new eT,nE=new eT;rK.basisTo2D=function(e,t,r){let n;if(!(0,$.default)(e))throw new(0,Q.default)("projection is required.");if(!(0,$.default)(t))throw new(0,Q.default)("matrix is required.");if(!(0,$.default)(r))throw new(0,Q.default)("result is required.");let a=eT.getTranslation(t,nS),o=e.ellipsoid;if(F.default.equals(a,F.default.ZERO))n=F.default.clone(F.default.ZERO,n_);else{let t=o.cartesianToCartographic(a,nx);n=e.project(t,n_),F.default.fromElements(n.z,n.x,n.y,n)}let i=rK.eastNorthUpToFixedFrame(a,o,nA),u=eT.inverseTransformation(i,nE),s=eT.getMatrix3(t,nj),l=eT.multiplyByMatrix3(u,s,r);return eT.multiply(nv,l,r),eT.setTranslation(r,n,r),r},rK.ellipsoidTo2DModelMatrix=function(e,t,r){if(!(0,$.default)(e))throw new(0,Q.default)("projection is required.");if(!(0,$.default)(t))throw new(0,Q.default)("center is required.");if(!(0,$.default)(r))throw new(0,Q.default)("result is required.");let n=e.ellipsoid,a=rK.eastNorthUpToFixedFrame(t,n,nA),o=eT.inverseTransformation(a,nE),i=n.cartesianToCartographic(t,nx),u=e.project(i,n_);F.default.fromElements(u.z,u.x,u.y,u);let s=eT.fromTranslation(u,nA);return eT.multiply(nv,o,r),eT.multiply(s,r,r),r};let nR=new(0,D.default),nq=new(0,D.default),nT=new(0,D.default),nz=new(0,F.default),nC=new eT,nI=new eT,nP=new(0,eW.default),nM=(0,I.svg)`<svg height="145" width="145" viewBox="0 0 145 145"><path d="M72.5 20.219c-28.867 0-52.281 23.407-52.281 52.281s23.414 52.313 52.281 52.313c28.867 0 52.281-23.44 52.281-52.313 0-28.874-23.414-52.281-52.281-52.281zm0 1.75c13.843 0 26.369 5.558 35.5 14.562l-11.031 11 .625.625 11.031-11c8.92 9.109 14.438 21.58 14.438 35.344 0 13.765-5.518 26.227-14.438 35.344l-11.031-11-.625.625 11.031 11c-9.13 9.01-21.659 14.594-35.5 14.594-13.802 0-26.321-5.535-35.438-14.5l11.126-11.094c6.277 6.122 14.857 9.906 24.312 9.906 19.242 0 34.875-15.63 34.875-34.875 0-19.246-15.633-34.844-34.875-34.844a34.736 34.736 0 0 0-24.313 9.875L37.063 36.438c9.116-8.96 21.634-14.47 35.437-14.47ZM36.469 37.062l11.093 11.094A34.73 34.73 0 0 0 37.657 72.5c0 9.472 3.774 18.056 9.907 24.344L36.47 107.938c-8.967-9.125-14.5-21.625-14.5-35.438 0-13.813 5.533-26.32 14.5-35.438zM72.5 39.407c18.298 0 33.125 14.792 33.125 33.094S90.798 105.625 72.5 105.625c-18.298 0-33.094-14.823-33.094-33.125S54.202 39.406 72.5 39.406zM22.844 71.625v1.75h13.968v-1.75H22.845Zm85.562 0v1.75h14v-1.75zM71.75 108.25v13.938h1.719V108.25Z"/><path d="M78.408 36.705h-3.584l-5.805-10.08h-.075l.075 1.904q.056.952.093 1.904v6.272h-2.52V23.377h3.565l5.787 9.987H76q-.019-.934-.056-1.848l-.075-1.83v-6.309h2.539z"/></svg>`,nU=(0,I.svg)`<svg height="145" width="145" viewBox="0 0 145 145"><path d="M72.719 54.375c-.477 0-.908.245-1.219.563-.31.317-.551.701-.781 1.187-.172.363-.32.792-.469 1.25-6.916 1.076-12.313 6.657-13 13.625-.328.117-.662.245-.938.375-.485.23-.901.471-1.218.781-.317.31-.563.742-.563 1.219h.032c0 .477.245.877.562 1.188.317.31.702.582 1.188.812.355.168.771.322 1.218.469 1.371 6.1 6.421 10.834 12.719 11.812.147.447.3.863.469 1.219.23.486.47.87.781 1.188.31.317.742.562 1.219.562.476 0 .877-.245 1.187-.563.31-.317.583-.701.813-1.187.172-.363.319-.792.469-1.25 6.249-1.017 11.256-5.718 12.624-11.781.448-.147.864-.3 1.22-.469.485-.23.9-.502 1.218-.813.317-.31.563-.71.563-1.187h-.032c0-.477-.245-.909-.562-1.219-.317-.31-.702-.551-1.188-.781a9.68 9.68 0 00-.906-.375c-.685-6.922-6.052-12.496-12.906-13.625-.15-.462-.327-.885-.5-1.25a4.292 4.292 0 00-.813-1.188c-.31-.317-.71-.562-1.187-.562zm-.063 1.406c.036-.013.06 0 .063 0 .005 0 .043-.022.187.125.145.148.344.447.531.844.064.135.124.31.188.469-.32-.02-.644-.063-.969-.063-.289 0-.558.047-.844.063.064-.16.124-.334.188-.469.188-.397.356-.696.5-.844a.508.508 0 01.156-.125zm0 2.407c.448 0 .906.054 1.344.093.177.593.348 1.271.5 2.032.475 2.37.808 5.463.938 8.937-.907-.029-1.835-.063-2.782-.063-.923 0-1.802.036-2.687.063.138-3.474.493-6.567.969-8.938.154-.771.32-1.463.5-2.062a14.53 14.53 0 011.218-.063zm-2.719.28c-.13.5-.26.988-.374 1.563-.499 2.488-.839 5.694-.97 9.25-3.213.152-6.119.48-8.406.938-.682.136-1.275.28-1.843.437.799-6.135 5.504-11.036 11.593-12.187zm5.563.032c6.043 1.184 10.705 6.053 11.5 12.156-.57-.156-1.2-.302-1.875-.437-2.263-.453-5.109-.784-8.281-.938-.13-3.556-.47-6.762-.969-9.25-.113-.564-.248-1.04-.375-1.531zm-2.844 12.094c.96 0 1.896.033 2.813.062.013.612.031 1.215.031 1.844 0 1.229-.014 2.438-.063 3.594-.897.028-1.811.062-2.75.062-.927 0-1.83-.034-2.718-.062a82.244 82.244 0 01-.063-3.594c0-.629.018-1.232.031-1.844.896-.028 1.784-.062 2.72-.062zm-4.094.094c-.012.606-.03 1.19-.03 1.812 0 1.224.015 2.408.062 3.563-3.125-.15-5.921-.472-8.094-.907-.785-.157-1.511-.316-2.125-.5a14.206 14.206 0 01-.188-2.156c0-.116.029-.229.032-.344.643-.203 1.39-.39 2.25-.562 2.167-.434 4.979-.756 8.093-.906zm8.313.03c3.075.153 5.824.447 7.969.876.857.171 1.63.36 2.281.562.003.115 0 .229 0 .344 0 .736-.08 1.45-.188 2.156-.598.18-1.29.346-2.062.5-2.158.432-4.932.755-8.031.906.047-1.154.062-2.338.062-3.562 0-.612-.019-1.185-.031-1.781zm-19.719 1.844c.003.573.061 1.132.125 1.688-.125-.051-.266-.105-.375-.156-.396-.188-.665-.388-.812-.531-.147-.144-.157-.183-.157-.188 0-.005-.022-.075.126-.219.147-.144.447-.312.843-.5.071-.033.172-.06.25-.094zm31.032 0c.082.036.175.06.25.094.396.188.665.356.812.5.147.144.156.214.156.219 0 .005-.009.044-.156.188-.147.143-.416.343-.813.53-.097.047-.233.08-.343.126.062-.547.091-1.094.094-1.656zm-29.5 3.626c.479.123.983.234 1.53.343 2.303.46 5.23.787 8.47.938.167 2.843.46 5.433.874 7.5.116.575.246 1.063.376 1.562-5.464-1.028-9.834-5.092-11.25-10.344zm27.968 0C85.248 81.407 80.92 85.442 75.5 86.5c.127-.49.262-.967.375-1.531.414-2.067.708-4.657.875-7.5 3.204-.152 6.088-.48 8.375-.938.548-.11 1.052-.22 1.531-.344zM70.062 77.53c.866.026 1.724.031 2.626.031.912 0 1.782-.004 2.656-.03-.165 2.736-.454 5.207-.844 7.156-.152.76-.323 1.438-.5 2.03-.437.04-.896.063-1.344.063-.415 0-.812-.029-1.219-.062a22.698 22.698 0 01-.5-2.031c-.39-1.95-.7-4.42-.874-7.157zm1.75 10.281c.285.016.555.032.844.032.325 0 .649-.012.969-.031-.06.148-.127.31-.188.437-.187.397-.386.696-.53.844-.145.147-.183.125-.188.125-.006 0-.075.022-.219-.125-.144-.148-.312-.447-.5-.844a8.629 8.629 0 01-.188-.438z"/></svg>`,nk=(0,I.svg)`<svg height="145" width="145" viewBox="0 0 145 145"><path d="M72.469 22.031c-12.963.02-25.947 4.973-35.781 14.844l11.156 11.094c13.678-13.729 35.599-13.742 49.281-.063l11.125-11.125c-9.848-9.846-22.818-14.769-35.781-14.75z"/></svg>`;class nN extends I.LitElement{static get properties(){return{scene:{type:Object},clock:{type:Object},ready:{type:Boolean},heading:{type:Number},orbitCursorAngle:{type:Number},orbitCursorOpacity:{type:Number},resetSpeed:{type:Number}}}static get styles(){return(0,I.css)`
      :host {
        --cesium-compass-stroke-color: rgba(0, 0, 0, 0.6);
        --cesium-compass-fill-color: rgb(224, 225, 226);
      }
      :host * {
        box-sizing: content-box;
      }
      .compass {
        position: absolute;
        right: 0;
        top: 0;
        width: 95px;
        height: 95px;
        cursor: pointer;
      }
      .outer-ring-background {
        position: absolute;
        top: 14px;
        left: 14px;
        width: 44px;
        height: 44px;
        border-radius: 100%;
        border: 12px solid var(--cesium-compass-fill-color);
      }
      .inner-ring-background {
        position: absolute;
        top: 30px;
        left: 30px;
        width: 33px;
        height: 33px;
        border-radius: 100%;
        background-color: var(--cesium-compass-fill-color);
        border: 1px solid var(--cesium-compass-stroke-color);
      }
      .rotation-marker, .outer-ring {
        will-change: opacity, transform;
      }
      .rotation-marker, .outer-ring, .inner-ring {
        position: absolute;
        top: 0;
        width: 95px;
        height: 95px;
        fill: var(--cesium-compass-stroke-color);
      }
      .rotation-marker svg, .outer-ring svg, .inner-ring svg {
        width: 100%;
        height: 100%;
      }
    `}constructor(){super(),this.scene,this.clock=void 0,this.ready=!1,this.resetSpeed=Math.PI/100,this.rotateClick=void 0,this.unlistenFromPostRender=null,this.unlistenFromClockTick=null,this.orbitCursorOpacity=0,this.handleRotatePointerMoveFunction=this.handleRotatePointerMove.bind(this),this.handleRotatePointerUpFunction=this.handleRotatePointerUp.bind(this),this.handleOrbitPointerMoveFunction=this.handleOrbitPointerMove.bind(this),this.handleOrbitPointerUpFunction=this.handleOrbitPointerUp.bind(this),this.handleOrbitTickFunction=this.handleOrbitTick.bind(this),this.context={}}updated(){this.scene&&this.clock&&!this.unlistenFromPostRender&&(this.unlistenFromPostRender=this.scene.postRender.addEventListener(()=>{this.heading=this.scene.camera.heading}),this.ready=!0)}get outerRingStyle(){return{transform:`rotate(-${this.heading}rad)`}}get rotationMarkerStyle(){return{transform:`rotate(-${this.orbitCursorAngle}rad)`,opacity:`${this.orbitCursorOpacity}`}}disconnectedCallback(){this.unlistenFromPostRender&&this.unlistenFromPostRender(),super.disconnectedCallback()}handlePointerDown(e){let t=this.scene.camera,r=e.currentTarget;this.context.compassRectangle=r.getBoundingClientRect(),this.context.compassCenter=new(0,D.default)((this.context.compassRectangle.right-this.context.compassRectangle.left)/2,(this.context.compassRectangle.bottom-this.context.compassRectangle.top)/2),nT.x=e.clientX-this.context.compassRectangle.left,nT.y=e.clientY-this.context.compassRectangle.top;let n=D.default.subtract(nT,this.context.compassCenter,nR),a=D.default.magnitude(n);nq.x=this.scene.canvas.clientWidth/2,nq.y=this.scene.canvas.clientHeight/2;let o=t.getPickRay(nq,nP);this.context.viewCenter=this.scene.globe.pick(o,this.scene,nz),this.context.frame=rK.eastNorthUpToFixedFrame(this.context.viewCenter?this.context.viewCenter:t.positionWC,K.WGS84,nI);let i=a/(this.context.compassRectangle.width/2);i<.3448275862068966?this.orbit(n):i<1&&this.rotate(n),e.stopPropagation(),e.preventDefault()}rotate(e){let t=this.scene.camera;this.context.rotateInitialCursorAngle=Math.atan2(-e.y,e.x);let r=eT.clone(t.transform,nC);t.lookAtTransform(this.context.frame),this.context.rotateInitialCameraAngle=Math.atan2(t.position.y,t.position.x),t.lookAtTransform(r),this.rotateClick=!0,document.addEventListener("pointermove",this.handleRotatePointerMoveFunction,!1),document.addEventListener("pointerup",this.handleRotatePointerUpFunction,!1)}handleRotatePointerMove(e){if(this.moveUpIfTooCloseToTerrain())return;let t=this.scene.camera;nT.x=e.clientX-this.context.compassRectangle.left,nT.y=e.clientY-this.context.compassRectangle.top;let r=D.default.subtract(nT,this.context.compassCenter,nR),n=Math.atan2(-r.y,r.x)-this.context.rotateInitialCursorAngle,a=B.default.zeroToTwoPi(this.context.rotateInitialCameraAngle-n),o=eT.clone(t.transform,nC);t.lookAtTransform(this.context.frame);let i=Math.atan2(t.position.y,t.position.x);t.rotateRight(a-i),t.lookAtTransform(o),this.rotateClick=!1}handleRotatePointerUp(e){document.removeEventListener("pointermove",this.handleRotatePointerMoveFunction,!1),document.removeEventListener("pointerup",this.handleRotatePointerUpFunction,!1),this.rotateClick&&this.resetToNorth()}resetToNorth(){let e=this.scene.camera,t=eT.clone(e.transform,nC);e.lookAtTransform(this.context.frame);let r=B.default.negativePiToPi(B.default.PI_OVER_TWO+Math.atan2(e.position.y,e.position.x)),n=Math.abs(r)/this.resetSpeed,a=0,o=performance.now(),i=()=>{let u=performance.now()-o,s=B.default.clamp(u/n,0,1);e.rotateLeft((s-a)*r),a=s,s<1?window.requestAnimationFrame(i):e.lookAtTransform(t)};window.requestAnimationFrame(i)}orbit(e){this.context.orbitIsLook=!this.context.viewCenter,this.context.orbitLastTimestamp=performance.now(),document.addEventListener("pointermove",this.handleOrbitPointerMoveFunction,!1),document.addEventListener("pointerup",this.handleOrbitPointerUpFunction,!1),this.unlistenFromClockTick=this.clock.onTick.addEventListener(this.handleOrbitTickFunction),this.updateAngleAndOpacity(e,this.context.compassRectangle.width)}handleOrbitTick(){if(this.moveUpIfTooCloseToTerrain())return;let e=this.scene.camera,t=performance.now(),r=(t-this.context.orbitLastTimestamp)*((this.orbitCursorOpacity-.5)*2.5/1e3),n=this.orbitCursorAngle+B.default.PI_OVER_TWO,a=Math.cos(n)*r,o=Math.sin(n)*r,i=eT.clone(e.transform,nC);e.lookAtTransform(this.context.frame),this.context.orbitIsLook?(e.look(F.default.UNIT_Z,-a),e.look(e.right,-o)):(e.rotateLeft(a),e.rotateUp(o)),e.lookAtTransform(i),this.context.orbitLastTimestamp=t}distanceToTerrain(){let e=this.scene.camera,t=this.scene.globe.getHeight(e.positionCartographic);return e.positionCartographic.height-t}moveUpIfTooCloseToTerrain(){let e=this.scene.screenSpaceCameraController;if(!e.enableCollisionDetection)return!1;let t=this.distanceToTerrain()-e.minimumZoomDistance;return!!B.default.lessThan(t,0,B.default.EPSILON1)&&(this.scene.camera.moveUp(-t),!0)}updateAngleAndOpacity(e,t){let r=Math.atan2(-e.y,e.x);this.orbitCursorAngle=B.default.zeroToTwoPi(r-B.default.PI_OVER_TWO);let n=Math.min(D.default.magnitude(e)/(t/2),1);this.orbitCursorOpacity=.5*n*n+.5}handleOrbitPointerMove(e){nT.x=e.clientX-this.context.compassRectangle.left,nT.y=e.clientY-this.context.compassRectangle.top;let t=D.default.subtract(nT,this.context.compassCenter,nR);this.updateAngleAndOpacity(t,this.context.compassRectangle.width)}handleOrbitPointerUp(e){document.removeEventListener("pointermove",this.handleOrbitPointerMoveFunction,!1),document.removeEventListener("pointerup",this.handleOrbitPointerUpFunction,!1),this.unlistenFromClockTick(),this.orbitCursorOpacity=0}render(){return this.ready?(0,I.html)`
        <div class="compass" @pointerdown=${this.handlePointerDown}>
          <div class="outer-ring-background"></div>
          <div class="outer-ring" style=${N(this.outerRingStyle)}>${nM}</div>
          <div class="inner-ring-background"></div>
          <div class="inner-ring">${nU}</div>
          <div class="rotation-marker" style=${N(this.rotationMarkerStyle)}>${nk}</div>
        </div>
      `:(0,I.html)``}}customElements.define("cesium-compass",nN);
//# sourceMappingURL=cesium-compass.5782134a.js.map
