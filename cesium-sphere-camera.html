<!DOCTYPE html><html lang=en><script type=module src=cesium-binoculars.76e31908.js></script><script type=module src=cesium-compass.14794d0a.js></script><meta charset=UTF-8><script src=https://cesium.com/downloads/cesiumjs/releases/1.131/Build/Cesium/Cesium.js></script><link href=https://cesium.com/downloads/cesiumjs/releases/1.131/Build/Cesium/Widgets/widgets.css rel=stylesheet><style>html,body,#cesiumContainer{height:100%;margin:0}#activate{font-family:monospace;font-size:1.6em;font-weight:700;position:absolute;top:30px;right:30px}</style><body>
  <div id=cesiumContainer></div>
  <button id=activate type=button>toggle mode</button>
  <script type=module>import"./cesium-binoculars.76e31908.js";import"./cesium-compass.14794d0a.js";function e(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}var t=globalThis,i={},n={},a=t.parcelRequire5532;null==a&&((a=function(e){if(e in i)return i[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return i[e]=a,t.call(a.exports,a,a.exports),a.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequire5532=a);var s=a.register;s("hLMsx",function(t,i){e(t.exports,"createViewer",()=>a);let n=Cesium.Rectangle.fromDegrees(4,45,12,48);async function a(e){Object.assign(Cesium.RequestScheduler.requestsByServer,{"wmts.geo.admin.ch:443":28,"download.swissgeol.ch:443":28,"tile.openstreetmap.org:443":28});let t=new Cesium.Viewer(e,{timeline:!1,navigationHelpButton:!1,animation:!1,baseLayerPicker:!1,sceneModePicker:!1,geocoder:!1,homeButton:!1,fullscreenButton:!1,scene3DOnly:!0,baseLayer:new Cesium.ImageryLayer(new Cesium.UrlTemplateImageryProvider({url:"https://wmts.geo.admin.ch/1.0.0/ch.swisstopo.swissimage/default/current/3857/{z}/{x}/{y}.jpeg",rectangle:n})),terrainProvider:await Cesium.CesiumTerrainProvider.fromUrl("https://3d.geo.admin.ch/ch.swisstopo.terrain.3d/v1/")});return t.scene.highDynamicRange=!0,t.scene.requestRenderMode=!0,t.scene.globe.showGroundAtmosphere=!0,t.scene.globe.enableLighting=!0,t.scene.globe.preloadSiblings=!0,t.scene.fog.density=4e-4,t.scene.fog.minimumBrightness=.3,t.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(7.863775,46.686447,1200),orientation:{heading:Cesium.Math.toRadians(25),pitch:0},duration:0}),t}}),s("7HKs5",function(t,i){e(t.exports,"default",()=>n);var n=Object.freeze({LEFT_DOWN:0,LEFT_UP:1,LEFT_CLICK:2,LEFT_DOUBLE_CLICK:3,RIGHT_DOWN:5,RIGHT_UP:6,RIGHT_CLICK:7,MIDDLE_DOWN:10,MIDDLE_UP:11,MIDDLE_CLICK:12,MOUSE_MOVE:15,WHEEL:16,PINCH_START:17,PINCH_END:18,PINCH_MOVE:19})});var r=a("hLMsx"),o=a("kWQjc"),l=a("bXwZF"),c=a("AXvpI"),d=a("9btZb"),u=a("7HKs5");let h=new(0,o.default),v=new(0,o.default),g=new(0,d.default),f=new(0,d.default),E=new(0,l.default),p=new(0,l.default);class m{constructor(e){this.viewer=e,this.dragging_=!1,this.active_=!1,this.handleDownEvent_=this.handleDownEvent.bind(this),this.handleMoveEvent_=this.handleMoveEvent.bind(this),this.handleUpEvent_=this.handleUpEvent.bind(this)}get active(){return this.active_}set active(e){e!==this.active_&&(this.active_=e,this.viewer.scene.screenSpaceCameraController.enableInputs=!e,e?(this.viewer.screenSpaceEventHandler.setInputAction(this.handleDownEvent_,u.default.LEFT_DOWN),this.viewer.screenSpaceEventHandler.setInputAction(this.handleMoveEvent_,u.default.MOUSE_MOVE),this.viewer.screenSpaceEventHandler.setInputAction(this.handleUpEvent_,u.default.LEFT_UP)):(this.viewer.screenSpaceEventHandler.removeInputAction(u.default.LEFT_DOWN),this.viewer.screenSpaceEventHandler.removeInputAction(u.default.MOUSE_MOVE),this.viewer.screenSpaceEventHandler.removeInputAction(u.default.LEFT_UP)))}handleDownEvent(){this.dragging_=!0}handleMoveEvent(e){if(!this.dragging_)return;let t=this.viewer.camera,i=0;h.x=e.startPosition.x,h.y=0,v.x=e.endPosition.x,v.y=0;let n=t.getPickRay(h,g).direction,a=t.getPickRay(v,f).direction,s=l.default.dot(n,a);s<1&&(i=Math.acos(s)),i=e.startPosition.x>e.endPosition.x?-i:i;let r=this.viewer.scene.globe.ellipsoid.geodeticSurfaceNormal(t.position);t.look(r,-i),h.x=0,h.y=e.startPosition.y,v.x=0,v.y=e.endPosition.y,n=t.getPickRay(h,g).direction,a=t.getPickRay(v,f).direction,i=0,(s=l.default.dot(n,a))<1&&(i=Math.acos(s)),i=e.startPosition.y>e.endPosition.y?-i:i;let o=t.direction,d=l.default.negate(r,E),u=l.default.equalsEpsilon(o,r,c.default.EPSILON2),m=l.default.equalsEpsilon(o,d,c.default.EPSILON2);if(u||m)(u&&i<0||m&&i>0)&&t.look(t.right,-i);else{s=l.default.dot(o,r);let e=c.default.acosClamped(s);i>0&&i>e&&(i=e-c.default.EPSILON4),s=l.default.dot(o,d),e=c.default.acosClamped(s),i<0&&-i>e&&(i=-e+c.default.EPSILON4);let n=l.default.cross(r,o,p);t.look(n,i)}}handleUpEvent(){this.dragging_=!1}}(0,r.createViewer)("cesiumContainer").then(e=>{let t=new m(e);document.querySelector("#activate").addEventListener("click",()=>{t.active=!t.active})});</script>



