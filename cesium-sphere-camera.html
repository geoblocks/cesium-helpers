<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><script type="module" src="cesium-binoculars.40a88c35.js"></script><script type="module" src="cesium-compass.fa32d6a5.js"></script><script src="https://cesium.com/downloads/cesiumjs/releases/1.124/Build/Cesium/Cesium.js"></script><link href="https://cesium.com/downloads/cesiumjs/releases/1.124/Build/Cesium/Widgets/widgets.css" rel="stylesheet"><style>html,body,#cesiumContainer{height:100%;margin:0}#activate{font-family:monospace;font-size:1.6em;font-weight:700;position:absolute;top:30px;right:30px}</style></head><body> <div id="cesiumContainer"></div> <button id="activate" type="button">toggle mode</button> <script type="module">function e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var t=globalThis,n={},i={},a=t.parcelRequire94c2;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},t.parcelRequire94c2=a);var r=a.register;r("hLMsx",function(t,n){e(t.exports,"createViewer",()=>a);let i=Cesium.Rectangle.fromDegrees(4,45,12,48);async function a(e){Object.assign(Cesium.RequestScheduler.requestsByServer,{"wmts.geo.admin.ch:443":28,"download.swissgeol.ch:443":28,"tile.openstreetmap.org:443":28});let t=new Cesium.Viewer(e,{timeline:!1,navigationHelpButton:!1,animation:!1,baseLayerPicker:!1,sceneModePicker:!1,geocoder:!1,homeButton:!1,fullscreenButton:!1,scene3DOnly:!0,baseLayer:new Cesium.ImageryLayer(new Cesium.UrlTemplateImageryProvider({url:"https://wmts.geo.admin.ch/1.0.0/ch.swisstopo.swissimage/default/current/3857/{z}/{x}/{y}.jpeg",rectangle:i})),terrainProvider:await Cesium.CesiumTerrainProvider.fromUrl("https://3d.geo.admin.ch/ch.swisstopo.terrain.3d/v1/")});return t.scene.highDynamicRange=!0,t.scene.globe.showGroundAtmosphere=!0,t.scene.globe.enableLighting=!0,t.scene.globe.preloadSiblings=!0,t.scene.fog.density=4e-4,t.scene.fog.minimumBrightness=.3,t.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(7.863775,46.686447,1200),orientation:{heading:Cesium.Math.toRadians(25),pitch:0},duration:0}),t}}),r("7HKs5",function(t,n){e(t.exports,"default",()=>i);var i=Object.freeze({LEFT_DOWN:0,LEFT_UP:1,LEFT_CLICK:2,LEFT_DOUBLE_CLICK:3,RIGHT_DOWN:5,RIGHT_UP:6,RIGHT_CLICK:7,MIDDLE_DOWN:10,MIDDLE_UP:11,MIDDLE_CLICK:12,MOUSE_MOVE:15,WHEEL:16,PINCH_START:17,PINCH_END:18,PINCH_MOVE:19})});var s=a("hLMsx"),o=a("kWQjc"),l=a("bXwZF"),c=a("AXvpI"),d=a("9btZb"),u=a("7HKs5");const h=new o.default,v=new o.default,g=new d.default,f=new d.default,E=new l.default,p=new l.default;class m{constructor(e){this.viewer=e,this.dragging_=!1,this.active_=!1,this.handleDownEvent_=this.handleDownEvent.bind(this),this.handleMoveEvent_=this.handleMoveEvent.bind(this),this.handleUpEvent_=this.handleUpEvent.bind(this)}get active(){return this.active_}set active(e){e!==this.active_&&(this.active_=e,this.viewer.scene.screenSpaceCameraController.enableInputs=!e,e?(this.viewer.screenSpaceEventHandler.setInputAction(this.handleDownEvent_,u.default.LEFT_DOWN),this.viewer.screenSpaceEventHandler.setInputAction(this.handleMoveEvent_,u.default.MOUSE_MOVE),this.viewer.screenSpaceEventHandler.setInputAction(this.handleUpEvent_,u.default.LEFT_UP)):(this.viewer.screenSpaceEventHandler.removeInputAction(u.default.LEFT_DOWN),this.viewer.screenSpaceEventHandler.removeInputAction(u.default.MOUSE_MOVE),this.viewer.screenSpaceEventHandler.removeInputAction(u.default.LEFT_UP)))}handleDownEvent(){this.dragging_=!0}handleMoveEvent(e){if(!this.dragging_)return;let t=this.viewer.camera,n=0;h.x=e.startPosition.x,h.y=0,v.x=e.endPosition.x,v.y=0;let i=t.getPickRay(h,g).direction,a=t.getPickRay(v,f).direction,r=(0,l.default).dot(i,a);r<1&&(n=Math.acos(r)),n=e.startPosition.x>e.endPosition.x?-n:n;let s=this.viewer.scene.globe.ellipsoid.geodeticSurfaceNormal(t.position);t.look(s,-n),h.x=0,h.y=e.startPosition.y,v.x=0,v.y=e.endPosition.y,i=t.getPickRay(h,g).direction,a=t.getPickRay(v,f).direction,n=0,(r=(0,l.default).dot(i,a))<1&&(n=Math.acos(r)),n=e.startPosition.y>e.endPosition.y?-n:n;let o=t.direction,d=(0,l.default).negate(s,E),u=(0,l.default).equalsEpsilon(o,s,c.default.EPSILON2),m=(0,l.default).equalsEpsilon(o,d,c.default.EPSILON2);if(u||m)(u&&n<0||m&&n>0)&&t.look(t.right,-n);else{r=(0,l.default).dot(o,s);let e=(0,c.default).acosClamped(r);n>0&&n>e&&(n=e-c.default.EPSILON4),r=(0,l.default).dot(o,d),e=(0,c.default).acosClamped(r),n<0&&-n>e&&(n=-e+c.default.EPSILON4);let i=(0,l.default).cross(s,o,p);t.look(i,n)}}handleUpEvent(){this.dragging_=!1}}(0,s.createViewer)("cesiumContainer").then(e=>{let t=new m(e);document.querySelector("#activate").addEventListener("click",()=>{t.active=!t.active})});</script> </body></html>