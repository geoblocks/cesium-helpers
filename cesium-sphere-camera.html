<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><script type="module" src="/cesium-binoculars.d2f3ff4f.js"></script><script src="https://cesium.com/downloads/cesiumjs/releases/1.110/Build/Cesium/Cesium.js"></script><link href="https://cesium.com/downloads/cesiumjs/releases/1.110/Build/Cesium/Widgets/widgets.css" rel="stylesheet"><style>html,body,#cesiumContainer{height:100%;margin:0}#activate{font-family:monospace;font-size:1.6em;font-weight:700;position:absolute;top:30px;right:30px}</style></head><body> <div id="cesiumContainer"></div> <button id="activate" type="button">toggle mode</button> <script type="module">var e=globalThis,t={},n={},a=e.parcelRequire5532;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,a.call(r.exports,r,r.exports),r.exports}var u=Error("Cannot find module '"+e+"'");throw u.code="MODULE_NOT_FOUND",u}).register=function(e,t){n[e]=t},e.parcelRequire5532=a),(0,a.register)("hLMsx",function(e,t){Object.defineProperty(e.exports,"createViewer",{get:()=>a,set:void 0,enumerable:!0,configurable:!0});let n=Cesium.Rectangle.fromDegrees(4,45,12,48);async function a(e){Object.assign(Cesium.RequestScheduler.requestsByServer,{"wmts.geo.admin.ch:443":28,"download.swissgeol.ch:443":28,"tile.openstreetmap.org:443":28});let t=new Cesium.Viewer(e,{timeline:!1,navigationHelpButton:!1,animation:!1,baseLayerPicker:!1,sceneModePicker:!1,geocoder:!1,homeButton:!1,fullscreenButton:!1,scene3DOnly:!0,baseLayer:new Cesium.ImageryLayer(new Cesium.UrlTemplateImageryProvider({url:"https://wmts.geo.admin.ch/1.0.0/ch.swisstopo.swissimage/default/current/3857/{z}/{x}/{y}.jpeg",rectangle:n})),terrainProvider:await Cesium.CesiumTerrainProvider.fromUrl("https://download.swissgeol.ch/cli_terrain/ch-2m/")});return t.scene.highDynamicRange=!0,t.scene.globe.showGroundAtmosphere=!0,t.scene.globe.enableLighting=!0,t.scene.globe.preloadSiblings=!0,t.scene.fog.density=4e-4,t.scene.fog.minimumBrightness=.3,t.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(7.863775,46.686447,1200),orientation:{heading:Cesium.Math.toRadians(25),pitch:0},duration:0}),t}});var r=a("hLMsx"),u=a("3pzcG"),l=a("8w8ZH"),f=a("jQJji"),o=a("1vHsR"),i=a("AXvpI");function c(e,t){this.x=(0,l.default)(e,0),this.y=(0,l.default)(t,0)}c.fromElements=function(e,t,n){return(0,f.default)(n)?(n.x=e,n.y=t,n):new c(e,t)},c.clone=function(e,t){if((0,f.default)(e))return(0,f.default)(t)?(t.x=e.x,t.y=e.y,t):new c(e.x,e.y)},c.fromCartesian3=c.clone,c.fromCartesian4=c.clone,c.packedLength=2,c.pack=function(e,t,n){return(0,u.default).typeOf.object("value",e),(0,u.default).defined("array",t),n=(0,l.default)(n,0),t[n++]=e.x,t[n]=e.y,t},c.unpack=function(e,t,n){return(0,u.default).defined("array",e),t=(0,l.default)(t,0),(0,f.default)(n)||(n=new c),n.x=e[t++],n.y=e[t],n},c.packArray=function(e,t){(0,u.default).defined("array",e);let n=e.length,a=2*n;if((0,f.default)(t)){if(Array.isArray(t)||t.length===a)t.length!==a&&(t.length=a);else throw new o.default("If result is a typed array, it must have exactly array.length * 2 elements")}else t=Array(a);for(let a=0;a<n;++a)c.pack(e[a],t,2*a);return t},c.unpackArray=function(e,t){if((0,u.default).defined("array",e),(0,u.default).typeOf.number.greaterThanOrEquals("array.length",e.length,2),e.length%2!=0)throw new o.default("array length must be a multiple of 2.");let n=e.length;(0,f.default)(t)?t.length=n/2:t=Array(n/2);for(let a=0;a<n;a+=2){let n=a/2;t[n]=c.unpack(e,a,t[n])}return t},c.fromArray=c.unpack,c.maximumComponent=function(e){return(0,u.default).typeOf.object("cartesian",e),Math.max(e.x,e.y)},c.minimumComponent=function(e){return(0,u.default).typeOf.object("cartesian",e),Math.min(e.x,e.y)},c.minimumByComponent=function(e,t,n){return(0,u.default).typeOf.object("first",e),(0,u.default).typeOf.object("second",t),(0,u.default).typeOf.object("result",n),n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n},c.maximumByComponent=function(e,t,n){return(0,u.default).typeOf.object("first",e),(0,u.default).typeOf.object("second",t),(0,u.default).typeOf.object("result",n),n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n},c.clamp=function(e,t,n,a){(0,u.default).typeOf.object("value",e),(0,u.default).typeOf.object("min",t),(0,u.default).typeOf.object("max",n),(0,u.default).typeOf.object("result",a);let r=(0,i.default).clamp(e.x,t.x,n.x),l=(0,i.default).clamp(e.y,t.y,n.y);return a.x=r,a.y=l,a},c.magnitudeSquared=function(e){return(0,u.default).typeOf.object("cartesian",e),e.x*e.x+e.y*e.y},c.magnitude=function(e){return Math.sqrt(c.magnitudeSquared(e))};const d=new c;c.distance=function(e,t){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),c.subtract(e,t,d),c.magnitude(d)},c.distanceSquared=function(e,t){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),c.subtract(e,t,d),c.magnitudeSquared(d)},c.normalize=function(e,t){(0,u.default).typeOf.object("cartesian",e),(0,u.default).typeOf.object("result",t);let n=c.magnitude(e);if(t.x=e.x/n,t.y=e.y/n,isNaN(t.x)||isNaN(t.y))throw new o.default("normalized result is not a number");return t},c.dot=function(e,t){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),e.x*t.x+e.y*t.y},c.cross=function(e,t){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),e.x*t.y-e.y*t.x},c.multiplyComponents=function(e,t,n){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),(0,u.default).typeOf.object("result",n),n.x=e.x*t.x,n.y=e.y*t.y,n},c.divideComponents=function(e,t,n){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),(0,u.default).typeOf.object("result",n),n.x=e.x/t.x,n.y=e.y/t.y,n},c.add=function(e,t,n){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),(0,u.default).typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n},c.subtract=function(e,t,n){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),(0,u.default).typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n},c.multiplyByScalar=function(e,t,n){return(0,u.default).typeOf.object("cartesian",e),(0,u.default).typeOf.number("scalar",t),(0,u.default).typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n},c.divideByScalar=function(e,t,n){return(0,u.default).typeOf.object("cartesian",e),(0,u.default).typeOf.number("scalar",t),(0,u.default).typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n},c.negate=function(e,t){return(0,u.default).typeOf.object("cartesian",e),(0,u.default).typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t},c.abs=function(e,t){return(0,u.default).typeOf.object("cartesian",e),(0,u.default).typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t};const s=new c;c.lerp=function(e,t,n,a){return(0,u.default).typeOf.object("start",e),(0,u.default).typeOf.object("end",t),(0,u.default).typeOf.number("t",n),(0,u.default).typeOf.object("result",a),c.multiplyByScalar(t,n,s),a=c.multiplyByScalar(e,1-n,a),c.add(s,a,a)};const y=new c,p=new c;c.angleBetween=function(e,t){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),c.normalize(e,y),c.normalize(t,p),(0,i.default).acosClamped(c.dot(y,p))};const m=new c;c.mostOrthogonalAxis=function(e,t){(0,u.default).typeOf.object("cartesian",e),(0,u.default).typeOf.object("result",t);let n=c.normalize(e,m);return c.abs(n,n),t=n.x<=n.y?c.clone(c.UNIT_X,t):c.clone(c.UNIT_Y,t)},c.equals=function(e,t){return e===t||(0,f.default)(e)&&(0,f.default)(t)&&e.x===t.x&&e.y===t.y},c.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]},c.equalsEpsilon=function(e,t,n,a){return e===t||(0,f.default)(e)&&(0,f.default)(t)&&(0,i.default).equalsEpsilon(e.x,t.x,n,a)&&(0,i.default).equalsEpsilon(e.y,t.y,n,a)},c.ZERO=Object.freeze(new c(0,0)),c.ONE=Object.freeze(new c(1,1)),c.UNIT_X=Object.freeze(new c(1,0)),c.UNIT_Y=Object.freeze(new c(0,1)),c.prototype.clone=function(e){return c.clone(this,e)},c.prototype.equals=function(e){return c.equals(this,e)},c.prototype.equalsEpsilon=function(e,t,n){return c.equalsEpsilon(this,e,t,n)},c.prototype.toString=function(){return`(${this.x}, ${this.y})`};var u=a("3pzcG"),l=a("8w8ZH"),f=a("jQJji"),o=a("1vHsR"),i=a("AXvpI");function h(e,t,n){this.x=(0,l.default)(e,0),this.y=(0,l.default)(t,0),this.z=(0,l.default)(n,0)}h.fromSpherical=function(e,t){(0,u.default).typeOf.object("spherical",e),(0,f.default)(t)||(t=new h);let n=e.clock,a=e.cone,r=(0,l.default)(e.magnitude,1),o=r*Math.sin(a);return t.x=o*Math.cos(n),t.y=o*Math.sin(n),t.z=r*Math.cos(a),t},h.fromElements=function(e,t,n,a){return(0,f.default)(a)?(a.x=e,a.y=t,a.z=n,a):new h(e,t,n)},h.clone=function(e,t){if((0,f.default)(e))return(0,f.default)(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t):new h(e.x,e.y,e.z)},h.fromCartesian4=h.clone,h.packedLength=3,h.pack=function(e,t,n){return(0,u.default).typeOf.object("value",e),(0,u.default).defined("array",t),n=(0,l.default)(n,0),t[n++]=e.x,t[n++]=e.y,t[n]=e.z,t},h.unpack=function(e,t,n){return(0,u.default).defined("array",e),t=(0,l.default)(t,0),(0,f.default)(n)||(n=new h),n.x=e[t++],n.y=e[t++],n.z=e[t],n},h.packArray=function(e,t){(0,u.default).defined("array",e);let n=e.length,a=3*n;if((0,f.default)(t)){if(Array.isArray(t)||t.length===a)t.length!==a&&(t.length=a);else throw new o.default("If result is a typed array, it must have exactly array.length * 3 elements")}else t=Array(a);for(let a=0;a<n;++a)h.pack(e[a],t,3*a);return t},h.unpackArray=function(e,t){if((0,u.default).defined("array",e),(0,u.default).typeOf.number.greaterThanOrEquals("array.length",e.length,3),e.length%3!=0)throw new o.default("array length must be a multiple of 3.");let n=e.length;(0,f.default)(t)?t.length=n/3:t=Array(n/3);for(let a=0;a<n;a+=3){let n=a/3;t[n]=h.unpack(e,a,t[n])}return t},h.fromArray=h.unpack,h.maximumComponent=function(e){return(0,u.default).typeOf.object("cartesian",e),Math.max(e.x,e.y,e.z)},h.minimumComponent=function(e){return(0,u.default).typeOf.object("cartesian",e),Math.min(e.x,e.y,e.z)},h.minimumByComponent=function(e,t,n){return(0,u.default).typeOf.object("first",e),(0,u.default).typeOf.object("second",t),(0,u.default).typeOf.object("result",n),n.x=Math.min(e.x,t.x),n.y=Math.min(e.y,t.y),n.z=Math.min(e.z,t.z),n},h.maximumByComponent=function(e,t,n){return(0,u.default).typeOf.object("first",e),(0,u.default).typeOf.object("second",t),(0,u.default).typeOf.object("result",n),n.x=Math.max(e.x,t.x),n.y=Math.max(e.y,t.y),n.z=Math.max(e.z,t.z),n},h.clamp=function(e,t,n,a){(0,u.default).typeOf.object("value",e),(0,u.default).typeOf.object("min",t),(0,u.default).typeOf.object("max",n),(0,u.default).typeOf.object("result",a);let r=(0,i.default).clamp(e.x,t.x,n.x),l=(0,i.default).clamp(e.y,t.y,n.y),f=(0,i.default).clamp(e.z,t.z,n.z);return a.x=r,a.y=l,a.z=f,a},h.magnitudeSquared=function(e){return(0,u.default).typeOf.object("cartesian",e),e.x*e.x+e.y*e.y+e.z*e.z},h.magnitude=function(e){return Math.sqrt(h.magnitudeSquared(e))};const b=new h;h.distance=function(e,t){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),h.subtract(e,t,b),h.magnitude(b)},h.distanceSquared=function(e,t){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),h.subtract(e,t,b),h.magnitudeSquared(b)},h.normalize=function(e,t){(0,u.default).typeOf.object("cartesian",e),(0,u.default).typeOf.object("result",t);let n=h.magnitude(e);if(t.x=e.x/n,t.y=e.y/n,t.z=e.z/n,isNaN(t.x)||isNaN(t.y)||isNaN(t.z))throw new o.default("normalized result is not a number");return t},h.dot=function(e,t){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z},h.multiplyComponents=function(e,t,n){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),(0,u.default).typeOf.object("result",n),n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z,n},h.divideComponents=function(e,t,n){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),(0,u.default).typeOf.object("result",n),n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z,n},h.add=function(e,t,n){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),(0,u.default).typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n},h.subtract=function(e,t,n){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),(0,u.default).typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n},h.multiplyByScalar=function(e,t,n){return(0,u.default).typeOf.object("cartesian",e),(0,u.default).typeOf.number("scalar",t),(0,u.default).typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n},h.divideByScalar=function(e,t,n){return(0,u.default).typeOf.object("cartesian",e),(0,u.default).typeOf.number("scalar",t),(0,u.default).typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n},h.negate=function(e,t){return(0,u.default).typeOf.object("cartesian",e),(0,u.default).typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t},h.abs=function(e,t){return(0,u.default).typeOf.object("cartesian",e),(0,u.default).typeOf.object("result",t),t.x=Math.abs(e.x),t.y=Math.abs(e.y),t.z=Math.abs(e.z),t};const O=new h;h.lerp=function(e,t,n,a){return(0,u.default).typeOf.object("start",e),(0,u.default).typeOf.object("end",t),(0,u.default).typeOf.number("t",n),(0,u.default).typeOf.object("result",a),h.multiplyByScalar(t,n,O),a=h.multiplyByScalar(e,1-n,a),h.add(O,a,a)};const g=new h,x=new h;h.angleBetween=function(e,t){(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),h.normalize(e,g),h.normalize(t,x);let n=h.dot(g,x);return Math.atan2(h.magnitude(h.cross(g,x,g)),n)};const j=new h;h.mostOrthogonalAxis=function(e,t){(0,u.default).typeOf.object("cartesian",e),(0,u.default).typeOf.object("result",t);let n=h.normalize(e,j);return h.abs(n,n),t=n.x<=n.y?n.x<=n.z?h.clone(h.UNIT_X,t):h.clone(h.UNIT_Z,t):n.y<=n.z?h.clone(h.UNIT_Y,t):h.clone(h.UNIT_Z,t)},h.projectVector=function(e,t,n){(0,u.default).defined("a",e),(0,u.default).defined("b",t),(0,u.default).defined("result",n);let a=h.dot(e,t)/h.dot(t,t);return h.multiplyByScalar(t,a,n)},h.equals=function(e,t){return e===t||(0,f.default)(e)&&(0,f.default)(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z},h.equalsArray=function(e,t,n){return e.x===t[n]&&e.y===t[n+1]&&e.z===t[n+2]},h.equalsEpsilon=function(e,t,n,a){return e===t||(0,f.default)(e)&&(0,f.default)(t)&&(0,i.default).equalsEpsilon(e.x,t.x,n,a)&&(0,i.default).equalsEpsilon(e.y,t.y,n,a)&&(0,i.default).equalsEpsilon(e.z,t.z,n,a)},h.cross=function(e,t,n){(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),(0,u.default).typeOf.object("result",n);let a=e.x,r=e.y,l=e.z,f=t.x,o=t.y,i=t.z;return n.x=r*i-l*o,n.y=l*f-a*i,n.z=a*o-r*f,n},h.midpoint=function(e,t,n){return(0,u.default).typeOf.object("left",e),(0,u.default).typeOf.object("right",t),(0,u.default).typeOf.object("result",n),n.x=(e.x+t.x)*.5,n.y=(e.y+t.y)*.5,n.z=(e.z+t.z)*.5,n},h.fromDegrees=function(e,t,n,a,r){return(0,u.default).typeOf.number("longitude",e),(0,u.default).typeOf.number("latitude",t),e=(0,i.default).toRadians(e),t=(0,i.default).toRadians(t),h.fromRadians(e,t,n,a,r)};let w=new h,z=new h;const v=new h(40680631590769,40680631590769,40408299984661.445);h.fromRadians=function(e,t,n,a,r){(0,u.default).typeOf.number("longitude",e),(0,u.default).typeOf.number("latitude",t),n=(0,l.default)(n,0);let o=(0,f.default)(a)?a.radiiSquared:v,i=Math.cos(t);w.x=i*Math.cos(e),w.y=i*Math.sin(e),w.z=Math.sin(t),w=h.normalize(w,w),h.multiplyComponents(o,w,z);let c=Math.sqrt(h.dot(w,z));return z=h.divideByScalar(z,c,z),w=h.multiplyByScalar(w,n,w),(0,f.default)(r)||(r=new h),h.add(z,w,r)},h.fromDegreesArray=function(e,t,n){if((0,u.default).defined("coordinates",e),e.length<2||e.length%2!=0)throw new o.default("the number of coordinates must be a multiple of 2 and at least 2");let a=e.length;(0,f.default)(n)?n.length=a/2:n=Array(a/2);for(let r=0;r<a;r+=2){let a=e[r],u=e[r+1],l=r/2;n[l]=h.fromDegrees(a,u,0,t,n[l])}return n},h.fromRadiansArray=function(e,t,n){if((0,u.default).defined("coordinates",e),e.length<2||e.length%2!=0)throw new o.default("the number of coordinates must be a multiple of 2 and at least 2");let a=e.length;(0,f.default)(n)?n.length=a/2:n=Array(a/2);for(let r=0;r<a;r+=2){let a=e[r],u=e[r+1],l=r/2;n[l]=h.fromRadians(a,u,0,t,n[l])}return n},h.fromDegreesArrayHeights=function(e,t,n){if((0,u.default).defined("coordinates",e),e.length<3||e.length%3!=0)throw new o.default("the number of coordinates must be a multiple of 3 and at least 3");let a=e.length;(0,f.default)(n)?n.length=a/3:n=Array(a/3);for(let r=0;r<a;r+=3){let a=e[r],u=e[r+1],l=e[r+2],f=r/3;n[f]=h.fromDegrees(a,u,l,t,n[f])}return n},h.fromRadiansArrayHeights=function(e,t,n){if((0,u.default).defined("coordinates",e),e.length<3||e.length%3!=0)throw new o.default("the number of coordinates must be a multiple of 3 and at least 3");let a=e.length;(0,f.default)(n)?n.length=a/3:n=Array(a/3);for(let r=0;r<a;r+=3){let a=e[r],u=e[r+1],l=e[r+2],f=r/3;n[f]=h.fromRadians(a,u,l,t,n[f])}return n},h.ZERO=Object.freeze(new h(0,0,0)),h.ONE=Object.freeze(new h(1,1,1)),h.UNIT_X=Object.freeze(new h(1,0,0)),h.UNIT_Y=Object.freeze(new h(0,1,0)),h.UNIT_Z=Object.freeze(new h(0,0,1)),h.prototype.clone=function(e){return h.clone(this,e)},h.prototype.equals=function(e){return h.equals(this,e)},h.prototype.equalsEpsilon=function(e,t,n){return h.equalsEpsilon(this,e,t,n)},h.prototype.toString=function(){return`(${this.x}, ${this.y}, ${this.z})`};var u=a("3pzcG"),l=a("8w8ZH"),f=a("jQJji");function E(e,t){t=h.clone((0,l.default)(t,h.ZERO)),h.equals(t,h.ZERO)||h.normalize(t,t),this.origin=h.clone((0,l.default)(e,h.ZERO)),this.direction=t}E.clone=function(e,t){if((0,f.default)(e))return(0,f.default)(t)?(t.origin=h.clone(e.origin),t.direction=h.clone(e.direction),t):new E(e.origin,e.direction)},E.getPoint=function(e,t,n){return(0,u.default).typeOf.object("ray",e),(0,u.default).typeOf.number("t",t),(0,f.default)(n)||(n=new h),n=h.multiplyByScalar(e.direction,t,n),h.add(e.origin,n,n)};var M=a("7HKs5"),i=a("AXvpI");const S=new c,q=new c,A=new E,_=new E,C=new h,N=new h;class I{constructor(e){this.viewer=e,this.dragging_=!1,this.active_=!1,this.handleDownEvent_=this.handleDownEvent.bind(this),this.handleMoveEvent_=this.handleMoveEvent.bind(this),this.handleUpEvent_=this.handleUpEvent.bind(this)}get active(){return this.active_}set active(e){e!==this.active_&&(this.active_=e,this.viewer.scene.screenSpaceCameraController.enableInputs=!e,e?(this.viewer.screenSpaceEventHandler.setInputAction(this.handleDownEvent_,M.default.LEFT_DOWN),this.viewer.screenSpaceEventHandler.setInputAction(this.handleMoveEvent_,M.default.MOUSE_MOVE),this.viewer.screenSpaceEventHandler.setInputAction(this.handleUpEvent_,M.default.LEFT_UP)):(this.viewer.screenSpaceEventHandler.removeInputAction(M.default.LEFT_DOWN),this.viewer.screenSpaceEventHandler.removeInputAction(M.default.MOUSE_MOVE),this.viewer.screenSpaceEventHandler.removeInputAction(M.default.LEFT_UP)))}handleDownEvent(){this.dragging_=!0}handleMoveEvent(e){if(!this.dragging_)return;let t=this.viewer.camera,n=0;S.x=e.startPosition.x,S.y=0,q.x=e.endPosition.x,q.y=0;let a=t.getPickRay(S,A).direction,r=t.getPickRay(q,_).direction,u=h.dot(a,r);u<1&&(n=Math.acos(u)),n=e.startPosition.x>e.endPosition.x?-n:n;let l=this.viewer.scene.globe.ellipsoid.geodeticSurfaceNormal(t.position);t.look(l,-n),S.x=0,S.y=e.startPosition.y,q.x=0,q.y=e.endPosition.y,a=t.getPickRay(S,A).direction,r=t.getPickRay(q,_).direction,n=0,(u=h.dot(a,r))<1&&(n=Math.acos(u)),n=e.startPosition.y>e.endPosition.y?-n:n;let f=t.direction,o=h.negate(l,C),c=h.equalsEpsilon(f,l,i.default.EPSILON2),d=h.equalsEpsilon(f,o,i.default.EPSILON2);if(c||d)(c&&n<0||d&&n>0)&&t.look(t.right,-n);else{u=h.dot(f,l);let e=(0,i.default).acosClamped(u);n>0&&n>e&&(n=e-i.default.EPSILON4),u=h.dot(f,o),e=(0,i.default).acosClamped(u),n<0&&-n>e&&(n=-e+i.default.EPSILON4);let a=h.cross(l,f,N);t.look(a,n)}}handleUpEvent(){this.dragging_=!1}}(0,r.createViewer)("cesiumContainer").then(e=>{let t=new I(e);document.querySelector("#activate").addEventListener("click",()=>{t.active=!t.active})});</script> </body></html>